const lp=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const l of h.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerpolicy&&(h.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?h.credentials="include":s.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(s){if(s.ep)return;s.ep=!0;const h=r(s);fetch(s.href,h)}};lp();function Bt(){}const Ic=e=>e;function up(e,n){for(const r in n)e[r]=n[r];return e}function zc(e){return e()}function Ku(){return Object.create(null)}function Re(e){e.forEach(zc)}function hu(e){return typeof e=="function"}function Je(e,n){return e!=e?n==n:e!==n||e&&typeof e=="object"||typeof e=="function"}function hp(e){return Object.keys(e).length===0}function on(e,...n){if(e==null)return Bt;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function kt(e,n,r){e.$$.on_destroy.push(on(n,r))}function Ac(e,n,r,o){if(e){const s=Oc(e,n,r,o);return e[0](s)}}function Oc(e,n,r,o){return e[1]&&o?up(r.ctx.slice(),e[1](o(n))):r.ctx}function Nc(e,n,r,o){if(e[2]&&o){const s=e[2](o(r));if(n.dirty===void 0)return s;if(typeof s=="object"){const h=[],l=Math.max(n.dirty.length,s.length);for(let c=0;c<l;c+=1)h[c]=n.dirty[c]|s[c];return h}return n.dirty|s}return n.dirty}function Bc(e,n,r,o,s,h){if(s){const l=Oc(n,r,o,h);e.p(l,s)}}function Rc(e){if(e.ctx.length>32){const n=[],r=e.ctx.length/32;for(let o=0;o<r;o++)n[o]=-1;return n}return-1}function Ci(e,n,r){return e.set(r),n}const Zc=typeof window<"u";let cp=Zc?()=>window.performance.now():()=>Date.now(),cu=Zc?e=>requestAnimationFrame(e):Bt;const $r=new Set;function Dc(e){$r.forEach(n=>{n.c(e)||($r.delete(n),n.f())}),$r.size!==0&&cu(Dc)}function fp(e){let n;return $r.size===0&&cu(Dc),{promise:new Promise(r=>{$r.add(n={c:e,f:r})}),abort(){$r.delete(n)}}}function M(e,n){e.appendChild(n)}function Fc(e){if(!e)return document;const n=e.getRootNode?e.getRootNode():e.ownerDocument;return n&&n.host?n:e.ownerDocument}function dp(e){const n=A("style");return pp(Fc(e),n),n.sheet}function pp(e,n){M(e.head||e,n)}function Q(e,n,r){e.insertBefore(n,r||null)}function K(e){e.parentNode.removeChild(e)}function dn(e,n){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(n)}function A(e){return document.createElement(e)}function Pn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function xt(e){return document.createTextNode(e)}function q(){return xt(" ")}function Yr(){return xt("")}function pt(e,n,r,o){return e.addEventListener(n,r,o),()=>e.removeEventListener(n,r,o)}function Rr(e){return function(n){return n.preventDefault(),e.call(this,n)}}function w(e,n,r){r==null?e.removeAttribute(n):e.getAttribute(n)!==r&&e.setAttribute(n,r)}function Oe(e){return e===""?null:+e}function mp(e){return Array.from(e.childNodes)}function Ue(e,n){n=""+n,e.wholeText!==n&&(e.data=n)}function se(e,n){e.value=n==null?"":n}function ui(e,n,r,o){r===null?e.style.removeProperty(n):e.style.setProperty(n,r,o?"important":"")}function Ei(e,n){for(let r=0;r<e.options.length;r+=1){const o=e.options[r];if(o.__value===n){o.selected=!0;return}}e.selectedIndex=-1}function Cs(e){const n=e.querySelector(":checked")||e.options[0];return n&&n.__value}let Wa;function _p(){if(Wa===void 0){Wa=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Wa=!0}}return Wa}function gp(e,n){getComputedStyle(e).position==="static"&&(e.style.position="relative");const o=A("iframe");o.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),o.setAttribute("aria-hidden","true"),o.tabIndex=-1;const s=_p();let h;return s?(o.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",h=pt(window,"message",l=>{l.source===o.contentWindow&&n()})):(o.src="about:blank",o.onload=()=>{h=pt(o.contentWindow,"resize",n)}),M(e,o),()=>{(s||h&&o.contentWindow)&&h(),K(o)}}function Pt(e,n,r){e.classList[r?"add":"remove"](n)}function vp(e,n,{bubbles:r=!1,cancelable:o=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,r,o,n),s}const hs=new Map;let cs=0;function bp(e){let n=5381,r=e.length;for(;r--;)n=(n<<5)-n^e.charCodeAt(r);return n>>>0}function yp(e,n){const r={stylesheet:dp(n),rules:{}};return hs.set(e,r),r}function Ju(e,n,r,o,s,h,l,c=0){const p=16.666/o;let d=`{
`;for(let C=0;C<=1;C+=p){const z=n+(r-n)*h(C);d+=C*100+`%{${l(z,1-z)}}
`}const b=d+`100% {${l(r,1-r)}}
}`,y=`__svelte_${bp(b)}_${c}`,g=Fc(e),{stylesheet:P,rules:k}=hs.get(g)||yp(g,e);k[y]||(k[y]=!0,P.insertRule(`@keyframes ${y} ${b}`,P.cssRules.length));const v=e.style.animation||"";return e.style.animation=`${v?`${v}, `:""}${y} ${o}ms linear ${s}ms 1 both`,cs+=1,y}function wp(e,n){const r=(e.style.animation||"").split(", "),o=r.filter(n?h=>h.indexOf(n)<0:h=>h.indexOf("__svelte")===-1),s=r.length-o.length;s&&(e.style.animation=o.join(", "),cs-=s,cs||xp())}function xp(){cu(()=>{cs||(hs.forEach(e=>{const{stylesheet:n}=e;let r=n.cssRules.length;for(;r--;)n.deleteRule(r);e.rules={}}),hs.clear())})}let Vo;function Uo(e){Vo=e}function $c(){if(!Vo)throw new Error("Function called outside component initialization");return Vo}function Ss(e){$c().$$.on_mount.push(e)}function kp(e){$c().$$.after_update.push(e)}const Do=[],xn=[],Ja=[],Rl=[],Pp=Promise.resolve();let Zl=!1;function Mp(){Zl||(Zl=!0,Pp.then(Hc))}function Ke(e){Ja.push(e)}function Qa(e){Rl.push(e)}const Sl=new Set;let qa=0;function Hc(){const e=Vo;do{for(;qa<Do.length;){const n=Do[qa];qa++,Uo(n),Lp(n.$$)}for(Uo(null),Do.length=0,qa=0;xn.length;)xn.pop()();for(let n=0;n<Ja.length;n+=1){const r=Ja[n];Sl.has(r)||(Sl.add(r),r())}Ja.length=0}while(Do.length);for(;Rl.length;)Rl.pop()();Zl=!1,Sl.clear(),Uo(e)}function Lp(e){if(e.fragment!==null){e.update(),Re(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(Ke)}}let Oo;function Tp(){return Oo||(Oo=Promise.resolve(),Oo.then(()=>{Oo=null})),Oo}function El(e,n,r){e.dispatchEvent(vp(`${n?"intro":"outro"}${r}`))}const ts=new Set;let li;function sn(){li={r:0,c:[],p:li}}function ln(){li.r||Re(li.c),li=li.p}function yt(e,n){e&&e.i&&(ts.delete(e),e.i(n))}function Ct(e,n,r,o){if(e&&e.o){if(ts.has(e))return;ts.add(e),li.c.push(()=>{ts.delete(e),o&&(r&&e.d(1),o())}),e.o(n)}else o&&o()}const Cp={duration:0};function kn(e,n,r,o){let s=n(e,r),h=o?0:1,l=null,c=null,p=null;function d(){p&&wp(e,p)}function b(g,P){const k=g.b-h;return P*=Math.abs(k),{a:h,b:g.b,d:k,duration:P,start:g.start,end:g.start+P,group:g.group}}function y(g){const{delay:P=0,duration:k=300,easing:v=Ic,tick:C=Bt,css:z}=s||Cp,E={start:cp()+P,b:g};g||(E.group=li,li.r+=1),l||c?c=E:(z&&(d(),p=Ju(e,h,g,k,P,v,z)),g&&C(0,1),l=b(E,k),Ke(()=>El(e,g,"start")),fp(S=>{if(c&&S>c.start&&(l=b(c,k),c=null,El(e,l.b,"start"),z&&(d(),p=Ju(e,h,l.b,l.duration,0,v,s.css))),l){if(S>=l.end)C(h=l.b,1-h),El(e,l.b,"end"),c||(l.b?d():--l.group.r||Re(l.group.c)),l=null;else if(S>=l.start){const F=S-l.start;h=l.a+l.d*v(F/l.duration),C(h,1-h)}}return!!(l||c)}))}return{run(g){hu(s)?Tp().then(()=>{s=s(),y(g)}):y(g)},end(){d(),l=c=null}}}const Sp=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ji(e,n,r){const o=e.$$.props[n];o!==void 0&&(e.$$.bound[o]=r,r(e.$$.ctx[o]))}function Pe(e){e&&e.c()}function ve(e,n,r,o){const{fragment:s,on_mount:h,on_destroy:l,after_update:c}=e.$$;s&&s.m(n,r),o||Ke(()=>{const p=h.map(zc).filter(hu);l?l.push(...p):Re(p),e.$$.on_mount=[]}),c.forEach(Ke)}function be(e,n){const r=e.$$;r.fragment!==null&&(Re(r.on_destroy),r.fragment&&r.fragment.d(n),r.on_destroy=r.fragment=null,r.ctx=[])}function Ep(e,n){e.$$.dirty[0]===-1&&(Do.push(e),Mp(),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function un(e,n,r,o,s,h,l,c=[-1]){const p=Vo;Uo(e);const d=e.$$={fragment:null,ctx:null,props:h,update:Bt,not_equal:s,bound:Ku(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(p?p.$$.context:[])),callbacks:Ku(),dirty:c,skip_bound:!1,root:n.target||p.$$.root};l&&l(d.root);let b=!1;if(d.ctx=r?r(e,n.props||{},(y,g,...P)=>{const k=P.length?P[0]:g;return d.ctx&&s(d.ctx[y],d.ctx[y]=k)&&(!d.skip_bound&&d.bound[y]&&d.bound[y](k),b&&Ep(e,y)),g}):[],d.update(),b=!0,Re(d.before_update),d.fragment=o?o(d.ctx):!1,n.target){if(n.hydrate){const y=mp(n.target);d.fragment&&d.fragment.l(y),y.forEach(K)}else d.fragment&&d.fragment.c();n.intro&&yt(e.$$.fragment),ve(e,n.target,n.anchor,n.customElement),Hc()}Uo(p)}class hn{$destroy(){be(this,1),this.$destroy=Bt}$on(n,r){const o=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return o.push(r),()=>{const s=o.indexOf(r);s!==-1&&o.splice(s,1)}}$set(n){this.$$set&&!hp(n)&&(this.$$.skip_bound=!0,this.$$set(n),this.$$.skip_bound=!1)}}function es(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Ip(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function Gc(e){let n,r,o;e.length!==2?(n=es,r=(c,p)=>es(e(c),p),o=(c,p)=>e(c)-p):(n=e===es||e===Ip?e:zp,r=e,o=e);function s(c,p,d=0,b=c.length){if(d<b){if(n(p,p)!==0)return b;do{const y=d+b>>>1;r(c[y],p)<0?d=y+1:b=y}while(d<b)}return d}function h(c,p,d=0,b=c.length){if(d<b){if(n(p,p)!==0)return b;do{const y=d+b>>>1;r(c[y],p)<=0?d=y+1:b=y}while(d<b)}return d}function l(c,p,d=0,b=c.length){const y=s(c,p,d,b-1);return y>d&&o(c[y-1],p)>-o(c[y],p)?y-1:y}return{left:s,center:l,right:h}}function zp(){return 0}function Ap(e){return e===null?NaN:+e}const Op=Gc(es),Np=Op.right;Gc(Ap).center;const Bp=Np;function Rp(e,n){let r,o;if(n===void 0)for(const s of e)s!=null&&(r===void 0?s>=s&&(r=o=s):(r>s&&(r=s),o<s&&(o=s)));else{let s=-1;for(let h of e)(h=n(h,++s,e))!=null&&(r===void 0?h>=h&&(r=o=h):(r>h&&(r=h),o<h&&(o=h)))}return[r,o]}class Gr{constructor(){this._partials=new Float64Array(32),this._n=0}add(n){const r=this._partials;let o=0;for(let s=0;s<this._n&&s<32;s++){const h=r[s],l=n+h,c=Math.abs(n)<Math.abs(h)?n-(l-h):h-(l-n);c&&(r[o++]=c),n=l}return r[o]=n,this._n=o+1,this}valueOf(){const n=this._partials;let r=this._n,o,s,h,l=0;if(r>0){for(l=n[--r];r>0&&(o=l,s=n[--r],l=o+s,h=s-(l-o),!h););r>0&&(h<0&&n[r-1]<0||h>0&&n[r-1]>0)&&(s=h*2,o=l+s,s==o-l&&(l=o))}return l}}var Dl=Math.sqrt(50),Fl=Math.sqrt(10),$l=Math.sqrt(2);function Zp(e,n,r){var o,s=-1,h,l,c;if(n=+n,e=+e,r=+r,e===n&&r>0)return[e];if((o=n<e)&&(h=e,e=n,n=h),(c=Wc(e,n,r))===0||!isFinite(c))return[];if(c>0){let p=Math.round(e/c),d=Math.round(n/c);for(p*c<e&&++p,d*c>n&&--d,l=new Array(h=d-p+1);++s<h;)l[s]=(p+s)*c}else{c=-c;let p=Math.round(e*c),d=Math.round(n*c);for(p/c<e&&++p,d/c>n&&--d,l=new Array(h=d-p+1);++s<h;)l[s]=(p+s)/c}return o&&l.reverse(),l}function Wc(e,n,r){var o=(n-e)/Math.max(0,r),s=Math.floor(Math.log(o)/Math.LN10),h=o/Math.pow(10,s);return s>=0?(h>=Dl?10:h>=Fl?5:h>=$l?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(h>=Dl?10:h>=Fl?5:h>=$l?2:1)}function Dp(e,n,r){var o=Math.abs(n-e)/Math.max(0,r),s=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),h=o/s;return h>=Dl?s*=10:h>=Fl?s*=5:h>=$l&&(s*=2),n<e?-s:s}var Fp={value:()=>{}};function qc(){for(var e=0,n=arguments.length,r={},o;e<n;++e){if(!(o=arguments[e]+"")||o in r||/[\s.]/.test(o))throw new Error("illegal type: "+o);r[o]=[]}return new ns(r)}function ns(e){this._=e}function $p(e,n){return e.trim().split(/^|\s+/).map(function(r){var o="",s=r.indexOf(".");if(s>=0&&(o=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:o}})}ns.prototype=qc.prototype={constructor:ns,on:function(e,n){var r=this._,o=$p(e+"",r),s,h=-1,l=o.length;if(arguments.length<2){for(;++h<l;)if((s=(e=o[h]).type)&&(s=Hp(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++h<l;)if(s=(e=o[h]).type)r[s]=Qu(r[s],e.name,n);else if(n==null)for(s in r)r[s]=Qu(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new ns(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),o=0,s,h;o<s;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(h=this._[e],o=0,s=h.length;o<s;++o)h[o].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,h=o.length;s<h;++s)o[s].value.apply(n,r)}};function Hp(e,n){for(var r=0,o=e.length,s;r<o;++r)if((s=e[r]).name===n)return s.value}function Qu(e,n,r){for(var o=0,s=e.length;o<s;++o)if(e[o].name===n){e[o]=Fp,e=e.slice(0,o).concat(e.slice(o+1));break}return r!=null&&e.push({name:n,value:r}),e}var Hl="http://www.w3.org/1999/xhtml";const th={svg:"http://www.w3.org/2000/svg",xhtml:Hl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Es(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),th.hasOwnProperty(n)?{space:th[n],local:e}:e}function Gp(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Hl&&n.documentElement.namespaceURI===Hl?n.createElement(e):n.createElementNS(r,e)}}function Wp(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Uc(e){var n=Es(e);return(n.local?Wp:Gp)(n)}function qp(){}function fu(e){return e==null?qp:function(){return this.querySelector(e)}}function Up(e){typeof e!="function"&&(e=fu(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var h=n[s],l=h.length,c=o[s]=new Array(l),p,d,b=0;b<l;++b)(p=h[b])&&(d=e.call(p,p.__data__,b,h))&&("__data__"in p&&(d.__data__=p.__data__),c[b]=d);return new pn(o,this._parents)}function Vp(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Yp(){return[]}function Vc(e){return e==null?Yp:function(){return this.querySelectorAll(e)}}function Xp(e){return function(){return Vp(e.apply(this,arguments))}}function jp(e){typeof e=="function"?e=Xp(e):e=Vc(e);for(var n=this._groups,r=n.length,o=[],s=[],h=0;h<r;++h)for(var l=n[h],c=l.length,p,d=0;d<c;++d)(p=l[d])&&(o.push(e.call(p,p.__data__,d,l)),s.push(p));return new pn(o,s)}function Yc(e){return function(){return this.matches(e)}}function Xc(e){return function(n){return n.matches(e)}}var Kp=Array.prototype.find;function Jp(e){return function(){return Kp.call(this.children,e)}}function Qp(){return this.firstElementChild}function tm(e){return this.select(e==null?Qp:Jp(typeof e=="function"?e:Xc(e)))}var em=Array.prototype.filter;function nm(){return Array.from(this.children)}function im(e){return function(){return em.call(this.children,e)}}function rm(e){return this.selectAll(e==null?nm:im(typeof e=="function"?e:Xc(e)))}function om(e){typeof e!="function"&&(e=Yc(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var h=n[s],l=h.length,c=o[s]=[],p,d=0;d<l;++d)(p=h[d])&&e.call(p,p.__data__,d,h)&&c.push(p);return new pn(o,this._parents)}function jc(e){return new Array(e.length)}function am(){return new pn(this._enter||this._groups.map(jc),this._parents)}function fs(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}fs.prototype={constructor:fs,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function sm(e){return function(){return e}}function lm(e,n,r,o,s,h){for(var l=0,c,p=n.length,d=h.length;l<d;++l)(c=n[l])?(c.__data__=h[l],o[l]=c):r[l]=new fs(e,h[l]);for(;l<p;++l)(c=n[l])&&(s[l]=c)}function um(e,n,r,o,s,h,l){var c,p,d=new Map,b=n.length,y=h.length,g=new Array(b),P;for(c=0;c<b;++c)(p=n[c])&&(g[c]=P=l.call(p,p.__data__,c,n)+"",d.has(P)?s[c]=p:d.set(P,p));for(c=0;c<y;++c)P=l.call(e,h[c],c,h)+"",(p=d.get(P))?(o[c]=p,p.__data__=h[c],d.delete(P)):r[c]=new fs(e,h[c]);for(c=0;c<b;++c)(p=n[c])&&d.get(g[c])===p&&(s[c]=p)}function hm(e){return e.__data__}function cm(e,n){if(!arguments.length)return Array.from(this,hm);var r=n?um:lm,o=this._parents,s=this._groups;typeof e!="function"&&(e=sm(e));for(var h=s.length,l=new Array(h),c=new Array(h),p=new Array(h),d=0;d<h;++d){var b=o[d],y=s[d],g=y.length,P=fm(e.call(b,b&&b.__data__,d,o)),k=P.length,v=c[d]=new Array(k),C=l[d]=new Array(k),z=p[d]=new Array(g);r(b,y,v,C,z,P,n);for(var E=0,S=0,F,O;E<k;++E)if(F=v[E]){for(E>=S&&(S=E+1);!(O=C[S])&&++S<k;);F._next=O||null}}return l=new pn(l,o),l._enter=c,l._exit=p,l}function fm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dm(){return new pn(this._exit||this._groups.map(jc),this._parents)}function pm(e,n,r){var o=this.enter(),s=this,h=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?h.remove():r(h),o&&s?o.merge(s).order():s}function mm(e){for(var n=e.selection?e.selection():e,r=this._groups,o=n._groups,s=r.length,h=o.length,l=Math.min(s,h),c=new Array(s),p=0;p<l;++p)for(var d=r[p],b=o[p],y=d.length,g=c[p]=new Array(y),P,k=0;k<y;++k)(P=d[k]||b[k])&&(g[k]=P);for(;p<s;++p)c[p]=r[p];return new pn(c,this._parents)}function _m(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var o=e[n],s=o.length-1,h=o[s],l;--s>=0;)(l=o[s])&&(h&&l.compareDocumentPosition(h)^4&&h.parentNode.insertBefore(l,h),h=l);return this}function gm(e){e||(e=vm);function n(y,g){return y&&g?e(y.__data__,g.__data__):!y-!g}for(var r=this._groups,o=r.length,s=new Array(o),h=0;h<o;++h){for(var l=r[h],c=l.length,p=s[h]=new Array(c),d,b=0;b<c;++b)(d=l[b])&&(p[b]=d);p.sort(n)}return new pn(s,this._parents).order()}function vm(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function bm(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ym(){return Array.from(this)}function wm(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,h=o.length;s<h;++s){var l=o[s];if(l)return l}return null}function xm(){let e=0;for(const n of this)++e;return e}function km(){return!this.node()}function Pm(e){for(var n=this._groups,r=0,o=n.length;r<o;++r)for(var s=n[r],h=0,l=s.length,c;h<l;++h)(c=s[h])&&e.call(c,c.__data__,h,s);return this}function Mm(e){return function(){this.removeAttribute(e)}}function Lm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Tm(e,n){return function(){this.setAttribute(e,n)}}function Cm(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function Sm(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Em(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Im(e,n){var r=Es(e);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((n==null?r.local?Lm:Mm:typeof n=="function"?r.local?Em:Sm:r.local?Cm:Tm)(r,n))}function Kc(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function zm(e){return function(){this.style.removeProperty(e)}}function Am(e,n,r){return function(){this.style.setProperty(e,n,r)}}function Om(e,n,r){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,r)}}function Nm(e,n,r){return arguments.length>1?this.each((n==null?zm:typeof n=="function"?Om:Am)(e,n,r==null?"":r)):Wr(this.node(),e)}function Wr(e,n){return e.style.getPropertyValue(n)||Kc(e).getComputedStyle(e,null).getPropertyValue(n)}function Bm(e){return function(){delete this[e]}}function Rm(e,n){return function(){this[e]=n}}function Zm(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Dm(e,n){return arguments.length>1?this.each((n==null?Bm:typeof n=="function"?Zm:Rm)(e,n)):this.node()[e]}function Jc(e){return e.trim().split(/^|\s+/)}function du(e){return e.classList||new Qc(e)}function Qc(e){this._node=e,this._names=Jc(e.getAttribute("class")||"")}Qc.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function tf(e,n){for(var r=du(e),o=-1,s=n.length;++o<s;)r.add(n[o])}function ef(e,n){for(var r=du(e),o=-1,s=n.length;++o<s;)r.remove(n[o])}function Fm(e){return function(){tf(this,e)}}function $m(e){return function(){ef(this,e)}}function Hm(e,n){return function(){(n.apply(this,arguments)?tf:ef)(this,e)}}function Gm(e,n){var r=Jc(e+"");if(arguments.length<2){for(var o=du(this.node()),s=-1,h=r.length;++s<h;)if(!o.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?Hm:n?Fm:$m)(r,n))}function Wm(){this.textContent=""}function qm(e){return function(){this.textContent=e}}function Um(e){return function(){var n=e.apply(this,arguments);this.textContent=n==null?"":n}}function Vm(e){return arguments.length?this.each(e==null?Wm:(typeof e=="function"?Um:qm)(e)):this.node().textContent}function Ym(){this.innerHTML=""}function Xm(e){return function(){this.innerHTML=e}}function jm(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n==null?"":n}}function Km(e){return arguments.length?this.each(e==null?Ym:(typeof e=="function"?jm:Xm)(e)):this.node().innerHTML}function Jm(){this.nextSibling&&this.parentNode.appendChild(this)}function Qm(){return this.each(Jm)}function t_(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function e_(){return this.each(t_)}function n_(e){var n=typeof e=="function"?e:Uc(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function i_(){return null}function r_(e,n){var r=typeof e=="function"?e:Uc(e),o=n==null?i_:typeof n=="function"?n:fu(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})}function o_(){var e=this.parentNode;e&&e.removeChild(this)}function a_(){return this.each(o_)}function s_(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function l_(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function u_(e){return this.select(e?l_:s_)}function h_(e){return arguments.length?this.property("__data__",e):this.node().__data__}function c_(e){return function(n){e.call(this,n,this.__data__)}}function f_(e){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");return o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),{type:n,name:r}})}function d_(e){return function(){var n=this.__on;if(!!n){for(var r=0,o=-1,s=n.length,h;r<s;++r)h=n[r],(!e.type||h.type===e.type)&&h.name===e.name?this.removeEventListener(h.type,h.listener,h.options):n[++o]=h;++o?n.length=o:delete this.__on}}}function p_(e,n,r){return function(){var o=this.__on,s,h=c_(n);if(o){for(var l=0,c=o.length;l<c;++l)if((s=o[l]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=h,s.options=r),s.value=n;return}}this.addEventListener(e.type,h,r),s={type:e.type,name:e.name,value:n,listener:h,options:r},o?o.push(s):this.__on=[s]}}function m_(e,n,r){var o=f_(e+""),s,h=o.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var p=0,d=c.length,b;p<d;++p)for(s=0,b=c[p];s<h;++s)if((l=o[s]).type===b.type&&l.name===b.name)return b.value}return}for(c=n?p_:d_,s=0;s<h;++s)this.each(c(o[s],n,r));return this}function nf(e,n,r){var o=Kc(e),s=o.CustomEvent;typeof s=="function"?s=new s(n,r):(s=o.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),e.dispatchEvent(s)}function __(e,n){return function(){return nf(this,e,n)}}function g_(e,n){return function(){return nf(this,e,n.apply(this,arguments))}}function v_(e,n){return this.each((typeof n=="function"?g_:__)(e,n))}function*b_(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,h=o.length,l;s<h;++s)(l=o[s])&&(yield l)}var rf=[null];function pn(e,n){this._groups=e,this._parents=n}function Qo(){return new pn([[document.documentElement]],rf)}function y_(){return this}pn.prototype=Qo.prototype={constructor:pn,select:Up,selectAll:jp,selectChild:tm,selectChildren:rm,filter:om,data:cm,enter:am,exit:dm,join:pm,merge:mm,selection:y_,order:_m,sort:gm,call:bm,nodes:ym,node:wm,size:xm,empty:km,each:Pm,attr:Im,style:Nm,property:Dm,classed:Gm,text:Vm,html:Km,raise:Qm,lower:e_,append:n_,insert:r_,remove:a_,clone:u_,datum:h_,on:m_,dispatch:v_,[Symbol.iterator]:b_};function w_(e){return typeof e=="string"?new pn([[document.querySelector(e)]],[document.documentElement]):new pn([[e]],rf)}function pu(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function of(e,n){var r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r}function ta(){}var Yo=.7,ds=1/Yo,Hr="\\s*([+-]?\\d+)\\s*",Xo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Vn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",x_=/^#([0-9a-f]{3,8})$/,k_=new RegExp(`^rgb\\(${Hr},${Hr},${Hr}\\)$`),P_=new RegExp(`^rgb\\(${Vn},${Vn},${Vn}\\)$`),M_=new RegExp(`^rgba\\(${Hr},${Hr},${Hr},${Xo}\\)$`),L_=new RegExp(`^rgba\\(${Vn},${Vn},${Vn},${Xo}\\)$`),T_=new RegExp(`^hsl\\(${Xo},${Vn},${Vn}\\)$`),C_=new RegExp(`^hsla\\(${Xo},${Vn},${Vn},${Xo}\\)$`),eh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pu(ta,er,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nh,formatHex:nh,formatHex8:S_,formatHsl:E_,formatRgb:ih,toString:ih});function nh(){return this.rgb().formatHex()}function S_(){return this.rgb().formatHex8()}function E_(){return af(this).formatHsl()}function ih(){return this.rgb().formatRgb()}function er(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=x_.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?rh(n):r===3?new an(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Ua(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Ua(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=k_.exec(e))?new an(n[1],n[2],n[3],1):(n=P_.exec(e))?new an(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=M_.exec(e))?Ua(n[1],n[2],n[3],n[4]):(n=L_.exec(e))?Ua(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=T_.exec(e))?sh(n[1],n[2]/100,n[3]/100,1):(n=C_.exec(e))?sh(n[1],n[2]/100,n[3]/100,n[4]):eh.hasOwnProperty(e)?rh(eh[e]):e==="transparent"?new an(NaN,NaN,NaN,0):null}function rh(e){return new an(e>>16&255,e>>8&255,e&255,1)}function Ua(e,n,r,o){return o<=0&&(e=n=r=NaN),new an(e,n,r,o)}function I_(e){return e instanceof ta||(e=er(e)),e?(e=e.rgb(),new an(e.r,e.g,e.b,e.opacity)):new an}function Gl(e,n,r,o){return arguments.length===1?I_(e):new an(e,n,r,o==null?1:o)}function an(e,n,r,o){this.r=+e,this.g=+n,this.b=+r,this.opacity=+o}pu(an,Gl,of(ta,{brighter(e){return e=e==null?ds:Math.pow(ds,e),new an(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Yo:Math.pow(Yo,e),new an(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new an(tr(this.r),tr(this.g),tr(this.b),ps(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oh,formatHex:oh,formatHex8:z_,formatRgb:ah,toString:ah}));function oh(){return`#${Qi(this.r)}${Qi(this.g)}${Qi(this.b)}`}function z_(){return`#${Qi(this.r)}${Qi(this.g)}${Qi(this.b)}${Qi((isNaN(this.opacity)?1:this.opacity)*255)}`}function ah(){const e=ps(this.opacity);return`${e===1?"rgb(":"rgba("}${tr(this.r)}, ${tr(this.g)}, ${tr(this.b)}${e===1?")":`, ${e})`}`}function ps(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function tr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qi(e){return e=tr(e),(e<16?"0":"")+e.toString(16)}function sh(e,n,r,o){return o<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new Bn(e,n,r,o)}function af(e){if(e instanceof Bn)return new Bn(e.h,e.s,e.l,e.opacity);if(e instanceof ta||(e=er(e)),!e)return new Bn;if(e instanceof Bn)return e;e=e.rgb();var n=e.r/255,r=e.g/255,o=e.b/255,s=Math.min(n,r,o),h=Math.max(n,r,o),l=NaN,c=h-s,p=(h+s)/2;return c?(n===h?l=(r-o)/c+(r<o)*6:r===h?l=(o-n)/c+2:l=(n-r)/c+4,c/=p<.5?h+s:2-h-s,l*=60):c=p>0&&p<1?0:l,new Bn(l,c,p,e.opacity)}function A_(e,n,r,o){return arguments.length===1?af(e):new Bn(e,n,r,o==null?1:o)}function Bn(e,n,r,o){this.h=+e,this.s=+n,this.l=+r,this.opacity=+o}pu(Bn,A_,of(ta,{brighter(e){return e=e==null?ds:Math.pow(ds,e),new Bn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Yo:Math.pow(Yo,e),new Bn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,s=2*r-o;return new an(Il(e>=240?e-240:e+120,s,o),Il(e,s,o),Il(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new Bn(lh(this.h),Va(this.s),Va(this.l),ps(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ps(this.opacity);return`${e===1?"hsl(":"hsla("}${lh(this.h)}, ${Va(this.s)*100}%, ${Va(this.l)*100}%${e===1?")":`, ${e})`}`}}));function lh(e){return e=(e||0)%360,e<0?e+360:e}function Va(e){return Math.max(0,Math.min(1,e||0))}function Il(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const mu=e=>()=>e;function O_(e,n){return function(r){return e+r*n}}function N_(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(o){return Math.pow(e+o*n,r)}}function B_(e){return(e=+e)==1?sf:function(n,r){return r-n?N_(n,r,e):mu(isNaN(n)?r:n)}}function sf(e,n){var r=n-e;return r?O_(e,r):mu(isNaN(e)?n:e)}const ms=function e(n){var r=B_(n);function o(s,h){var l=r((s=Gl(s)).r,(h=Gl(h)).r),c=r(s.g,h.g),p=r(s.b,h.b),d=sf(s.opacity,h.opacity);return function(b){return s.r=l(b),s.g=c(b),s.b=p(b),s.opacity=d(b),s+""}}return o.gamma=e,o}(1);function R_(e,n){n||(n=[]);var r=e?Math.min(n.length,e.length):0,o=n.slice(),s;return function(h){for(s=0;s<r;++s)o[s]=e[s]*(1-h)+n[s]*h;return o}}function Z_(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function D_(e,n){var r=n?n.length:0,o=e?Math.min(r,e.length):0,s=new Array(o),h=new Array(r),l;for(l=0;l<o;++l)s[l]=_u(e[l],n[l]);for(;l<r;++l)h[l]=n[l];return function(c){for(l=0;l<o;++l)h[l]=s[l](c);return h}}function F_(e,n){var r=new Date;return e=+e,n=+n,function(o){return r.setTime(e*(1-o)+n*o),r}}function Nn(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}function $_(e,n){var r={},o={},s;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(s in n)s in e?r[s]=_u(e[s],n[s]):o[s]=n[s];return function(h){for(s in r)o[s]=r[s](h);return o}}var Wl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,zl=new RegExp(Wl.source,"g");function H_(e){return function(){return e}}function G_(e){return function(n){return e(n)+""}}function lf(e,n){var r=Wl.lastIndex=zl.lastIndex=0,o,s,h,l=-1,c=[],p=[];for(e=e+"",n=n+"";(o=Wl.exec(e))&&(s=zl.exec(n));)(h=s.index)>r&&(h=n.slice(r,h),c[l]?c[l]+=h:c[++l]=h),(o=o[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,p.push({i:l,x:Nn(o,s)})),r=zl.lastIndex;return r<n.length&&(h=n.slice(r),c[l]?c[l]+=h:c[++l]=h),c.length<2?p[0]?G_(p[0].x):H_(n):(n=p.length,function(d){for(var b=0,y;b<n;++b)c[(y=p[b]).i]=y.x(d);return c.join("")})}function _u(e,n){var r=typeof n,o;return n==null||r==="boolean"?mu(n):(r==="number"?Nn:r==="string"?(o=er(n))?(n=o,ms):lf:n instanceof er?ms:n instanceof Date?F_:Z_(n)?R_:Array.isArray(n)?D_:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?$_:Nn)(e,n)}function W_(e,n){return e=+e,n=+n,function(r){return Math.round(e*(1-r)+n*r)}}var uh=180/Math.PI,ql={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uf(e,n,r,o,s,h){var l,c,p;return(l=Math.sqrt(e*e+n*n))&&(e/=l,n/=l),(p=e*r+n*o)&&(r-=e*p,o-=n*p),(c=Math.sqrt(r*r+o*o))&&(r/=c,o/=c,p/=c),e*o<n*r&&(e=-e,n=-n,p=-p,l=-l),{translateX:s,translateY:h,rotate:Math.atan2(n,e)*uh,skewX:Math.atan(p)*uh,scaleX:l,scaleY:c}}var Ya;function q_(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?ql:uf(n.a,n.b,n.c,n.d,n.e,n.f)}function U_(e){return e==null||(Ya||(Ya=document.createElementNS("http://www.w3.org/2000/svg","g")),Ya.setAttribute("transform",e),!(e=Ya.transform.baseVal.consolidate()))?ql:(e=e.matrix,uf(e.a,e.b,e.c,e.d,e.e,e.f))}function hf(e,n,r,o){function s(d){return d.length?d.pop()+" ":""}function h(d,b,y,g,P,k){if(d!==y||b!==g){var v=P.push("translate(",null,n,null,r);k.push({i:v-4,x:Nn(d,y)},{i:v-2,x:Nn(b,g)})}else(y||g)&&P.push("translate("+y+n+g+r)}function l(d,b,y,g){d!==b?(d-b>180?b+=360:b-d>180&&(d+=360),g.push({i:y.push(s(y)+"rotate(",null,o)-2,x:Nn(d,b)})):b&&y.push(s(y)+"rotate("+b+o)}function c(d,b,y,g){d!==b?g.push({i:y.push(s(y)+"skewX(",null,o)-2,x:Nn(d,b)}):b&&y.push(s(y)+"skewX("+b+o)}function p(d,b,y,g,P,k){if(d!==y||b!==g){var v=P.push(s(P)+"scale(",null,",",null,")");k.push({i:v-4,x:Nn(d,y)},{i:v-2,x:Nn(b,g)})}else(y!==1||g!==1)&&P.push(s(P)+"scale("+y+","+g+")")}return function(d,b){var y=[],g=[];return d=e(d),b=e(b),h(d.translateX,d.translateY,b.translateX,b.translateY,y,g),l(d.rotate,b.rotate,y,g),c(d.skewX,b.skewX,y,g),p(d.scaleX,d.scaleY,b.scaleX,b.scaleY,y,g),d=b=null,function(P){for(var k=-1,v=g.length,C;++k<v;)y[(C=g[k]).i]=C.x(P);return y.join("")}}}var V_=hf(q_,"px, ","px)","deg)"),Y_=hf(U_,", ",")",")"),qr=0,Fo=0,No=0,cf=1e3,_s,$o,gs=0,nr=0,Is=0,jo=typeof performance=="object"&&performance.now?performance:Date,ff=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function gu(){return nr||(ff(X_),nr=jo.now()+Is)}function X_(){nr=0}function vs(){this._call=this._time=this._next=null}vs.prototype=df.prototype={constructor:vs,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?gu():+r)+(n==null?0:+n),!this._next&&$o!==this&&($o?$o._next=this:_s=this,$o=this),this._call=e,this._time=r,Ul()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ul())}};function df(e,n,r){var o=new vs;return o.restart(e,n,r),o}function j_(){gu(),++qr;for(var e=_s,n;e;)(n=nr-e._time)>=0&&e._call.call(void 0,n),e=e._next;--qr}function hh(){nr=(gs=jo.now())+Is,qr=Fo=0;try{j_()}finally{qr=0,J_(),nr=0}}function K_(){var e=jo.now(),n=e-gs;n>cf&&(Is-=n,gs=e)}function J_(){for(var e,n=_s,r,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:_s=r);$o=e,Ul(o)}function Ul(e){if(!qr){Fo&&(Fo=clearTimeout(Fo));var n=e-nr;n>24?(e<1/0&&(Fo=setTimeout(hh,e-jo.now()-Is)),No&&(No=clearInterval(No))):(No||(gs=jo.now(),No=setInterval(K_,cf)),qr=1,ff(hh))}}function ch(e,n,r){var o=new vs;return n=n==null?0:+n,o.restart(s=>{o.stop(),e(s+n)},n,r),o}var Q_=qc("start","end","cancel","interrupt"),tg=[],pf=0,fh=1,Vl=2,is=3,dh=4,Yl=5,rs=6;function zs(e,n,r,o,s,h){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;eg(e,r,{name:n,index:o,group:s,on:Q_,tween:tg,time:h.time,delay:h.delay,duration:h.duration,ease:h.ease,timer:null,state:pf})}function vu(e,n){var r=Dn(e,n);if(r.state>pf)throw new Error("too late; already scheduled");return r}function Xn(e,n){var r=Dn(e,n);if(r.state>is)throw new Error("too late; already running");return r}function Dn(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function eg(e,n,r){var o=e.__transition,s;o[n]=r,r.timer=df(h,0,r.time);function h(d){r.state=fh,r.timer.restart(l,r.delay,r.time),r.delay<=d&&l(d-r.delay)}function l(d){var b,y,g,P;if(r.state!==fh)return p();for(b in o)if(P=o[b],P.name===r.name){if(P.state===is)return ch(l);P.state===dh?(P.state=rs,P.timer.stop(),P.on.call("interrupt",e,e.__data__,P.index,P.group),delete o[b]):+b<n&&(P.state=rs,P.timer.stop(),P.on.call("cancel",e,e.__data__,P.index,P.group),delete o[b])}if(ch(function(){r.state===is&&(r.state=dh,r.timer.restart(c,r.delay,r.time),c(d))}),r.state=Vl,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Vl){for(r.state=is,s=new Array(g=r.tween.length),b=0,y=-1;b<g;++b)(P=r.tween[b].value.call(e,e.__data__,r.index,r.group))&&(s[++y]=P);s.length=y+1}}function c(d){for(var b=d<r.duration?r.ease.call(null,d/r.duration):(r.timer.restart(p),r.state=Yl,1),y=-1,g=s.length;++y<g;)s[y].call(e,b);r.state===Yl&&(r.on.call("end",e,e.__data__,r.index,r.group),p())}function p(){r.state=rs,r.timer.stop(),delete o[n];for(var d in o)return;delete e.__transition}}function ng(e,n){var r=e.__transition,o,s,h=!0,l;if(!!r){n=n==null?null:n+"";for(l in r){if((o=r[l]).name!==n){h=!1;continue}s=o.state>Vl&&o.state<Yl,o.state=rs,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete r[l]}h&&delete e.__transition}}function ig(e){return this.each(function(){ng(this,e)})}function rg(e,n){var r,o;return function(){var s=Xn(this,e),h=s.tween;if(h!==r){o=r=h;for(var l=0,c=o.length;l<c;++l)if(o[l].name===n){o=o.slice(),o.splice(l,1);break}}s.tween=o}}function og(e,n,r){var o,s;if(typeof r!="function")throw new Error;return function(){var h=Xn(this,e),l=h.tween;if(l!==o){s=(o=l).slice();for(var c={name:n,value:r},p=0,d=s.length;p<d;++p)if(s[p].name===n){s[p]=c;break}p===d&&s.push(c)}h.tween=s}}function ag(e,n){var r=this._id;if(e+="",arguments.length<2){for(var o=Dn(this.node(),r).tween,s=0,h=o.length,l;s<h;++s)if((l=o[s]).name===e)return l.value;return null}return this.each((n==null?rg:og)(r,e,n))}function bu(e,n,r){var o=e._id;return e.each(function(){var s=Xn(this,o);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return Dn(s,o).value[n]}}function mf(e,n){var r;return(typeof n=="number"?Nn:n instanceof er?ms:(r=er(n))?(n=r,ms):lf)(e,n)}function sg(e){return function(){this.removeAttribute(e)}}function lg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ug(e,n,r){var o,s=r+"",h;return function(){var l=this.getAttribute(e);return l===s?null:l===o?h:h=n(o=l,r)}}function hg(e,n,r){var o,s=r+"",h;return function(){var l=this.getAttributeNS(e.space,e.local);return l===s?null:l===o?h:h=n(o=l,r)}}function cg(e,n,r){var o,s,h;return function(){var l,c=r(this),p;return c==null?void this.removeAttribute(e):(l=this.getAttribute(e),p=c+"",l===p?null:l===o&&p===s?h:(s=p,h=n(o=l,c)))}}function fg(e,n,r){var o,s,h;return function(){var l,c=r(this),p;return c==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),p=c+"",l===p?null:l===o&&p===s?h:(s=p,h=n(o=l,c)))}}function dg(e,n){var r=Es(e),o=r==="transform"?Y_:mf;return this.attrTween(e,typeof n=="function"?(r.local?fg:cg)(r,o,bu(this,"attr."+e,n)):n==null?(r.local?lg:sg)(r):(r.local?hg:ug)(r,o,n))}function pg(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function mg(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function _g(e,n){var r,o;function s(){var h=n.apply(this,arguments);return h!==o&&(r=(o=h)&&mg(e,h)),r}return s._value=n,s}function gg(e,n){var r,o;function s(){var h=n.apply(this,arguments);return h!==o&&(r=(o=h)&&pg(e,h)),r}return s._value=n,s}function vg(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var o=Es(e);return this.tween(r,(o.local?_g:gg)(o,n))}function bg(e,n){return function(){vu(this,e).delay=+n.apply(this,arguments)}}function yg(e,n){return n=+n,function(){vu(this,e).delay=n}}function wg(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?bg:yg)(n,e)):Dn(this.node(),n).delay}function xg(e,n){return function(){Xn(this,e).duration=+n.apply(this,arguments)}}function kg(e,n){return n=+n,function(){Xn(this,e).duration=n}}function Pg(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?xg:kg)(n,e)):Dn(this.node(),n).duration}function Mg(e,n){if(typeof n!="function")throw new Error;return function(){Xn(this,e).ease=n}}function Lg(e){var n=this._id;return arguments.length?this.each(Mg(n,e)):Dn(this.node(),n).ease}function Tg(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;Xn(this,e).ease=r}}function Cg(e){if(typeof e!="function")throw new Error;return this.each(Tg(this._id,e))}function Sg(e){typeof e!="function"&&(e=Yc(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var h=n[s],l=h.length,c=o[s]=[],p,d=0;d<l;++d)(p=h[d])&&e.call(p,p.__data__,d,h)&&c.push(p);return new hi(o,this._parents,this._name,this._id)}function Eg(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,o=n.length,s=r.length,h=Math.min(o,s),l=new Array(o),c=0;c<h;++c)for(var p=n[c],d=r[c],b=p.length,y=l[c]=new Array(b),g,P=0;P<b;++P)(g=p[P]||d[P])&&(y[P]=g);for(;c<o;++c)l[c]=n[c];return new hi(l,this._parents,this._name,this._id)}function Ig(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function zg(e,n,r){var o,s,h=Ig(n)?vu:Xn;return function(){var l=h(this,e),c=l.on;c!==o&&(s=(o=c).copy()).on(n,r),l.on=s}}function Ag(e,n){var r=this._id;return arguments.length<2?Dn(this.node(),r).on.on(e):this.each(zg(r,e,n))}function Og(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function Ng(){return this.on("end.remove",Og(this._id))}function Bg(e){var n=this._name,r=this._id;typeof e!="function"&&(e=fu(e));for(var o=this._groups,s=o.length,h=new Array(s),l=0;l<s;++l)for(var c=o[l],p=c.length,d=h[l]=new Array(p),b,y,g=0;g<p;++g)(b=c[g])&&(y=e.call(b,b.__data__,g,c))&&("__data__"in b&&(y.__data__=b.__data__),d[g]=y,zs(d[g],n,r,g,d,Dn(b,r)));return new hi(h,this._parents,n,r)}function Rg(e){var n=this._name,r=this._id;typeof e!="function"&&(e=Vc(e));for(var o=this._groups,s=o.length,h=[],l=[],c=0;c<s;++c)for(var p=o[c],d=p.length,b,y=0;y<d;++y)if(b=p[y]){for(var g=e.call(b,b.__data__,y,p),P,k=Dn(b,r),v=0,C=g.length;v<C;++v)(P=g[v])&&zs(P,n,r,v,g,k);h.push(g),l.push(b)}return new hi(h,l,n,r)}var Zg=Qo.prototype.constructor;function Dg(){return new Zg(this._groups,this._parents)}function Fg(e,n){var r,o,s;return function(){var h=Wr(this,e),l=(this.style.removeProperty(e),Wr(this,e));return h===l?null:h===r&&l===o?s:s=n(r=h,o=l)}}function _f(e){return function(){this.style.removeProperty(e)}}function $g(e,n,r){var o,s=r+"",h;return function(){var l=Wr(this,e);return l===s?null:l===o?h:h=n(o=l,r)}}function Hg(e,n,r){var o,s,h;return function(){var l=Wr(this,e),c=r(this),p=c+"";return c==null&&(p=c=(this.style.removeProperty(e),Wr(this,e))),l===p?null:l===o&&p===s?h:(s=p,h=n(o=l,c))}}function Gg(e,n){var r,o,s,h="style."+n,l="end."+h,c;return function(){var p=Xn(this,e),d=p.on,b=p.value[h]==null?c||(c=_f(n)):void 0;(d!==r||s!==b)&&(o=(r=d).copy()).on(l,s=b),p.on=o}}function Wg(e,n,r){var o=(e+="")=="transform"?V_:mf;return n==null?this.styleTween(e,Fg(e,o)).on("end.style."+e,_f(e)):typeof n=="function"?this.styleTween(e,Hg(e,o,bu(this,"style."+e,n))).each(Gg(this._id,e)):this.styleTween(e,$g(e,o,n),r).on("end.style."+e,null)}function qg(e,n,r){return function(o){this.style.setProperty(e,n.call(this,o),r)}}function Ug(e,n,r){var o,s;function h(){var l=n.apply(this,arguments);return l!==s&&(o=(s=l)&&qg(e,l,r)),o}return h._value=n,h}function Vg(e,n,r){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,Ug(e,n,r==null?"":r))}function Yg(e){return function(){this.textContent=e}}function Xg(e){return function(){var n=e(this);this.textContent=n==null?"":n}}function jg(e){return this.tween("text",typeof e=="function"?Xg(bu(this,"text",e)):Yg(e==null?"":e+""))}function Kg(e){return function(n){this.textContent=e.call(this,n)}}function Jg(e){var n,r;function o(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Kg(s)),n}return o._value=e,o}function Qg(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Jg(e))}function t0(){for(var e=this._name,n=this._id,r=gf(),o=this._groups,s=o.length,h=0;h<s;++h)for(var l=o[h],c=l.length,p,d=0;d<c;++d)if(p=l[d]){var b=Dn(p,n);zs(p,e,r,d,l,{time:b.time+b.delay+b.duration,delay:0,duration:b.duration,ease:b.ease})}return new hi(o,this._parents,e,r)}function e0(){var e,n,r=this,o=r._id,s=r.size();return new Promise(function(h,l){var c={value:l},p={value:function(){--s===0&&h()}};r.each(function(){var d=Xn(this,o),b=d.on;b!==e&&(n=(e=b).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(p)),d.on=n}),s===0&&h()})}var n0=0;function hi(e,n,r,o){this._groups=e,this._parents=n,this._name=r,this._id=o}function gf(){return++n0}var si=Qo.prototype;hi.prototype={constructor:hi,select:Bg,selectAll:Rg,selectChild:si.selectChild,selectChildren:si.selectChildren,filter:Sg,merge:Eg,selection:Dg,transition:t0,call:si.call,nodes:si.nodes,node:si.node,size:si.size,empty:si.empty,each:si.each,on:Ag,attr:dg,attrTween:vg,style:Wg,styleTween:Vg,text:jg,textTween:Qg,remove:Ng,tween:ag,delay:wg,duration:Pg,ease:Lg,easeVarying:Cg,end:e0,[Symbol.iterator]:si[Symbol.iterator]};function i0(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var r0={time:null,delay:0,duration:250,ease:i0};function o0(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function a0(e){var n,r;e instanceof hi?(n=e._id,e=e._name):(n=gf(),(r=r0).time=gu(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,h=0;h<s;++h)for(var l=o[h],c=l.length,p,d=0;d<c;++d)(p=l[d])&&zs(p,e,n,d,l,r||o0(p,n));return new hi(o,this._parents,e,n)}Qo.prototype.interrupt=ig;Qo.prototype.transition=a0;function s0(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);if(!(e.status===204||e.status===205))return e.json()}function l0(e,n){return fetch(e,n).then(s0)}function u0(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function bs(e,n){if((r=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var r,o=e.slice(0,r);return[o.length>1?o[0]+o.slice(2):o,+e.slice(r+1)]}function Ur(e){return e=bs(Math.abs(e)),e?e[1]:NaN}function h0(e,n){return function(r,o){for(var s=r.length,h=[],l=0,c=e[0],p=0;s>0&&c>0&&(p+c+1>o&&(c=Math.max(1,o-p)),h.push(r.substring(s-=c,s+c)),!((p+=c+1)>o));)c=e[l=(l+1)%e.length];return h.reverse().join(n)}}function c0(e){return function(n){return n.replace(/[0-9]/g,function(r){return e[+r]})}}var f0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ys(e){if(!(n=f0.exec(e)))throw new Error("invalid format: "+e);var n;return new yu({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}ys.prototype=yu.prototype;function yu(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}yu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function d0(e){t:for(var n=e.length,r=1,o=-1,s;r<n;++r)switch(e[r]){case".":o=s=r;break;case"0":o===0&&(o=r),s=r;break;default:if(!+e[r])break t;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(s+1):e}var vf;function p0(e,n){var r=bs(e,n);if(!r)return e+"";var o=r[0],s=r[1],h=s-(vf=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,l=o.length;return h===l?o:h>l?o+new Array(h-l+1).join("0"):h>0?o.slice(0,h)+"."+o.slice(h):"0."+new Array(1-h).join("0")+bs(e,Math.max(0,n+h-1))[0]}function ph(e,n){var r=bs(e,n);if(!r)return e+"";var o=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+o:o.length>s+1?o.slice(0,s+1)+"."+o.slice(s+1):o+new Array(s-o.length+2).join("0")}const mh={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:u0,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>ph(e*100,n),r:ph,s:p0,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _h(e){return e}var gh=Array.prototype.map,vh=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function m0(e){var n=e.grouping===void 0||e.thousands===void 0?_h:h0(gh.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",h=e.numerals===void 0?_h:c0(gh.call(e.numerals,String)),l=e.percent===void 0?"%":e.percent+"",c=e.minus===void 0?"\u2212":e.minus+"",p=e.nan===void 0?"NaN":e.nan+"";function d(y){y=ys(y);var g=y.fill,P=y.align,k=y.sign,v=y.symbol,C=y.zero,z=y.width,E=y.comma,S=y.precision,F=y.trim,O=y.type;O==="n"?(E=!0,O="g"):mh[O]||(S===void 0&&(S=12),F=!0,O="g"),(C||g==="0"&&P==="=")&&(C=!0,g="0",P="=");var Z=v==="$"?r:v==="#"&&/[boxX]/.test(O)?"0"+O.toLowerCase():"",rt=v==="$"?o:/[%p]/.test(O)?l:"",Y=mh[O],Nt=/[defgprs%]/.test(O);S=S===void 0?6:/[gprs]/.test(O)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function Mt(ut){var X=Z,j=rt,lt,st,dt;if(O==="c")j=Y(ut)+j,ut="";else{ut=+ut;var ct=ut<0||1/ut<0;if(ut=isNaN(ut)?p:Y(Math.abs(ut),S),F&&(ut=d0(ut)),ct&&+ut==0&&k!=="+"&&(ct=!1),X=(ct?k==="("?k:c:k==="-"||k==="("?"":k)+X,j=(O==="s"?vh[8+vf/3]:"")+j+(ct&&k==="("?")":""),Nt){for(lt=-1,st=ut.length;++lt<st;)if(dt=ut.charCodeAt(lt),48>dt||dt>57){j=(dt===46?s+ut.slice(lt+1):ut.slice(lt))+j,ut=ut.slice(0,lt);break}}}E&&!C&&(ut=n(ut,1/0));var U=X.length+ut.length+j.length,et=U<z?new Array(z-U+1).join(g):"";switch(E&&C&&(ut=n(et+ut,et.length?z-j.length:1/0),et=""),P){case"<":ut=X+ut+j+et;break;case"=":ut=X+et+ut+j;break;case"^":ut=et.slice(0,U=et.length>>1)+X+ut+j+et.slice(U);break;default:ut=et+X+ut+j;break}return h(ut)}return Mt.toString=function(){return y+""},Mt}function b(y,g){var P=d((y=ys(y),y.type="f",y)),k=Math.max(-8,Math.min(8,Math.floor(Ur(g)/3)))*3,v=Math.pow(10,-k),C=vh[8+k/3];return function(z){return P(v*z)+C}}return{format:d,formatPrefix:b}}var Xa,bf,yf;_0({thousands:",",grouping:[3],currency:["$",""]});function _0(e){return Xa=m0(e),bf=Xa.format,yf=Xa.formatPrefix,Xa}function g0(e){return Math.max(0,-Ur(Math.abs(e)))}function v0(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ur(n)/3)))*3-Ur(Math.abs(e)))}function b0(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,Ur(n)-Ur(e))+1}var y0=Math.PI,w0=y0*2,x0=Math.abs,wu=Math.sqrt;function Zn(){}function ws(e,n){e&&yh.hasOwnProperty(e.type)&&yh[e.type](e,n)}var bh={Feature:function(e,n){ws(e.geometry,n)},FeatureCollection:function(e,n){for(var r=e.features,o=-1,s=r.length;++o<s;)ws(r[o].geometry,n)}},yh={Sphere:function(e,n){n.sphere()},Point:function(e,n){e=e.coordinates,n.point(e[0],e[1],e[2])},MultiPoint:function(e,n){for(var r=e.coordinates,o=-1,s=r.length;++o<s;)e=r[o],n.point(e[0],e[1],e[2])},LineString:function(e,n){Xl(e.coordinates,n,0)},MultiLineString:function(e,n){for(var r=e.coordinates,o=-1,s=r.length;++o<s;)Xl(r[o],n,0)},Polygon:function(e,n){wh(e.coordinates,n)},MultiPolygon:function(e,n){for(var r=e.coordinates,o=-1,s=r.length;++o<s;)wh(r[o],n)},GeometryCollection:function(e,n){for(var r=e.geometries,o=-1,s=r.length;++o<s;)ws(r[o],n)}};function Xl(e,n,r){var o=-1,s=e.length-r,h;for(n.lineStart();++o<s;)h=e[o],n.point(h[0],h[1],h[2]);n.lineEnd()}function wh(e,n){var r=-1,o=e.length;for(n.polygonStart();++r<o;)Xl(e[r],n,1);n.polygonEnd()}function Bo(e,n){e&&bh.hasOwnProperty(e.type)?bh[e.type](e,n):ws(e,n)}const k0=e=>e;var Al=new Gr,jl=new Gr,wf,xf,Kl,Jl,Si={point:Zn,lineStart:Zn,lineEnd:Zn,polygonStart:function(){Si.lineStart=P0,Si.lineEnd=L0},polygonEnd:function(){Si.lineStart=Si.lineEnd=Si.point=Zn,Al.add(x0(jl)),jl=new Gr},result:function(){var e=Al/2;return Al=new Gr,e}};function P0(){Si.point=M0}function M0(e,n){Si.point=kf,wf=Kl=e,xf=Jl=n}function kf(e,n){jl.add(Jl*e-Kl*n),Kl=e,Jl=n}function L0(){kf(wf,xf)}const xh=Si;var Vr=1/0,xs=Vr,Ko=-Vr,ks=Ko,T0={point:C0,lineStart:Zn,lineEnd:Zn,polygonStart:Zn,polygonEnd:Zn,result:function(){var e=[[Vr,xs],[Ko,ks]];return Ko=ks=-(xs=Vr=1/0),e}};function C0(e,n){e<Vr&&(Vr=e),e>Ko&&(Ko=e),n<xs&&(xs=n),n>ks&&(ks=n)}const kh=T0;var Ql=0,tu=0,Ho=0,Ps=0,Ms=0,Zr=0,eu=0,nu=0,Go=0,Pf,Mf,qn,Un,Rn={point:ir,lineStart:Ph,lineEnd:Mh,polygonStart:function(){Rn.lineStart=I0,Rn.lineEnd=z0},polygonEnd:function(){Rn.point=ir,Rn.lineStart=Ph,Rn.lineEnd=Mh},result:function(){var e=Go?[eu/Go,nu/Go]:Zr?[Ps/Zr,Ms/Zr]:Ho?[Ql/Ho,tu/Ho]:[NaN,NaN];return Ql=tu=Ho=Ps=Ms=Zr=eu=nu=Go=0,e}};function ir(e,n){Ql+=e,tu+=n,++Ho}function Ph(){Rn.point=S0}function S0(e,n){Rn.point=E0,ir(qn=e,Un=n)}function E0(e,n){var r=e-qn,o=n-Un,s=wu(r*r+o*o);Ps+=s*(qn+e)/2,Ms+=s*(Un+n)/2,Zr+=s,ir(qn=e,Un=n)}function Mh(){Rn.point=ir}function I0(){Rn.point=A0}function z0(){Lf(Pf,Mf)}function A0(e,n){Rn.point=Lf,ir(Pf=qn=e,Mf=Un=n)}function Lf(e,n){var r=e-qn,o=n-Un,s=wu(r*r+o*o);Ps+=s*(qn+e)/2,Ms+=s*(Un+n)/2,Zr+=s,s=Un*e-qn*n,eu+=s*(qn+e),nu+=s*(Un+n),Go+=s*3,ir(qn=e,Un=n)}const Lh=Rn;function Tf(e){this._context=e}Tf.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,n){switch(this._point){case 0:{this._context.moveTo(e,n),this._point=1;break}case 1:{this._context.lineTo(e,n);break}default:{this._context.moveTo(e+this._radius,n),this._context.arc(e,n,this._radius,0,w0);break}}},result:Zn};var iu=new Gr,Ol,Cf,Sf,Wo,qo,Ls={point:Zn,lineStart:function(){Ls.point=O0},lineEnd:function(){Ol&&Ef(Cf,Sf),Ls.point=Zn},polygonStart:function(){Ol=!0},polygonEnd:function(){Ol=null},result:function(){var e=+iu;return iu=new Gr,e}};function O0(e,n){Ls.point=Ef,Cf=Wo=e,Sf=qo=n}function Ef(e,n){Wo-=e,qo-=n,iu.add(wu(Wo*Wo+qo*qo)),Wo=e,qo=n}const Th=Ls;function If(){this._string=[]}If.prototype={_radius:4.5,_circle:Ch(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,n){switch(this._point){case 0:{this._string.push("M",e,",",n),this._point=1;break}case 1:{this._string.push("L",e,",",n);break}default:{this._circle==null&&(this._circle=Ch(this._radius)),this._string.push("M",e,",",n,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function Ch(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function N0(e,n){var r=4.5,o,s;function h(l){return l&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Bo(l,o(s))),s.result()}return h.area=function(l){return Bo(l,o(xh)),xh.result()},h.measure=function(l){return Bo(l,o(Th)),Th.result()},h.bounds=function(l){return Bo(l,o(kh)),kh.result()},h.centroid=function(l){return Bo(l,o(Lh)),Lh.result()},h.projection=function(l){return arguments.length?(o=l==null?(e=null,k0):(e=l).stream,h):e},h.context=function(l){return arguments.length?(s=l==null?(n=null,new If):new Tf(n=l),typeof r!="function"&&s.pointRadius(r),h):n},h.pointRadius=function(l){return arguments.length?(r=typeof l=="function"?l:(s.pointRadius(+l),+l),h):r},h.projection(e).context(n)}function B0(e){return{stream:R0(e)}}function R0(e){return function(n){var r=new ru;for(var o in e)r[o]=e[o];return r.stream=n,r}}function ru(){}ru.prototype={constructor:ru,point:function(e,n){this.stream.point(e,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Z0(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}function D0(e){return function(){return e}}function F0(e){return+e}var Sh=[0,1];function Dr(e){return e}function ou(e,n){return(n-=e=+e)?function(r){return(r-e)/n}:D0(isNaN(n)?NaN:.5)}function $0(e,n){var r;return e>n&&(r=e,e=n,n=r),function(o){return Math.max(e,Math.min(n,o))}}function H0(e,n,r){var o=e[0],s=e[1],h=n[0],l=n[1];return s<o?(o=ou(s,o),h=r(l,h)):(o=ou(o,s),h=r(h,l)),function(c){return h(o(c))}}function G0(e,n,r){var o=Math.min(e.length,n.length)-1,s=new Array(o),h=new Array(o),l=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++l<o;)s[l]=ou(e[l],e[l+1]),h[l]=r(n[l],n[l+1]);return function(c){var p=Bp(e,c,1,o)-1;return h[p](s[p](c))}}function W0(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function q0(){var e=Sh,n=Sh,r=_u,o,s,h,l=Dr,c,p,d;function b(){var g=Math.min(e.length,n.length);return l!==Dr&&(l=$0(e[0],e[g-1])),c=g>2?G0:H0,p=d=null,y}function y(g){return g==null||isNaN(g=+g)?h:(p||(p=c(e.map(o),n,r)))(o(l(g)))}return y.invert=function(g){return l(s((d||(d=c(n,e.map(o),Nn)))(g)))},y.domain=function(g){return arguments.length?(e=Array.from(g,F0),b()):e.slice()},y.range=function(g){return arguments.length?(n=Array.from(g),b()):n.slice()},y.rangeRound=function(g){return n=Array.from(g),r=W_,b()},y.clamp=function(g){return arguments.length?(l=g?!0:Dr,b()):l!==Dr},y.interpolate=function(g){return arguments.length?(r=g,b()):r},y.unknown=function(g){return arguments.length?(h=g,y):h},function(g,P){return o=g,s=P,b()}}function U0(){return q0()(Dr,Dr)}function V0(e,n,r,o){var s=Dp(e,n,r),h;switch(o=ys(o==null?",f":o),o.type){case"s":{var l=Math.max(Math.abs(e),Math.abs(n));return o.precision==null&&!isNaN(h=v0(s,l))&&(o.precision=h),yf(o,l)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(h=b0(s,Math.max(Math.abs(e),Math.abs(n))))&&(o.precision=h-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(h=g0(s))&&(o.precision=h-(o.type==="%")*2);break}}return bf(o)}function Y0(e){var n=e.domain;return e.ticks=function(r){var o=n();return Zp(o[0],o[o.length-1],r==null?10:r)},e.tickFormat=function(r,o){var s=n();return V0(s[0],s[s.length-1],r==null?10:r,o)},e.nice=function(r){r==null&&(r=10);var o=n(),s=0,h=o.length-1,l=o[s],c=o[h],p,d,b=10;for(c<l&&(d=l,l=c,c=d,d=s,s=h,h=d);b-- >0;){if(d=Wc(l,c,r),d===p)return o[s]=l,o[h]=c,n(o);if(d>0)l=Math.floor(l/d)*d,c=Math.ceil(c/d)*d;else if(d<0)l=Math.ceil(l*d)/d,c=Math.floor(c*d)/d;else break;p=d}return e},e}function os(){var e=U0();return e.copy=function(){return W0(e,os())},Z0.apply(e,arguments),Y0(e)}function Fr(e,n,r){this.k=e,this.x=n,this.y=r}Fr.prototype={constructor:Fr,scale:function(e){return e===1?this:new Fr(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new Fr(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Fr(1,0,0);Fr.prototype;var xu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ja={exports:{}};/* @preserve
 * Leaflet 1.8.0, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2022 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Eh;function zf(){return Eh||(Eh=1,function(e,n){(function(r,o){o(n)})(xu,function(r){var o="1.8.0";function s(t){var i,a,u,m;for(a=1,u=arguments.length;a<u;a++){m=arguments[a];for(i in m)t[i]=m[i]}return t}var h=Object.create||function(){function t(){}return function(i){return t.prototype=i,new t}}();function l(t,i){var a=Array.prototype.slice;if(t.bind)return t.bind.apply(t,a.call(arguments,1));var u=a.call(arguments,2);return function(){return t.apply(i,u.length?u.concat(a.call(arguments)):arguments)}}var c=0;function p(t){return"_leaflet_id"in t||(t._leaflet_id=++c),t._leaflet_id}function d(t,i,a){var u,m,T,N;return N=function(){u=!1,m&&(T.apply(a,m),m=!1)},T=function(){u?m=arguments:(t.apply(a,arguments),setTimeout(N,i),u=!0)},T}function b(t,i,a){var u=i[1],m=i[0],T=u-m;return t===u&&a?t:((t-m)%T+T)%T+m}function y(){return!1}function g(t,i){if(i===!1)return t;var a=Math.pow(10,i===void 0?6:i);return Math.round(t*a)/a}function P(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function k(t){return P(t).split(/\s+/)}function v(t,i){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?h(t.options):{});for(var a in i)t.options[a]=i[a];return t.options}function C(t,i,a){var u=[];for(var m in t)u.push(encodeURIComponent(a?m.toUpperCase():m)+"="+encodeURIComponent(t[m]));return(!i||i.indexOf("?")===-1?"?":"&")+u.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function E(t,i){return t.replace(z,function(a,u){var m=i[u];if(m===void 0)throw new Error("No value provided for variable "+a);return typeof m=="function"&&(m=m(i)),m})}var S=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function F(t,i){for(var a=0;a<t.length;a++)if(t[a]===i)return a;return-1}var O="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var rt=0;function Y(t){var i=+new Date,a=Math.max(0,16-(i-rt));return rt=i+a,window.setTimeout(t,a)}var Nt=window.requestAnimationFrame||Z("RequestAnimationFrame")||Y,Mt=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ut(t,i,a){if(a&&Nt===Y)t.call(i);else return Nt.call(window,l(t,i))}function X(t){t&&Mt.call(window,t)}var j={__proto__:null,extend:s,create:h,bind:l,get lastId(){return c},stamp:p,throttle:d,wrapNum:b,falseFn:y,formatNum:g,trim:P,splitWords:k,setOptions:v,getParamString:C,template:E,isArray:S,indexOf:F,emptyImageUrl:O,requestFn:Nt,cancelFn:Mt,requestAnimFrame:ut,cancelAnimFrame:X};function lt(){}lt.extend=function(t){var i=function(){v(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},a=i.__super__=this.prototype,u=h(a);u.constructor=i,i.prototype=u;for(var m in this)Object.prototype.hasOwnProperty.call(this,m)&&m!=="prototype"&&m!=="__super__"&&(i[m]=this[m]);return t.statics&&s(i,t.statics),t.includes&&(st(t.includes),s.apply(null,[u].concat(t.includes))),s(u,t),delete u.statics,delete u.includes,u.options&&(u.options=a.options?h(a.options):{},s(u.options,t.options)),u._initHooks=[],u.callInitHooks=function(){if(!this._initHooksCalled){a.callInitHooks&&a.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,N=u._initHooks.length;T<N;T++)u._initHooks[T].call(this)}},i},lt.include=function(t){var i=this.prototype.options;return s(this.prototype,t),t.options&&(this.prototype.options=i,this.mergeOptions(t.options)),this},lt.mergeOptions=function(t){return s(this.prototype.options,t),this},lt.addInitHook=function(t){var i=Array.prototype.slice.call(arguments,1),a=typeof t=="function"?t:function(){this[t].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(a),this};function st(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=S(t)?t:[t];for(var i=0;i<t.length;i++)t[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var dt={on:function(t,i,a){if(typeof t=="object")for(var u in t)this._on(u,t[u],i);else{t=k(t);for(var m=0,T=t.length;m<T;m++)this._on(t[m],i,a)}return this},off:function(t,i,a){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var u in t)this._off(u,t[u],i);else{t=k(t);for(var m=arguments.length===1,T=0,N=t.length;T<N;T++)m?this._off(t[T]):this._off(t[T],i,a)}return this},_on:function(t,i,a){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}this._events=this._events||{};var u=this._events[t];u||(u=[],this._events[t]=u),a===this&&(a=void 0);for(var m={fn:i,ctx:a},T=u,N=0,H=T.length;N<H;N++)if(T[N].fn===i&&T[N].ctx===a)return;T.push(m)},_off:function(t,i,a){var u,m,T;if(!!this._events&&(u=this._events[t],!!u)){if(arguments.length===1){if(this._firingCount)for(m=0,T=u.length;m<T;m++)u[m].fn=y;delete this._events[t];return}if(a===this&&(a=void 0),typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}for(m=0,T=u.length;m<T;m++){var N=u[m];if(N.ctx===a&&N.fn===i){this._firingCount&&(N.fn=y,this._events[t]=u=u.slice()),u.splice(m,1);return}}console.warn("listener not found")}},fire:function(t,i,a){if(!this.listens(t,a))return this;var u=s({},i,{type:t,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var m=this._events[t];if(m){this._firingCount=this._firingCount+1||1;for(var T=0,N=m.length;T<N;T++){var H=m[T];H.fn.call(H.ctx||this,u)}this._firingCount--}}return a&&this._propagateEvent(u),this},listens:function(t,i){typeof t!="string"&&console.warn('"string" type argument expected');var a=this._events&&this._events[t];if(a&&a.length)return!0;if(i){for(var u in this._eventParents)if(this._eventParents[u].listens(t,i))return!0}return!1},once:function(t,i,a){if(typeof t=="object"){for(var u in t)this.once(u,t[u],i);return this}var m=l(function(){this.off(t,i,a).off(t,m,a)},this);return this.on(t,i,a).on(t,m,a)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[p(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[p(t)],this},_propagateEvent:function(t){for(var i in this._eventParents)this._eventParents[i].fire(t.type,s({layer:t.target,propagatedFrom:t.target},t),!0)}};dt.addEventListener=dt.on,dt.removeEventListener=dt.clearAllEventListeners=dt.off,dt.addOneTimeEventListener=dt.once,dt.fireEvent=dt.fire,dt.hasEventListeners=dt.listens;var ct=lt.extend(dt);function U(t,i,a){this.x=a?Math.round(t):t,this.y=a?Math.round(i):i}var et=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(t){return this.clone()._add(W(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(W(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new U(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new U(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=et(this.x),this.y=et(this.y),this},distanceTo:function(t){t=W(t);var i=t.x-this.x,a=t.y-this.y;return Math.sqrt(i*i+a*a)},equals:function(t){return t=W(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=W(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+g(this.x)+", "+g(this.y)+")"}};function W(t,i,a){return t instanceof U?t:S(t)?new U(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new U(t.x,t.y):new U(t,i,a)}function mt(t,i){if(!!t)for(var a=i?[t,i]:t,u=0,m=a.length;u<m;u++)this.extend(a[u])}mt.prototype={extend:function(t){return t=W(t),!this.min&&!this.max?(this.min=t.clone(),this.max=t.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)),this},getCenter:function(t){return new U((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new U(this.min.x,this.max.y)},getTopRight:function(){return new U(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var i,a;return typeof t[0]=="number"||t instanceof U?t=W(t):t=$t(t),t instanceof mt?(i=t.min,a=t.max):i=a=t,i.x>=this.min.x&&a.x<=this.max.x&&i.y>=this.min.y&&a.y<=this.max.y},intersects:function(t){t=$t(t);var i=this.min,a=this.max,u=t.min,m=t.max,T=m.x>=i.x&&u.x<=a.x,N=m.y>=i.y&&u.y<=a.y;return T&&N},overlaps:function(t){t=$t(t);var i=this.min,a=this.max,u=t.min,m=t.max,T=m.x>i.x&&u.x<a.x,N=m.y>i.y&&u.y<a.y;return T&&N},isValid:function(){return!!(this.min&&this.max)}};function $t(t,i){return!t||t instanceof mt?t:new mt(t,i)}function Et(t,i){if(!!t)for(var a=i?[t,i]:t,u=0,m=a.length;u<m;u++)this.extend(a[u])}Et.prototype={extend:function(t){var i=this._southWest,a=this._northEast,u,m;if(t instanceof It)u=t,m=t;else if(t instanceof Et){if(u=t._southWest,m=t._northEast,!u||!m)return this}else return t?this.extend(Lt(t)||At(t)):this;return!i&&!a?(this._southWest=new It(u.lat,u.lng),this._northEast=new It(m.lat,m.lng)):(i.lat=Math.min(u.lat,i.lat),i.lng=Math.min(u.lng,i.lng),a.lat=Math.max(m.lat,a.lat),a.lng=Math.max(m.lng,a.lng)),this},pad:function(t){var i=this._southWest,a=this._northEast,u=Math.abs(i.lat-a.lat)*t,m=Math.abs(i.lng-a.lng)*t;return new Et(new It(i.lat-u,i.lng-m),new It(a.lat+u,a.lng+m))},getCenter:function(){return new It((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new It(this.getNorth(),this.getWest())},getSouthEast:function(){return new It(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof It||"lat"in t?t=Lt(t):t=At(t);var i=this._southWest,a=this._northEast,u,m;return t instanceof Et?(u=t.getSouthWest(),m=t.getNorthEast()):u=m=t,u.lat>=i.lat&&m.lat<=a.lat&&u.lng>=i.lng&&m.lng<=a.lng},intersects:function(t){t=At(t);var i=this._southWest,a=this._northEast,u=t.getSouthWest(),m=t.getNorthEast(),T=m.lat>=i.lat&&u.lat<=a.lat,N=m.lng>=i.lng&&u.lng<=a.lng;return T&&N},overlaps:function(t){t=At(t);var i=this._southWest,a=this._northEast,u=t.getSouthWest(),m=t.getNorthEast(),T=m.lat>i.lat&&u.lat<a.lat,N=m.lng>i.lng&&u.lng<a.lng;return T&&N},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,i){return t?(t=At(t),this._southWest.equals(t.getSouthWest(),i)&&this._northEast.equals(t.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function At(t,i){return t instanceof Et?t:new Et(t,i)}function It(t,i,a){if(isNaN(t)||isNaN(i))throw new Error("Invalid LatLng object: ("+t+", "+i+")");this.lat=+t,this.lng=+i,a!==void 0&&(this.alt=+a)}It.prototype={equals:function(t,i){if(!t)return!1;t=Lt(t);var a=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return a<=(i===void 0?1e-9:i)},toString:function(t){return"LatLng("+g(this.lat,t)+", "+g(this.lng,t)+")"},distanceTo:function(t){return fe.distance(this,Lt(t))},wrap:function(){return fe.wrapLatLng(this)},toBounds:function(t){var i=180*t/40075017,a=i/Math.cos(Math.PI/180*this.lat);return At([this.lat-i,this.lng-a],[this.lat+i,this.lng+a])},clone:function(){return new It(this.lat,this.lng,this.alt)}};function Lt(t,i,a){return t instanceof It?t:S(t)&&typeof t[0]!="object"?t.length===3?new It(t[0],t[1],t[2]):t.length===2?new It(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new It(t.lat,"lng"in t?t.lng:t.lon,t.alt):i===void 0?null:new It(t,i,a)}var Gt={latLngToPoint:function(t,i){var a=this.projection.project(t),u=this.scale(i);return this.transformation._transform(a,u)},pointToLatLng:function(t,i){var a=this.scale(i),u=this.transformation.untransform(t,a);return this.projection.unproject(u)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var i=this.projection.bounds,a=this.scale(t),u=this.transformation.transform(i.min,a),m=this.transformation.transform(i.max,a);return new mt(u,m)},infinite:!1,wrapLatLng:function(t){var i=this.wrapLng?b(t.lng,this.wrapLng,!0):t.lng,a=this.wrapLat?b(t.lat,this.wrapLat,!0):t.lat,u=t.alt;return new It(a,i,u)},wrapLatLngBounds:function(t){var i=t.getCenter(),a=this.wrapLatLng(i),u=i.lat-a.lat,m=i.lng-a.lng;if(u===0&&m===0)return t;var T=t.getSouthWest(),N=t.getNorthEast(),H=new It(T.lat-u,T.lng-m),V=new It(N.lat-u,N.lng-m);return new Et(H,V)}},fe=s({},Gt,{wrapLng:[-180,180],R:6371e3,distance:function(t,i){var a=Math.PI/180,u=t.lat*a,m=i.lat*a,T=Math.sin((i.lat-t.lat)*a/2),N=Math.sin((i.lng-t.lng)*a/2),H=T*T+Math.cos(u)*Math.cos(m)*N*N,V=2*Math.atan2(Math.sqrt(H),Math.sqrt(1-H));return this.R*V}}),de=6378137,re={R:de,MAX_LATITUDE:85.0511287798,project:function(t){var i=Math.PI/180,a=this.MAX_LATITUDE,u=Math.max(Math.min(a,t.lat),-a),m=Math.sin(u*i);return new U(this.R*t.lng*i,this.R*Math.log((1+m)/(1-m))/2)},unproject:function(t){var i=180/Math.PI;return new It((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*i,t.x*i/this.R)},bounds:function(){var t=de*Math.PI;return new mt([-t,-t],[t,t])}()};function zt(t,i,a,u){if(S(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=i,this._c=a,this._d=u}zt.prototype={transform:function(t,i){return this._transform(t.clone(),i)},_transform:function(t,i){return i=i||1,t.x=i*(this._a*t.x+this._b),t.y=i*(this._c*t.y+this._d),t},untransform:function(t,i){return i=i||1,new U((t.x/i-this._b)/this._a,(t.y/i-this._d)/this._c)}};function qt(t,i,a,u){return new zt(t,i,a,u)}var ye=s({},fe,{code:"EPSG:3857",projection:re,transformation:function(){var t=.5/(Math.PI*re.R);return qt(t,.5,-t,.5)}()}),ht=s({},ye,{code:"EPSG:900913"});function Tt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Dt(t,i){var a="",u,m,T,N,H,V;for(u=0,T=t.length;u<T;u++){for(H=t[u],m=0,N=H.length;m<N;m++)V=H[m],a+=(m?"L":"M")+V.x+" "+V.y;a+=i?wt.svg?"z":"x":""}return a||"M0 0"}var jt=document.documentElement.style,oe="ActiveXObject"in window,Me=oe&&!document.addEventListener,Ot="msLaunchUri"in navigator&&!("documentMode"in document),Ft=je("webkit"),ae=je("android"),Se=je("android 2")||je("android 3"),Ee=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Fe=ae&&je("Google")&&Ee<537&&!("AudioNode"in window),Ne=!!window.opera,Ye=!Ot&&je("chrome"),Ve=je("gecko")&&!Ft&&!Ne&&!oe,Fn=!Ye&&je("safari"),Qe=je("phantom"),mn="OTransition"in jt,jn=navigator.platform.indexOf("Win")===0,$n=oe&&"transition"in jt,Xe="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Se,Ie="MozPerspective"in jt,ci=!window.L_DISABLE_3D&&($n||Xe||Ie)&&!mn&&!Qe,Ze=typeof orientation<"u"||je("mobile"),Kn=Ze&&Ft,_n=Ze&&Xe,ze=!window.PointerEvent&&window.MSPointerEvent,bt=!!(window.PointerEvent||ze),le="ontouchstart"in window||!!window.TouchEvent,Ge=!window.L_NO_TOUCH&&(le||bt),fi=Ze&&Ne,ue=Ze&&Ve,Mn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Xr=function(){var t=!1;try{var i=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",y,i),window.removeEventListener("testPassiveEventSupport",y,i)}catch{}return t}(),jr=function(){return!!document.createElement("canvas").getContext}(),Ii=!!(document.createElementNS&&Tt("svg").createSVGRect),Kr=!!Ii&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Jr=!Ii&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}();function je(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var wt={ie:oe,ielt9:Me,edge:Ot,webkit:Ft,android:ae,android23:Se,androidStock:Fe,opera:Ne,chrome:Ye,gecko:Ve,safari:Fn,phantom:Qe,opera12:mn,win:jn,ie3d:$n,webkit3d:Xe,gecko3d:Ie,any3d:ci,mobile:Ze,mobileWebkit:Kn,mobileWebkit3d:_n,msPointer:ze,pointer:bt,touch:Ge,touchNative:le,mobileOpera:fi,mobileGecko:ue,retina:Mn,passiveEvents:Xr,canvas:jr,svg:Ii,vml:Jr,inlineSvg:Kr},or=wt.msPointer?"MSPointerDown":"pointerdown",ar=wt.msPointer?"MSPointerMove":"pointermove",sr=wt.msPointer?"MSPointerUp":"pointerup",tt=wt.msPointer?"MSPointerCancel":"pointercancel",we={touchstart:or,touchmove:ar,touchend:sr,touchcancel:tt},Jn={touchstart:Bs,touchmove:lr,touchend:lr,touchcancel:lr},Ln={},zi=!1;function Qr(t,i,a){return i==="touchstart"&&la(),Jn[i]?(a=Jn[i].bind(this,a),t.addEventListener(we[i],a,!1),a):(console.warn("wrong event specified:",i),L.Util.falseFn)}function oa(t,i,a){if(!we[i]){console.warn("wrong event specified:",i);return}t.removeEventListener(we[i],a,!1)}function Ns(t){Ln[t.pointerId]=t}function aa(t){Ln[t.pointerId]&&(Ln[t.pointerId]=t)}function sa(t){delete Ln[t.pointerId]}function la(){zi||(document.addEventListener(or,Ns,!0),document.addEventListener(ar,aa,!0),document.addEventListener(sr,sa,!0),document.addEventListener(tt,sa,!0),zi=!0)}function lr(t,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var a in Ln)i.touches.push(Ln[a]);i.changedTouches=[i],t(i)}}function Bs(t,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&De(i),lr(t,i)}function ua(t){var i={},a,u;for(u in t)a=t[u],i[u]=a&&a.bind?a.bind(t):a;return t=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var Rs=200;function Zs(t,i){t.addEventListener("dblclick",i);var a=0,u;function m(T){if(T.detail!==1){u=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var N=Date.now();N-a<=Rs?(u++,u===2&&i(ua(T))):u=1,a=N}}return t.addEventListener("click",m),{dblclick:i,simDblclick:m}}function Ds(t,i){t.removeEventListener("dblclick",i.dblclick),t.removeEventListener("click",i.simDblclick)}var to=dr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ai=dr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ha=Ai==="webkitTransition"||Ai==="OTransition"?Ai+"End":"transitionend";function ur(t){return typeof t=="string"?document.getElementById(t):t}function gn(t,i){var a=t.style[i]||t.currentStyle&&t.currentStyle[i];if((!a||a==="auto")&&document.defaultView){var u=document.defaultView.getComputedStyle(t,null);a=u?u[i]:null}return a==="auto"?null:a}function Jt(t,i,a){var u=document.createElement(t);return u.className=i||"",a&&a.appendChild(u),u}function pe(t){var i=t.parentNode;i&&i.removeChild(t)}function hr(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function di(t){var i=t.parentNode;i&&i.lastChild!==t&&i.appendChild(t)}function pi(t){var i=t.parentNode;i&&i.firstChild!==t&&i.insertBefore(t,i.firstChild)}function eo(t,i){if(t.classList!==void 0)return t.classList.contains(i);var a=fr(t);return a.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(a)}function Ht(t,i){if(t.classList!==void 0)for(var a=k(i),u=0,m=a.length;u<m;u++)t.classList.add(a[u]);else if(!eo(t,i)){var T=fr(t);cr(t,(T?T+" ":"")+i)}}function Le(t,i){t.classList!==void 0?t.classList.remove(i):cr(t,P((" "+fr(t)+" ").replace(" "+i+" "," ")))}function cr(t,i){t.className.baseVal===void 0?t.className=i:t.className.baseVal=i}function fr(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function tn(t,i){"opacity"in t.style?t.style.opacity=i:"filter"in t.style&&Fs(t,i)}function Fs(t,i){var a=!1,u="DXImageTransform.Microsoft.Alpha";try{a=t.filters.item(u)}catch{if(i===1)return}i=Math.round(i*100),a?(a.Enabled=i!==100,a.Opacity=i):t.style.filter+=" progid:"+u+"(opacity="+i+")"}function dr(t){for(var i=document.documentElement.style,a=0;a<t.length;a++)if(t[a]in i)return t[a];return!1}function Hn(t,i,a){var u=i||new U(0,0);t.style[to]=(wt.ie3d?"translate("+u.x+"px,"+u.y+"px)":"translate3d("+u.x+"px,"+u.y+"px,0)")+(a?" scale("+a+")":"")}function Te(t,i){t._leaflet_pos=i,wt.any3d?Hn(t,i):(t.style.left=i.x+"px",t.style.top=i.y+"px")}function Qn(t){return t._leaflet_pos||new U(0,0)}var Oi,Ni,no;if("onselectstart"in document)Oi=function(){Zt(window,"selectstart",De)},Ni=function(){he(window,"selectstart",De)};else{var Bi=dr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Oi=function(){if(Bi){var t=document.documentElement.style;no=t[Bi],t[Bi]="none"}},Ni=function(){Bi&&(document.documentElement.style[Bi]=no,no=void 0)}}function io(){Zt(window,"dragstart",De)}function ro(){he(window,"dragstart",De)}var pr,oo;function ao(t){for(;t.tabIndex===-1;)t=t.parentNode;!t.style||(mr(),pr=t,oo=t.style.outline,t.style.outline="none",Zt(window,"keydown",mr))}function mr(){!pr||(pr.style.outline=oo,pr=void 0,oo=void 0,he(window,"keydown",mr))}function ca(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function so(t){var i=t.getBoundingClientRect();return{x:i.width/t.offsetWidth||1,y:i.height/t.offsetHeight||1,boundingClientRect:i}}var fa={__proto__:null,TRANSFORM:to,TRANSITION:Ai,TRANSITION_END:ha,get:ur,getStyle:gn,create:Jt,remove:pe,empty:hr,toFront:di,toBack:pi,hasClass:eo,addClass:Ht,removeClass:Le,setClass:cr,getClass:fr,setOpacity:tn,testProp:dr,setTransform:Hn,setPosition:Te,getPosition:Qn,get disableTextSelection(){return Oi},get enableTextSelection(){return Ni},disableImageDrag:io,enableImageDrag:ro,preventOutline:ao,restoreOutline:mr,getSizedParentNode:ca,getScale:so};function Zt(t,i,a,u){if(i&&typeof i=="object")for(var m in i)_r(t,m,i[m],a);else{i=k(i);for(var T=0,N=i.length;T<N;T++)_r(t,i[T],a,u)}return this}var vn="_leaflet_events";function he(t,i,a,u){if(arguments.length===1)ti(t),delete t[vn];else if(i&&typeof i=="object")for(var m in i)uo(t,m,i[m],a);else if(i=k(i),arguments.length===2)ti(t,function(H){return F(i,H)!==-1});else for(var T=0,N=i.length;T<N;T++)uo(t,i[T],a,u);return this}function ti(t,i){for(var a in t[vn]){var u=a.split(/\d/)[0];(!i||i(u))&&uo(t,u,null,null,a)}}var lo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function _r(t,i,a,u){var m=i+p(a)+(u?"_"+p(u):"");if(t[vn]&&t[vn][m])return this;var T=function(H){return a.call(u||t,H||window.event)},N=T;!wt.touchNative&&wt.pointer&&i.indexOf("touch")===0?T=Qr(t,i,T):wt.touch&&i==="dblclick"?T=Zs(t,T):"addEventListener"in t?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?t.addEventListener(lo[i]||i,T,wt.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(T=function(H){H=H||window.event,Di(t,H)&&N(H)},t.addEventListener(lo[i],T,!1)):t.addEventListener(i,N,!1):t.attachEvent("on"+i,T),t[vn]=t[vn]||{},t[vn][m]=T}function uo(t,i,a,u,m){m=m||i+p(a)+(u?"_"+p(u):"");var T=t[vn]&&t[vn][m];if(!T)return this;!wt.touchNative&&wt.pointer&&i.indexOf("touch")===0?oa(t,i,T):wt.touch&&i==="dblclick"?Ds(t,T):"removeEventListener"in t?t.removeEventListener(lo[i]||i,T,!1):t.detachEvent("on"+i,T),t[vn][m]=null}function Tn(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Ri(t){return _r(t,"wheel",Tn),this}function Zi(t){return Zt(t,"mousedown touchstart dblclick contextmenu",Tn),t._leaflet_disable_click=!0,this}function De(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function en(t){return De(t),Tn(t),this}function da(t,i){if(!i)return new U(t.clientX,t.clientY);var a=so(i),u=a.boundingClientRect;return new U((t.clientX-u.left)/a.x-i.clientLeft,(t.clientY-u.top)/a.y-i.clientTop)}var $s=wt.win&&wt.chrome?2*window.devicePixelRatio:wt.gecko?window.devicePixelRatio:1;function pa(t){return wt.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/$s:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Di(t,i){var a=i.relatedTarget;if(!a)return!0;try{for(;a&&a!==t;)a=a.parentNode}catch{return!1}return a!==t}var ho={__proto__:null,on:Zt,off:he,stopPropagation:Tn,disableScrollPropagation:Ri,disableClickPropagation:Zi,preventDefault:De,stop:en,getMousePosition:da,getWheelDelta:pa,isExternalTarget:Di,addListener:Zt,removeListener:he},co=ct.extend({run:function(t,i,a,u){this.stop(),this._el=t,this._inProgress=!0,this._duration=a||.25,this._easeOutPower=1/Math.max(u||.5,.2),this._startPos=Qn(t),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=ut(this._animate,this),this._step()},_step:function(t){var i=+new Date-this._startTime,a=this._duration*1e3;i<a?this._runFrame(this._easeOut(i/a),t):(this._runFrame(1),this._complete())},_runFrame:function(t,i){var a=this._startPos.add(this._offset.multiplyBy(t));i&&a._round(),Te(this._el,a),this.fire("step")},_complete:function(){X(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Qt=ct.extend({options:{crs:ye,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,i){i=v(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(Lt(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ai&&wt.any3d&&!wt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Zt(this._proxy,ha,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,i,a){if(i=i===void 0?this._zoom:this._limitZoom(i),t=this._limitCenter(Lt(t),i,this.options.maxBounds),a=a||{},this._stop(),this._loaded&&!a.reset&&a!==!0){a.animate!==void 0&&(a.zoom=s({animate:a.animate},a.zoom),a.pan=s({animate:a.animate,duration:a.duration},a.pan));var u=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,i,a.zoom):this._tryAnimatedPan(t,a.pan);if(u)return clearTimeout(this._sizeTimer),this}return this._resetView(t,i),this},setZoom:function(t,i){return this._loaded?this.setView(this.getCenter(),t,{zoom:i}):(this._zoom=t,this)},zoomIn:function(t,i){return t=t||(wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,i)},zoomOut:function(t,i){return t=t||(wt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,i)},setZoomAround:function(t,i,a){var u=this.getZoomScale(i),m=this.getSize().divideBy(2),T=t instanceof U?t:this.latLngToContainerPoint(t),N=T.subtract(m).multiplyBy(1-1/u),H=this.containerPointToLatLng(m.add(N));return this.setView(H,i,{zoom:a})},_getBoundsCenterZoom:function(t,i){i=i||{},t=t.getBounds?t.getBounds():At(t);var a=W(i.paddingTopLeft||i.padding||[0,0]),u=W(i.paddingBottomRight||i.padding||[0,0]),m=this.getBoundsZoom(t,!1,a.add(u));if(m=typeof i.maxZoom=="number"?Math.min(i.maxZoom,m):m,m===1/0)return{center:t.getCenter(),zoom:m};var T=u.subtract(a).divideBy(2),N=this.project(t.getSouthWest(),m),H=this.project(t.getNorthEast(),m),V=this.unproject(N.add(H).divideBy(2).add(T),m);return{center:V,zoom:m}},fitBounds:function(t,i){if(t=At(t),!t.isValid())throw new Error("Bounds are not valid.");var a=this._getBoundsCenterZoom(t,i);return this.setView(a.center,a.zoom,i)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,i){return this.setView(t,this._zoom,{pan:i})},panBy:function(t,i){if(t=W(t).round(),i=i||{},!t.x&&!t.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new co,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){Ht(this._mapPane,"leaflet-pan-anim");var a=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,a,i.duration||.25,i.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,i,a){if(a=a||{},a.animate===!1||!wt.any3d)return this.setView(t,i,a);this._stop();var u=this.project(this.getCenter()),m=this.project(t),T=this.getSize(),N=this._zoom;t=Lt(t),i=i===void 0?N:i;var H=Math.max(T.x,T.y),V=H*this.getZoomScale(N,i),it=m.distanceTo(u)||1,vt=1.42,Wt=vt*vt;function te(Ce){var Yi=Ce?-1:1,pl=Ce?V:H,ml=V*V-H*H+Yi*Wt*Wt*it*it,_l=2*pl*Wt*it,Xi=ml/_l,ri=Math.sqrt(Xi*Xi+1)-Xi,gl=ri<1e-9?-18:Math.log(ri);return gl}function fn(Ce){return(Math.exp(Ce)-Math.exp(-Ce))/2}function Ae(Ce){return(Math.exp(Ce)+Math.exp(-Ce))/2}function Vi(Ce){return fn(Ce)/Ae(Ce)}var In=te(0);function ki(Ce){return H*(Ae(In)/Ae(In+vt*Ce))}function Da(Ce){return H*(Ae(In)*Vi(In+vt*Ce)-fn(In))/Wt}function Fa(Ce){return 1-Math.pow(1-Ce,1.5)}var dl=Date.now(),Eo=(te(1)-In)/vt,Io=a.duration?1e3*a.duration:1e3*Eo*.8;function $a(){var Ce=(Date.now()-dl)/Io,Yi=Fa(Ce)*Eo;Ce<=1?(this._flyToFrame=ut($a,this),this._move(this.unproject(u.add(m.subtract(u).multiplyBy(Da(Yi)/it)),N),this.getScaleZoom(H/ki(Yi),N),{flyTo:!0})):this._move(t,i)._moveEnd(!0)}return this._moveStart(!0,a.noMoveStart),$a.call(this),this},flyToBounds:function(t,i){var a=this._getBoundsCenterZoom(t,i);return this.flyTo(a.center,a.zoom,i)},setMaxBounds:function(t){if(t=At(t),t.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(t){var i=this.options.minZoom;return this.options.minZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var i=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&i!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,i){this._enforcingBounds=!0;var a=this.getCenter(),u=this._limitCenter(a,this._zoom,At(t));return a.equals(u)||this.panTo(u,i),this._enforcingBounds=!1,this},panInside:function(t,i){i=i||{};var a=W(i.paddingTopLeft||i.padding||[0,0]),u=W(i.paddingBottomRight||i.padding||[0,0]),m=this.project(this.getCenter()),T=this.project(t),N=this.getPixelBounds(),H=$t([N.min.add(a),N.max.subtract(u)]),V=H.getSize();if(!H.contains(T)){this._enforcingBounds=!0;var it=T.subtract(H.getCenter()),vt=H.extend(T).getSize().subtract(V);m.x+=it.x<0?-vt.x:vt.x,m.y+=it.y<0?-vt.y:vt.y,this.panTo(this.unproject(m),i),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=s({animate:!1,pan:!0},t===!0?{animate:!0}:t);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var a=this.getSize(),u=i.divideBy(2).round(),m=a.divideBy(2).round(),T=u.subtract(m);return!T.x&&!T.y?this:(t.animate&&t.pan?this.panBy(T):(t.pan&&this._rawPanBy(T),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:a}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=l(this._handleGeolocationResponse,this),a=l(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,a,t):navigator.geolocation.getCurrentPosition(i,a,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(!!this._container._leaflet_id){var i=t.code,a=t.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+a+"."})}},_handleGeolocationResponse:function(t){if(!!this._container._leaflet_id){var i=t.coords.latitude,a=t.coords.longitude,u=new It(i,a),m=u.toBounds(t.coords.accuracy*2),T=this._locateOptions;if(T.setView){var N=this.getBoundsZoom(m);this.setView(u,T.maxZoom?Math.min(N,T.maxZoom):N)}var H={latlng:u,bounds:m,timestamp:t.timestamp};for(var V in t.coords)typeof t.coords[V]=="number"&&(H[V]=t.coords[V]);this.fire("locationfound",H)}},addHandler:function(t,i){if(!i)return this;var a=this[t]=new i(this);return this._handlers.push(a),this.options[t]&&a.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),pe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(X(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)pe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,i){var a="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),u=Jt("div",a,i||this._mapPane);return t&&(this._panes[t]=u),u},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),i=this.unproject(t.getBottomLeft()),a=this.unproject(t.getTopRight());return new Et(i,a)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,i,a){t=At(t),a=W(a||[0,0]);var u=this.getZoom()||0,m=this.getMinZoom(),T=this.getMaxZoom(),N=t.getNorthWest(),H=t.getSouthEast(),V=this.getSize().subtract(a),it=$t(this.project(H,u),this.project(N,u)).getSize(),vt=wt.any3d?this.options.zoomSnap:1,Wt=V.x/it.x,te=V.y/it.y,fn=i?Math.max(Wt,te):Math.min(Wt,te);return u=this.getScaleZoom(fn,u),vt&&(u=Math.round(u/(vt/100))*(vt/100),u=i?Math.ceil(u/vt)*vt:Math.floor(u/vt)*vt),Math.max(m,Math.min(T,u))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,i){var a=this._getTopLeftPoint(t,i);return new mt(a,a.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,i){var a=this.options.crs;return i=i===void 0?this._zoom:i,a.scale(t)/a.scale(i)},getScaleZoom:function(t,i){var a=this.options.crs;i=i===void 0?this._zoom:i;var u=a.zoom(t*a.scale(i));return isNaN(u)?1/0:u},project:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(Lt(t),i)},unproject:function(t,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(W(t),i)},layerPointToLatLng:function(t){var i=W(t).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(t){var i=this.project(Lt(t))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(Lt(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(At(t))},distance:function(t,i){return this.options.crs.distance(Lt(t),Lt(i))},containerPointToLayerPoint:function(t){return W(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return W(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var i=this.containerPointToLayerPoint(W(t));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Lt(t)))},mouseEventToContainerPoint:function(t){return da(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var i=this._container=ur(t);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Zt(i,"scroll",this._onScroll,this),this._containerId=p(i)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&wt.any3d,Ht(t,"leaflet-container"+(wt.touch?" leaflet-touch":"")+(wt.retina?" leaflet-retina":"")+(wt.ielt9?" leaflet-oldie":"")+(wt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=gn(t,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Te(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ht(t.markerPane,"leaflet-zoom-hide"),Ht(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,i){Te(this._mapPane,new U(0,0));var a=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var u=this._zoom!==i;this._moveStart(u,!1)._move(t,i)._moveEnd(u),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(t,i){return t&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(t,i,a,u){i===void 0&&(i=this._zoom);var m=this._zoom!==i;return this._zoom=i,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),u?a&&a.pinch&&this.fire("zoom",a):((m||a&&a.pinch)&&this.fire("zoom",a),this.fire("move",a)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return X(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Te(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[p(this._container)]=this;var i=t?he:Zt;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),wt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){X(this._resizeRequest),this._resizeRequest=ut(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,i){for(var a=[],u,m=i==="mouseout"||i==="mouseover",T=t.target||t.srcElement,N=!1;T;){if(u=this._targets[p(T)],u&&(i==="click"||i==="preclick")&&this._draggableMoved(u)){N=!0;break}if(u&&u.listens(i,!0)&&(m&&!Di(T,t)||(a.push(u),m))||T===this._container)break;T=T.parentNode}return!a.length&&!N&&!m&&this.listens(i,!0)&&(a=[this]),a},_isClickDisabled:function(t){for(;t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var i=t.target||t.srcElement;if(!(!this._loaded||i._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(i))){var a=t.type;a==="mousedown"&&ao(i),this._fireDOMEvent(t,a)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,i,a){if(t.type==="click"){var u=s({},t);u.type="preclick",this._fireDOMEvent(u,u.type,a)}var m=this._findEventTargets(t,i);if(a){for(var T=[],N=0;N<a.length;N++)a[N].listens(i,!0)&&T.push(a[N]);m=T.concat(m)}if(!!m.length){i==="contextmenu"&&De(t);var H=m[0],V={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var it=H.getLatLng&&(!H._radius||H._radius<=10);V.containerPoint=it?this.latLngToContainerPoint(H.getLatLng()):this.mouseEventToContainerPoint(t),V.layerPoint=this.containerPointToLayerPoint(V.containerPoint),V.latlng=it?H.getLatLng():this.layerPointToLatLng(V.layerPoint)}for(N=0;N<m.length;N++)if(m[N].fire(i,V,!0),V.originalEvent._stopped||m[N].options.bubblingMouseEvents===!1&&F(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,i=this._handlers.length;t<i;t++)this._handlers[t].disable()},whenReady:function(t,i){return this._loaded?t.call(i||this,{target:this}):this.on("load",t,i),this},_getMapPanePos:function(){return Qn(this._mapPane)||new U(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,i){var a=t&&i!==void 0?this._getNewPixelOrigin(t,i):this.getPixelOrigin();return a.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,i){var a=this.getSize()._divideBy(2);return this.project(t,i)._subtract(a)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,i,a){var u=this._getNewPixelOrigin(a,i);return this.project(t,i)._subtract(u)},_latLngBoundsToNewLayerBounds:function(t,i,a){var u=this._getNewPixelOrigin(a,i);return $t([this.project(t.getSouthWest(),i)._subtract(u),this.project(t.getNorthWest(),i)._subtract(u),this.project(t.getSouthEast(),i)._subtract(u),this.project(t.getNorthEast(),i)._subtract(u)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,i,a){if(!a)return t;var u=this.project(t,i),m=this.getSize().divideBy(2),T=new mt(u.subtract(m),u.add(m)),N=this._getBoundsOffset(T,a,i);return N.round().equals([0,0])?t:this.unproject(u.add(N),i)},_limitOffset:function(t,i){if(!i)return t;var a=this.getPixelBounds(),u=new mt(a.min.add(t),a.max.add(t));return t.add(this._getBoundsOffset(u,i))},_getBoundsOffset:function(t,i,a){var u=$t(this.project(i.getNorthEast(),a),this.project(i.getSouthWest(),a)),m=u.min.subtract(t.min),T=u.max.subtract(t.max),N=this._rebound(m.x,-T.x),H=this._rebound(m.y,-T.y);return new U(N,H)},_rebound:function(t,i){return t+i>0?Math.round(t-i)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(i))},_limitZoom:function(t){var i=this.getMinZoom(),a=this.getMaxZoom(),u=wt.any3d?this.options.zoomSnap:1;return u&&(t=Math.round(t/u)*u),Math.max(i,Math.min(a,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Le(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,i){var a=this._getCenterOffset(t)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(a)?!1:(this.panBy(a,i),!0)},_createAnimProxy:function(){var t=this._proxy=Jt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(i){var a=to,u=this._proxy.style[a];Hn(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),u===this._proxy.style[a]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){pe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),i=this.getZoom();Hn(this._proxy,this.project(t,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,i,a){if(this._animatingZoom)return!0;if(a=a||{},!this._zoomAnimated||a.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var u=this.getZoomScale(i),m=this._getCenterOffset(t)._divideBy(1-1/u);return a.animate!==!0&&!this.getSize().contains(m)?!1:(ut(function(){this._moveStart(!0,!1)._animateZoom(t,i,!0)},this),!0)},_animateZoom:function(t,i,a,u){!this._mapPane||(a&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=i,Ht(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:i,noUpdate:u}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&Le(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Hs(t,i){return new Qt(t,i)}var cn=lt.extend({options:{position:"topright"},initialize:function(t){v(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var i=this._map;return i&&i.removeControl(this),this.options.position=t,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var i=this._container=this.onAdd(t),a=this.getPosition(),u=t._controlCorners[a];return Ht(i,"leaflet-control"),a.indexOf("bottom")!==-1?u.insertBefore(i,u.firstChild):u.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(pe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),mi=function(t){return new cn(t)};Qt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},i="leaflet-",a=this._controlContainer=Jt("div",i+"control-container",this._container);function u(m,T){var N=i+m+" "+i+T;t[m+T]=Jt("div",N,a)}u("top","left"),u("top","right"),u("bottom","left"),u("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)pe(this._controlCorners[t]);pe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var fo=cn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,i,a,u){return a<u?-1:u<a?1:0}},initialize:function(t,i,a){v(this,a),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var u in t)this._addLayer(t[u],u);for(u in i)this._addLayer(i[u],u,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return cn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,i){return this._addLayer(t,i),this._map?this._update():this},addOverlay:function(t,i){return this._addLayer(t,i,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var i=this._getLayer(p(t));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){Ht(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Ht(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):Le(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Le(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",i=this._container=Jt("div",t),a=this.options.collapsed;i.setAttribute("aria-haspopup",!0),Zi(i),Ri(i);var u=this._section=Jt("section",t+"-list");a&&(this._map.on("click",this.collapse,this),Zt(i,{mouseenter:function(){Zt(u,"click",De),this.expand(),setTimeout(function(){he(u,"click",De)})},mouseleave:this.collapse},this));var m=this._layersLink=Jt("a",t+"-toggle",i);m.href="#",m.title="Layers",m.setAttribute("role","button"),Zt(m,"click",De),Zt(m,"focus",this.expand,this),a||this.expand(),this._baseLayersList=Jt("div",t+"-base",u),this._separator=Jt("div",t+"-separator",u),this._overlaysList=Jt("div",t+"-overlays",u),i.appendChild(u)},_getLayer:function(t){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&p(this._layers[i].layer)===t)return this._layers[i]},_addLayer:function(t,i,a){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:i,overlay:a}),this.options.sortLayers&&this._layers.sort(l(function(u,m){return this.options.sortFunction(u.layer,m.layer,u.name,m.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;hr(this._baseLayersList),hr(this._overlaysList),this._layerControlInputs=[];var t,i,a,u,m=0;for(a=0;a<this._layers.length;a++)u=this._layers[a],this._addItem(u),i=i||u.overlay,t=t||!u.overlay,m+=u.overlay?0:1;return this.options.hideSingleBase&&(t=t&&m>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=i&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var i=this._getLayer(p(t.target)),a=i.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;a&&this._map.fire(a,i)},_createRadioElement:function(t,i){var a='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(i?' checked="checked"':"")+"/>",u=document.createElement("div");return u.innerHTML=a,u.firstChild},_addItem:function(t){var i=document.createElement("label"),a=this._map.hasLayer(t.layer),u;t.overlay?(u=document.createElement("input"),u.type="checkbox",u.className="leaflet-control-layers-selector",u.defaultChecked=a):u=this._createRadioElement("leaflet-base-layers_"+p(this),a),this._layerControlInputs.push(u),u.layerId=p(t.layer),Zt(u,"click",this._onInputClick,this);var m=document.createElement("span");m.innerHTML=" "+t.name;var T=document.createElement("span");i.appendChild(T),T.appendChild(u),T.appendChild(m);var N=t.overlay?this._overlaysList:this._baseLayersList;return N.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t=this._layerControlInputs,i,a,u=[],m=[];this._handlingClick=!0;for(var T=t.length-1;T>=0;T--)i=t[T],a=this._getLayer(i.layerId).layer,i.checked?u.push(a):i.checked||m.push(a);for(T=0;T<m.length;T++)this._map.hasLayer(m[T])&&this._map.removeLayer(m[T]);for(T=0;T<u.length;T++)this._map.hasLayer(u[T])||this._map.addLayer(u[T]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,i,a,u=this._map.getZoom(),m=t.length-1;m>=0;m--)i=t[m],a=this._getLayer(i.layerId).layer,i.disabled=a.options.minZoom!==void 0&&u<a.options.minZoom||a.options.maxZoom!==void 0&&u>a.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),Gs=function(t,i,a){return new fo(t,i,a)},po=cn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var i="leaflet-control-zoom",a=Jt("div",i+" leaflet-bar"),u=this.options;return this._zoomInButton=this._createButton(u.zoomInText,u.zoomInTitle,i+"-in",a,this._zoomIn),this._zoomOutButton=this._createButton(u.zoomOutText,u.zoomOutTitle,i+"-out",a,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),a},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,i,a,u,m){var T=Jt("a",a,u);return T.innerHTML=t,T.href="#",T.title=i,T.setAttribute("role","button"),T.setAttribute("aria-label",i),Zi(T),Zt(T,"click",en),Zt(T,"click",m,this),Zt(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var t=this._map,i="leaflet-disabled";Le(this._zoomInButton,i),Le(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Ht(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Ht(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});Qt.mergeOptions({zoomControl:!0}),Qt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new po,this.addControl(this.zoomControl))});var Ws=function(t){return new po(t)},ma=cn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var i="leaflet-control-scale",a=Jt("div",i),u=this.options;return this._addScales(u,i+"-line",a),t.on(u.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),a},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,i,a){t.metric&&(this._mScale=Jt("div",i,a)),t.imperial&&(this._iScale=Jt("div",i,a))},_update:function(){var t=this._map,i=t.getSize().y/2,a=t.distance(t.containerPointToLatLng([0,i]),t.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(a)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var i=this._getRoundNum(t),a=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,a,i/t)},_updateImperial:function(t){var i=t*3.2808399,a,u,m;i>5280?(a=i/5280,u=this._getRoundNum(a),this._updateScale(this._iScale,u+" mi",u/a)):(m=this._getRoundNum(i),this._updateScale(this._iScale,m+" ft",m/i))},_updateScale:function(t,i,a){t.style.width=Math.round(this.options.maxWidth*a)+"px",t.innerHTML=i},_getRoundNum:function(t){var i=Math.pow(10,(Math.floor(t)+"").length-1),a=t/i;return a=a>=10?10:a>=5?5:a>=3?3:a>=2?2:1,i*a}}),qs=function(t){return new ma(t)},Us='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',mo=cn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(wt.inlineSvg?Us+" ":"")+"Leaflet</a>"},initialize:function(t){v(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Jt("div","leaflet-control-attribution"),Zi(this._container);for(var i in t._layers)t._layers[i].getAttribution&&this.addAttribution(t._layers[i].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(!!this._map){var t=[];for(var i in this._attributions)this._attributions[i]&&t.push(i);var a=[];this.options.prefix&&a.push(this.options.prefix),t.length&&a.push(t.join(", ")),this._container.innerHTML=a.join(' <span aria-hidden="true">|</span> ')}}});Qt.mergeOptions({attributionControl:!0}),Qt.addInitHook(function(){this.options.attributionControl&&new mo().addTo(this)});var _a=function(t){return new mo(t)};cn.Layers=fo,cn.Zoom=po,cn.Scale=ma,cn.Attribution=mo,mi.layers=Gs,mi.zoom=Ws,mi.scale=qs,mi.attribution=_a;var bn=lt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bn.addTo=function(t,i){return t.addHandler(i,this),this};var Vs={Events:dt},ga=wt.touch?"touchstart mousedown":"mousedown",Gn=ct.extend({options:{clickTolerance:3},initialize:function(t,i,a,u){v(this,u),this._element=t,this._dragStartTarget=i||t,this._preventOutline=a},enable:function(){this._enabled||(Zt(this._dragStartTarget,ga,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(Gn._dragging===this&&this.finishDrag(!0),he(this._dragStartTarget,ga,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!!this._enabled&&(this._moved=!1,!eo(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Gn._dragging===this&&this.finishDrag();return}if(!(Gn._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Gn._dragging=this,this._preventOutline&&ao(this._element),io(),Oi(),!this._moving)){this.fire("down");var i=t.touches?t.touches[0]:t,a=ca(this._element);this._startPoint=new U(i.clientX,i.clientY),this._startPos=Qn(this._element),this._parentScale=so(a);var u=t.type==="mousedown";Zt(document,u?"mousemove":"touchmove",this._onMove,this),Zt(document,u?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(!!this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var i=t.touches&&t.touches.length===1?t.touches[0]:t,a=new U(i.clientX,i.clientY)._subtract(this._startPoint);!a.x&&!a.y||Math.abs(a.x)+Math.abs(a.y)<this.options.clickTolerance||(a.x/=this._parentScale.x,a.y/=this._parentScale.y,De(t),this._moved||(this.fire("dragstart"),this._moved=!0,Ht(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ht(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(a),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Te(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){!this._enabled||this.finishDrag()},finishDrag:function(t){Le(document.body,"leaflet-dragging"),this._lastTarget&&(Le(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),he(document,"mousemove touchmove",this._onMove,this),he(document,"mouseup touchend touchcancel",this._onUp,this),ro(),Ni(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,Gn._dragging=!1}});function va(t,i){if(!i||!t.length)return t.slice();var a=i*i;return t=js(t,a),t=Xs(t,a),t}function ba(t,i,a){return Math.sqrt(_i(t,i,a,!0))}function Ys(t,i,a){return _i(t,i,a)}function Xs(t,i){var a=t.length,u=typeof Uint8Array!=void 0+""?Uint8Array:Array,m=new u(a);m[0]=m[a-1]=1,_o(t,m,i,0,a-1);var T,N=[];for(T=0;T<a;T++)m[T]&&N.push(t[T]);return N}function _o(t,i,a,u,m){var T=0,N,H,V;for(H=u+1;H<=m-1;H++)V=_i(t[H],t[u],t[m],!0),V>T&&(N=H,T=V);T>a&&(i[N]=1,_o(t,i,a,u,N),_o(t,i,a,N,m))}function js(t,i){for(var a=[t[0]],u=1,m=0,T=t.length;u<T;u++)Ks(t[u],t[m])>i&&(a.push(t[u]),m=u);return m<T-1&&a.push(t[T-1]),a}var go;function ya(t,i,a,u,m){var T=u?go:ei(t,a),N=ei(i,a),H,V,it;for(go=N;;){if(!(T|N))return[t,i];if(T&N)return!1;H=T||N,V=gr(t,i,H,a,m),it=ei(V,a),H===T?(t=V,T=it):(i=V,N=it)}}function gr(t,i,a,u,m){var T=i.x-t.x,N=i.y-t.y,H=u.min,V=u.max,it,vt;return a&8?(it=t.x+T*(V.y-t.y)/N,vt=V.y):a&4?(it=t.x+T*(H.y-t.y)/N,vt=H.y):a&2?(it=V.x,vt=t.y+N*(V.x-t.x)/T):a&1&&(it=H.x,vt=t.y+N*(H.x-t.x)/T),new U(it,vt,m)}function ei(t,i){var a=0;return t.x<i.min.x?a|=1:t.x>i.max.x&&(a|=2),t.y<i.min.y?a|=4:t.y>i.max.y&&(a|=8),a}function Ks(t,i){var a=i.x-t.x,u=i.y-t.y;return a*a+u*u}function _i(t,i,a,u){var m=i.x,T=i.y,N=a.x-m,H=a.y-T,V=N*N+H*H,it;return V>0&&(it=((t.x-m)*N+(t.y-T)*H)/V,it>1?(m=a.x,T=a.y):it>0&&(m+=N*it,T+=H*it)),N=t.x-m,H=t.y-T,u?N*N+H*H:new U(m,T)}function Cn(t){return!S(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function wa(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Cn(t)}var Js={__proto__:null,simplify:va,pointToSegmentDistance:ba,closestPointOnSegment:Ys,clipSegment:ya,_getEdgeIntersection:gr,_getBitCode:ei,_sqClosestPointOnSegment:_i,isFlat:Cn,_flat:wa};function xa(t,i,a){var u,m=[1,4,2,8],T,N,H,V,it,vt,Wt,te;for(T=0,vt=t.length;T<vt;T++)t[T]._code=ei(t[T],i);for(H=0;H<4;H++){for(Wt=m[H],u=[],T=0,vt=t.length,N=vt-1;T<vt;N=T++)V=t[T],it=t[N],V._code&Wt?it._code&Wt||(te=gr(it,V,Wt,i,a),te._code=ei(te,i),u.push(te)):(it._code&Wt&&(te=gr(it,V,Wt,i,a),te._code=ei(te,i),u.push(te)),u.push(V));t=u}return t}var Qs={__proto__:null,clipPolygon:xa},vo={project:function(t){return new U(t.lng,t.lat)},unproject:function(t){return new It(t.y,t.x)},bounds:new mt([-180,-90],[180,90])},vr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new mt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var i=Math.PI/180,a=this.R,u=t.lat*i,m=this.R_MINOR/a,T=Math.sqrt(1-m*m),N=T*Math.sin(u),H=Math.tan(Math.PI/4-u/2)/Math.pow((1-N)/(1+N),T/2);return u=-a*Math.log(Math.max(H,1e-10)),new U(t.lng*i*a,u)},unproject:function(t){for(var i=180/Math.PI,a=this.R,u=this.R_MINOR/a,m=Math.sqrt(1-u*u),T=Math.exp(-t.y/a),N=Math.PI/2-2*Math.atan(T),H=0,V=.1,it;H<15&&Math.abs(V)>1e-7;H++)it=m*Math.sin(N),it=Math.pow((1-it)/(1+it),m/2),V=Math.PI/2-2*Math.atan(T*it)-N,N+=V;return new It(N*i,t.x*i/a)}},br={__proto__:null,LonLat:vo,Mercator:vr,SphericalMercator:re},bo=s({},fe,{code:"EPSG:3395",projection:vr,transformation:function(){var t=.5/(Math.PI*vr.R);return qt(t,.5,-t,.5)}()}),yo=s({},fe,{code:"EPSG:4326",projection:vo,transformation:qt(1/180,1,-1/180,.5)}),tl=s({},Gt,{projection:vo,transformation:qt(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,i){var a=i.lng-t.lng,u=i.lat-t.lat;return Math.sqrt(a*a+u*u)},infinite:!0});Gt.Earth=fe,Gt.EPSG3395=bo,Gt.EPSG3857=ye,Gt.EPSG900913=ht,Gt.EPSG4326=yo,Gt.Simple=tl;var nn=ct.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[p(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[p(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var i=t.target;if(!!i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var a=this.getEvents();i.on(a,this),this.once("remove",function(){i.off(a,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});Qt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var i=p(t);return this._layers[i]?this:(this._layers[i]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var i=p(t);return this._layers[i]?(this._loaded&&t.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return p(t)in this._layers},eachLayer:function(t,i){for(var a in this._layers)t.call(i,this._layers[a]);return this},_addLayers:function(t){t=t?S(t)?t:[t]:[];for(var i=0,a=t.length;i<a;i++)this.addLayer(t[i])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[p(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var i=p(t);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,i=-1/0,a=this._getZoomSpan();for(var u in this._zoomBoundLayers){var m=this._zoomBoundLayers[u].options;t=m.minZoom===void 0?t:Math.min(t,m.minZoom),i=m.maxZoom===void 0?i:Math.max(i,m.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=t===1/0?void 0:t,a!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var gi=nn.extend({initialize:function(t,i){v(this,i),this._layers={};var a,u;if(t)for(a=0,u=t.length;a<u;a++)this.addLayer(t[a])},addLayer:function(t){var i=this.getLayerId(t);return this._layers[i]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var i=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(t){var i=typeof t=="number"?t:this.getLayerId(t);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var i=Array.prototype.slice.call(arguments,1),a,u;for(a in this._layers)u=this._layers[a],u[t]&&u[t].apply(u,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,i){for(var a in this._layers)t.call(i,this._layers[a]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return p(t)}}),ka=function(t,i){return new gi(t,i)},vi=gi.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),gi.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),gi.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Et;for(var i in this._layers){var a=this._layers[i];t.extend(a.getBounds?a.getBounds():a.getLatLng())}return t}}),Fi=function(t,i){return new vi(t,i)},bi=lt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){v(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,i){var a=this._getIconUrl(t);if(!a){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var u=this._createImg(a,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(u,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),u},_setIconStyles:function(t,i){var a=this.options,u=a[i+"Size"];typeof u=="number"&&(u=[u,u]);var m=W(u),T=W(i==="shadow"&&a.shadowAnchor||a.iconAnchor||m&&m.divideBy(2,!0));t.className="leaflet-marker-"+i+" "+(a.className||""),T&&(t.style.marginLeft=-T.x+"px",t.style.marginTop=-T.y+"px"),m&&(t.style.width=m.x+"px",t.style.height=m.y+"px")},_createImg:function(t,i){return i=i||document.createElement("img"),i.src=t,i},_getIconUrl:function(t){return wt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function el(t){return new bi(t)}var $i=bi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof $i.imagePath!="string"&&($i.imagePath=this._detectIconPath()),(this.options.imagePath||$i.imagePath)+bi.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var i=function(a,u,m){var T=u.exec(a);return T&&T[m]};return t=i(t,/^url\((['"])?(.+)\1\)$/,2),t&&i(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Jt("div","leaflet-default-icon-path",document.body),i=gn(t,"background-image")||gn(t,"backgroundImage");if(document.body.removeChild(t),i=this._stripUrl(i),i)return i;var a=document.querySelector('link[href$="leaflet.css"]');return a?a.href.substring(0,a.href.length-11-1):""}}),Pa=bn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Gn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ht(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Le(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var i=this._marker,a=i._map,u=this._marker.options.autoPanSpeed,m=this._marker.options.autoPanPadding,T=Qn(i._icon),N=a.getPixelBounds(),H=a.getPixelOrigin(),V=$t(N.min._subtract(H).add(m),N.max._subtract(H).subtract(m));if(!V.contains(T)){var it=W((Math.max(V.max.x,T.x)-V.max.x)/(N.max.x-V.max.x)-(Math.min(V.min.x,T.x)-V.min.x)/(N.min.x-V.min.x),(Math.max(V.max.y,T.y)-V.max.y)/(N.max.y-V.max.y)-(Math.min(V.min.y,T.y)-V.min.y)/(N.min.y-V.min.y)).multiplyBy(u);a.panBy(it,{animate:!1}),this._draggable._newPos._add(it),this._draggable._startPos._add(it),Te(i._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ut(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(X(this._panRequest),this._panRequest=ut(this._adjustPan.bind(this,t)))},_onDrag:function(t){var i=this._marker,a=i._shadow,u=Qn(i._icon),m=i._map.layerPointToLatLng(u);a&&Te(a,u),i._latlng=m,t.latlng=m,t.oldLatLng=this._oldLatLng,i.fire("move",t).fire("drag",t)},_onDragEnd:function(t){X(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),yr=nn.extend({options:{icon:new $i,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,i){v(this,i),this._latlng=Lt(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var i=this._latlng;return this._latlng=Lt(t),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),a=t.icon.createIcon(this._icon),u=!1;a!==this._icon&&(this._icon&&this._removeIcon(),u=!0,t.title&&(a.title=t.title),a.tagName==="IMG"&&(a.alt=t.alt||"")),Ht(a,i),t.keyboard&&(a.tabIndex="0",a.setAttribute("role","button")),this._icon=a,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Zt(a,"focus",this._panOnFocus,this);var m=t.icon.createShadow(this._shadow),T=!1;m!==this._shadow&&(this._removeShadow(),T=!0),m&&(Ht(m,i),m.alt=""),this._shadow=m,t.opacity<1&&this._updateOpacity(),u&&this.getPane().appendChild(this._icon),this._initInteraction(),m&&T&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&he(this._icon,"focus",this._panOnFocus,this),pe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&pe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Te(this._icon,t),this._shadow&&Te(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(i)},_initInteraction:function(){if(!!this.options.interactive&&(Ht(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Pa)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Pa(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&tn(this._icon,t),this._shadow&&tn(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(!!t){var i=this.options.icon.options,a=i.iconSize?W(i.iconSize):W(0,0),u=i.iconAnchor?W(i.iconAnchor):W(0,0);t.panInside(this._latlng,{paddingTopLeft:u,paddingBottomRight:a.subtract(u)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function nl(t,i){return new yr(t,i)}var Wn=nn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return v(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),wr=Wn.extend({options:{fill:!0,radius:10},initialize:function(t,i){v(this,i),this._latlng=Lt(t),this._radius=this.options.radius},setLatLng:function(t){var i=this._latlng;return this._latlng=Lt(t),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var i=t&&t.radius||this._radius;return Wn.prototype.setStyle.call(this,t),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,i=this._radiusY||t,a=this._clickTolerance(),u=[t+a,i+a];this._pxBounds=new mt(this._point.subtract(u),this._point.add(u))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function il(t,i){return new wr(t,i)}var xr=wr.extend({initialize:function(t,i,a){if(typeof i=="number"&&(i=s({},a,{radius:i})),v(this,i),this._latlng=Lt(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Et(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Wn.prototype.setStyle,_project:function(){var t=this._latlng.lng,i=this._latlng.lat,a=this._map,u=a.options.crs;if(u.distance===fe.distance){var m=Math.PI/180,T=this._mRadius/fe.R/m,N=a.project([i+T,t]),H=a.project([i-T,t]),V=N.add(H).divideBy(2),it=a.unproject(V).lat,vt=Math.acos((Math.cos(T*m)-Math.sin(i*m)*Math.sin(it*m))/(Math.cos(i*m)*Math.cos(it*m)))/m;(isNaN(vt)||vt===0)&&(vt=T/Math.cos(Math.PI/180*i)),this._point=V.subtract(a.getPixelOrigin()),this._radius=isNaN(vt)?0:V.x-a.project([it,t-vt]).x,this._radiusY=V.y-N.y}else{var Wt=u.unproject(u.project(this._latlng).subtract([this._mRadius,0]));this._point=a.latLngToLayerPoint(this._latlng),this._radius=this._point.x-a.latLngToLayerPoint(Wt).x}this._updateBounds()}});function Ma(t,i,a){return new xr(t,i,a)}var Sn=Wn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,i){v(this,i),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var i=1/0,a=null,u=_i,m,T,N=0,H=this._parts.length;N<H;N++)for(var V=this._parts[N],it=1,vt=V.length;it<vt;it++){m=V[it-1],T=V[it];var Wt=u(t,m,T,!0);Wt<i&&(i=Wt,a=u(t,m,T))}return a&&(a.distance=Math.sqrt(i)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,a,u,m,T,N,H=this._rings[0],V=H.length;if(!V)return null;for(t=0,i=0;t<V-1;t++)i+=H[t].distanceTo(H[t+1])/2;if(i===0)return this._map.layerPointToLatLng(H[0]);for(t=0,u=0;t<V-1;t++)if(m=H[t],T=H[t+1],a=m.distanceTo(T),u+=a,u>i)return N=(u-i)/a,this._map.layerPointToLatLng([T.x-N*(T.x-m.x),T.y-N*(T.y-m.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,i){return i=i||this._defaultShape(),t=Lt(t),i.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Et,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Cn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var i=[],a=Cn(t),u=0,m=t.length;u<m;u++)a?(i[u]=Lt(t[u]),this._bounds.extend(i[u])):i[u]=this._convertLatLngs(t[u]);return i},_project:function(){var t=new mt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),i=new U(t,t);!this._rawPxBounds||(this._pxBounds=new mt([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(t,i,a){var u=t[0]instanceof It,m=t.length,T,N;if(u){for(N=[],T=0;T<m;T++)N[T]=this._map.latLngToLayerPoint(t[T]),a.extend(N[T]);i.push(N)}else for(T=0;T<m;T++)this._projectLatlngs(t[T],i,a)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,a,u,m,T,N,H,V;for(a=0,m=0,T=this._rings.length;a<T;a++)for(V=this._rings[a],u=0,N=V.length;u<N-1;u++)H=ya(V[u],V[u+1],t,u,!0),H&&(i[m]=i[m]||[],i[m].push(H[0]),(H[1]!==V[u+1]||u===N-2)&&(i[m].push(H[1]),m++))}},_simplifyPoints:function(){for(var t=this._parts,i=this.options.smoothFactor,a=0,u=t.length;a<u;a++)t[a]=va(t[a],i)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,i){var a,u,m,T,N,H,V=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(a=0,T=this._parts.length;a<T;a++)for(H=this._parts[a],u=0,N=H.length,m=N-1;u<N;m=u++)if(!(!i&&u===0)&&ba(t,H[m],H[u])<=V)return!0;return!1}});function rl(t,i){return new Sn(t,i)}Sn._flat=wa;var yi=Sn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,i,a,u,m,T,N,H,V,it=this._rings[0],vt=it.length;if(!vt)return null;for(T=N=H=0,t=0,i=vt-1;t<vt;i=t++)a=it[t],u=it[i],m=a.y*u.x-u.y*a.x,N+=(a.x+u.x)*m,H+=(a.y+u.y)*m,T+=m*3;return T===0?V=it[0]:V=[N/T,H/T],this._map.layerPointToLatLng(V)},_convertLatLngs:function(t){var i=Sn.prototype._convertLatLngs.call(this,t),a=i.length;return a>=2&&i[0]instanceof It&&i[0].equals(i[a-1])&&i.pop(),i},_setLatLngs:function(t){Sn.prototype._setLatLngs.call(this,t),Cn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Cn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,i=this.options.weight,a=new U(i,i);if(t=new mt(t.min.subtract(a),t.max.add(a)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var u=0,m=this._rings.length,T;u<m;u++)T=xa(this._rings[u],t,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var i=!1,a,u,m,T,N,H,V,it;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(T=0,V=this._parts.length;T<V;T++)for(a=this._parts[T],N=0,it=a.length,H=it-1;N<it;H=N++)u=a[N],m=a[H],u.y>t.y!=m.y>t.y&&t.x<(m.x-u.x)*(t.y-u.y)/(m.y-u.y)+u.x&&(i=!i);return i||Sn.prototype._containsPoint.call(this,t,!0)}});function wo(t,i){return new yi(t,i)}var yn=vi.extend({initialize:function(t,i){v(this,i),this._layers={},t&&this.addData(t)},addData:function(t){var i=S(t)?t:t.features,a,u,m;if(i){for(a=0,u=i.length;a<u;a++)m=i[a],(m.geometries||m.geometry||m.features||m.coordinates)&&this.addData(m);return this}var T=this.options;if(T.filter&&!T.filter(t))return this;var N=kr(t,T);return N?(N.feature=Mr(t),N.defaultOptions=N.options,this.resetStyle(N),T.onEachFeature&&T.onEachFeature(t,N),this.addLayer(N)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=s({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(i){this._setLayerStyle(i,t)},this)},_setLayerStyle:function(t,i){t.setStyle&&(typeof i=="function"&&(i=i(t.feature)),t.setStyle(i))}});function kr(t,i){var a=t.type==="Feature"?t.geometry:t,u=a?a.coordinates:null,m=[],T=i&&i.pointToLayer,N=i&&i.coordsToLatLng||Pr,H,V,it,vt;if(!u&&!a)return null;switch(a.type){case"Point":return H=N(u),xo(T,t,H,i);case"MultiPoint":for(it=0,vt=u.length;it<vt;it++)H=N(u[it]),m.push(xo(T,t,H,i));return new vi(m);case"LineString":case"MultiLineString":return V=ni(u,a.type==="LineString"?0:1,N),new Sn(V,i);case"Polygon":case"MultiPolygon":return V=ni(u,a.type==="Polygon"?1:2,N),new yi(V,i);case"GeometryCollection":for(it=0,vt=a.geometries.length;it<vt;it++){var Wt=kr({geometry:a.geometries[it],type:"Feature",properties:t.properties},i);Wt&&m.push(Wt)}return new vi(m);default:throw new Error("Invalid GeoJSON object.")}}function xo(t,i,a,u){return t?t(i,a):new yr(a,u&&u.markersInheritOptions&&u)}function Pr(t){return new It(t[1],t[0],t[2])}function ni(t,i,a){for(var u=[],m=0,T=t.length,N;m<T;m++)N=i?ni(t[m],i-1,a):(a||Pr)(t[m]),u.push(N);return u}function ko(t,i){return t=Lt(t),t.alt!==void 0?[g(t.lng,i),g(t.lat,i),g(t.alt,i)]:[g(t.lng,i),g(t.lat,i)]}function Hi(t,i,a,u){for(var m=[],T=0,N=t.length;T<N;T++)m.push(i?Hi(t[T],i-1,a,u):ko(t[T],u));return!i&&a&&m.push(m[0]),m}function wi(t,i){return t.feature?s({},t.feature,{geometry:i}):Mr(i)}function Mr(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Po={toGeoJSON:function(t){return wi(this,{type:"Point",coordinates:ko(this.getLatLng(),t)})}};yr.include(Po),xr.include(Po),wr.include(Po),Sn.include({toGeoJSON:function(t){var i=!Cn(this._latlngs),a=Hi(this._latlngs,i?1:0,!1,t);return wi(this,{type:(i?"Multi":"")+"LineString",coordinates:a})}}),yi.include({toGeoJSON:function(t){var i=!Cn(this._latlngs),a=i&&!Cn(this._latlngs[0]),u=Hi(this._latlngs,a?2:i?1:0,!0,t);return i||(u=[u]),wi(this,{type:(a?"Multi":"")+"Polygon",coordinates:u})}}),gi.include({toMultiPoint:function(t){var i=[];return this.eachLayer(function(a){i.push(a.toGeoJSON(t).geometry.coordinates)}),wi(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(t){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(t);var a=i==="GeometryCollection",u=[];return this.eachLayer(function(m){if(m.toGeoJSON){var T=m.toGeoJSON(t);if(a)u.push(T.geometry);else{var N=Mr(T);N.type==="FeatureCollection"?u.push.apply(u,N.features):u.push(N)}}}),a?wi(this,{geometries:u,type:"GeometryCollection"}):{type:"FeatureCollection",features:u}}});function La(t,i){return new yn(t,i)}var ol=La,xi=nn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,i,a){this._url=t,this._bounds=At(i),v(this,a)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ht(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){pe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&di(this._image),this},bringToBack:function(){return this._map&&pi(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=At(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",i=this._image=t?this._url:Jt("img");if(Ht(i,"leaflet-image-layer"),this._zoomAnimated&&Ht(i,"leaflet-zoom-animated"),this.options.className&&Ht(i,this.options.className),i.onselectstart=y,i.onmousemove=y,i.onload=l(this.fire,this,"load"),i.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(t){var i=this._map.getZoomScale(t.zoom),a=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Hn(this._image,a,i)},_reset:function(){var t=this._image,i=new mt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),a=i.getSize();Te(t,i.min),t.style.width=a.x+"px",t.style.height=a.y+"px"},_updateOpacity:function(){tn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Lr=function(t,i,a){return new xi(t,i,a)},Tr=xi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",i=this._image=t?this._url:Jt("video");if(Ht(i,"leaflet-image-layer"),this._zoomAnimated&&Ht(i,"leaflet-zoom-animated"),this.options.className&&Ht(i,this.options.className),i.onselectstart=y,i.onmousemove=y,i.onloadeddata=l(this.fire,this,"load"),t){for(var a=i.getElementsByTagName("source"),u=[],m=0;m<a.length;m++)u.push(a[m].src);this._url=a.length>0?u:[i.src];return}S(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var N=Jt("source");N.src=this._url[T],i.appendChild(N)}}});function al(t,i,a){return new Tr(t,i,a)}var Ta=xi.extend({_initImage:function(){var t=this._image=this._url;Ht(t,"leaflet-image-layer"),this._zoomAnimated&&Ht(t,"leaflet-zoom-animated"),this.options.className&&Ht(t,this.options.className),t.onselectstart=y,t.onmousemove=y}});function Mo(t,i,a){return new Ta(t,i,a)}var wn=nn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(t,i){v(this,t),this._source=i},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&tn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&tn(this._container,1),this.bringToFront(),this.options.interactive&&(Ht(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(tn(this._container,0),this._removeTimeout=setTimeout(l(pe,void 0,this._container),200)):pe(this._container),this.options.interactive&&(Le(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=Lt(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&di(this._container),this},bringToBack:function(){return this._map&&pi(this._container),this},_prepareOpen:function(t){var i=this._source;if(!i._map)return!1;if(i instanceof vi){i=null;var a=this._source._layers;for(var u in a)if(a[u]._map){i=a[u];break}if(!i)return!1;this._source=i}if(!t)if(i.getCenter)t=i.getCenter();else if(i.getLatLng)t=i.getLatLng();else if(i.getBounds)t=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(!!this._content){var t=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")t.innerHTML=i;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var t=this._map.latLngToLayerPoint(this._latlng),i=W(this.options.offset),a=this._getAnchor();this._zoomAnimated?Te(this._container,t.add(a)):i=i.add(t).add(a);var u=this._containerBottom=-i.y,m=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=u+"px",this._container.style.left=m+"px"}},_getAnchor:function(){return[0,0]}});Qt.include({_initOverlay:function(t,i,a,u){var m=i;return m instanceof t||(m=new t(u).setContent(i)),a&&m.setLatLng(a),m}}),nn.include({_initOverlay:function(t,i,a,u){var m=a;return m instanceof t?(v(m,u),m._source=this):(m=i&&!u?i:new t(u,this),m.setContent(a)),m}});var Cr=wn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,wn.prototype.openOn.call(this,t)},onAdd:function(t){wn.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Wn||this._source.on("preclick",Tn))},onRemove:function(t){wn.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Wn||this._source.off("preclick",Tn))},getEvents:function(){var t=wn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",i=this._container=Jt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),a=this._wrapper=Jt("div",t+"-content-wrapper",i);if(this._contentNode=Jt("div",t+"-content",a),Zi(i),Ri(this._contentNode),Zt(i,"contextmenu",Tn),this._tipContainer=Jt("div",t+"-tip-container",i),this._tip=Jt("div",t+"-tip",this._tipContainer),this.options.closeButton){var u=this._closeButton=Jt("a",t+"-close-button",i);u.setAttribute("role","button"),u.setAttribute("aria-label","Close popup"),u.href="#close",u.innerHTML='<span aria-hidden="true">&#215;</span>',Zt(u,"click",this.close,this)}},_updateLayout:function(){var t=this._contentNode,i=t.style;i.width="",i.whiteSpace="nowrap";var a=t.offsetWidth;a=Math.min(a,this.options.maxWidth),a=Math.max(a,this.options.minWidth),i.width=a+1+"px",i.whiteSpace="",i.height="";var u=t.offsetHeight,m=this.options.maxHeight,T="leaflet-popup-scrolled";m&&u>m?(i.height=m+"px",Ht(t,T)):Le(t,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),a=this._getAnchor();Te(this._container,i.add(a))},_adjustPan:function(t){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var i=this._map,a=parseInt(gn(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+a,m=this._containerWidth,T=new U(this._containerLeft,-u-this._containerBottom);T._add(Qn(this._container));var N=i.layerPointToContainerPoint(T),H=W(this.options.autoPanPadding),V=W(this.options.autoPanPaddingTopLeft||H),it=W(this.options.autoPanPaddingBottomRight||H),vt=i.getSize(),Wt=0,te=0;N.x+m+it.x>vt.x&&(Wt=N.x+m-vt.x+it.x),N.x-Wt-V.x<0&&(Wt=N.x-V.x),N.y+u+it.y>vt.y&&(te=N.y+u-vt.y+it.y),N.y-te-V.y<0&&(te=N.y-V.y),(Wt||te)&&i.fire("autopanstart").panBy([Wt,te],{animate:t&&t.type==="moveend"})}},_getAnchor:function(){return W(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),sl=function(t,i){return new Cr(t,i)};Qt.mergeOptions({closePopupOnClick:!0}),Qt.include({openPopup:function(t,i,a){return this._initOverlay(Cr,t,i,a).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),nn.include({bindPopup:function(t,i){return this._popup=this._initOverlay(Cr,this._popup,t,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&this._popup._prepareOpen(t)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){en(t);var i=t.layer||t.target;if(this._popup._source===i&&!(i instanceof Wn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=i,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Gi=wn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){wn.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){wn.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=wn.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",i=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Jt("div",i)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var i,a,u=this._map,m=this._container,T=u.latLngToContainerPoint(u.getCenter()),N=u.layerPointToContainerPoint(t),H=this.options.direction,V=m.offsetWidth,it=m.offsetHeight,vt=W(this.options.offset),Wt=this._getAnchor();H==="top"?(i=V/2,a=it):H==="bottom"?(i=V/2,a=0):H==="center"?(i=V/2,a=it/2):H==="right"?(i=0,a=it/2):H==="left"?(i=V,a=it/2):N.x<T.x?(H="right",i=0,a=it/2):(H="left",i=V+(vt.x+Wt.x)*2,a=it/2),t=t.subtract(W(i,a,!0)).add(vt).add(Wt),Le(m,"leaflet-tooltip-right"),Le(m,"leaflet-tooltip-left"),Le(m,"leaflet-tooltip-top"),Le(m,"leaflet-tooltip-bottom"),Ht(m,"leaflet-tooltip-"+H),Te(m,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&tn(this._container,t)},_animateZoom:function(t){var i=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(i)},_getAnchor:function(){return W(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Lo=function(t,i){return new Gi(t,i)};Qt.include({openTooltip:function(t,i,a){return this._initOverlay(Gi,t,i,a).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),nn.include({bindTooltip:function(t,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Gi,this._tooltip,t,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var i=t?"off":"on",a={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?a.add=this._openTooltip:(a.mouseover=this._openTooltip,a.mouseout=this.closeTooltip,a.click=this._openTooltip),this._tooltip.options.sticky&&(a.mousemove=this._moveTooltip),this[i](a),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&this._tooltip._prepareOpen(t)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var i=t.latlng,a,u;this._tooltip.options.sticky&&t.originalEvent&&(a=this._map.mouseEventToContainerPoint(t.originalEvent),u=this._map.containerPointToLayerPoint(a),i=this._map.layerPointToLatLng(u)),this._tooltip.setLatLng(i)}});var Ca=bi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var i=t&&t.tagName==="DIV"?t:document.createElement("div"),a=this.options;if(a.html instanceof Element?(hr(i),i.appendChild(a.html)):i.innerHTML=a.html!==!1?a.html:"",a.bgPos){var u=W(a.bgPos);i.style.backgroundPosition=-u.x+"px "+-u.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function Sr(t){return new Ca(t)}bi.Default=$i;var Wi=nn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:wt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){v(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),pe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(di(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof U?t:new U(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var i=this.getPane().children,a=-t(-1/0,1/0),u=0,m=i.length,T;u<m;u++)T=i[u].style.zIndex,i[u]!==this._container&&T&&(a=t(a,+T));isFinite(a)&&(this.options.zIndex=a+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!wt.ielt9){tn(this._container,this.options.opacity);var t=+new Date,i=!1,a=!1;for(var u in this._tiles){var m=this._tiles[u];if(!(!m.current||!m.loaded)){var T=Math.min(1,(t-m.loaded)/200);tn(m.el,T),T<1?i=!0:(m.active?a=!0:this._onOpaqueTile(m),m.active=!0)}}a&&!this._noPrune&&this._pruneTiles(),i&&(X(this._fadeFrame),this._fadeFrame=ut(this._updateOpacity,this))}},_onOpaqueTile:y,_initContainer:function(){this._container||(this._container=Jt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,i=this.options.maxZoom;if(t!==void 0){for(var a in this._levels)a=Number(a),this._levels[a].el.children.length||a===t?(this._levels[a].el.style.zIndex=i-Math.abs(t-a),this._onUpdateLevel(a)):(pe(this._levels[a].el),this._removeTilesAtZoom(a),this._onRemoveLevel(a),delete this._levels[a]);var u=this._levels[t],m=this._map;return u||(u=this._levels[t]={},u.el=Jt("div","leaflet-tile-container leaflet-zoom-animated",this._container),u.el.style.zIndex=i,u.origin=m.project(m.unproject(m.getPixelOrigin()),t).round(),u.zoom=t,this._setZoomTransform(u,m.getCenter(),m.getZoom()),y(u.el.offsetWidth),this._onCreateLevel(u)),this._level=u,u}},_onUpdateLevel:y,_onRemoveLevel:y,_onCreateLevel:y,_pruneTiles:function(){if(!!this._map){var t,i,a=this._map.getZoom();if(a>this.options.maxZoom||a<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)i=this._tiles[t],i.retain=i.current;for(t in this._tiles)if(i=this._tiles[t],i.current&&!i.active){var u=i.coords;this._retainParent(u.x,u.y,u.z,u.z-5)||this._retainChildren(u.x,u.y,u.z,u.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var i in this._tiles)this._tiles[i].coords.z===t&&this._removeTile(i)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)pe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,i,a,u){var m=Math.floor(t/2),T=Math.floor(i/2),N=a-1,H=new U(+m,+T);H.z=+N;var V=this._tileCoordsToKey(H),it=this._tiles[V];return it&&it.active?(it.retain=!0,!0):(it&&it.loaded&&(it.retain=!0),N>u?this._retainParent(m,T,N,u):!1)},_retainChildren:function(t,i,a,u){for(var m=2*t;m<2*t+2;m++)for(var T=2*i;T<2*i+2;T++){var N=new U(m,T);N.z=a+1;var H=this._tileCoordsToKey(N),V=this._tiles[H];if(V&&V.active){V.retain=!0;continue}else V&&V.loaded&&(V.retain=!0);a+1<u&&this._retainChildren(m,T,a+1,u)}},_resetView:function(t){var i=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var i=this.options;return i.minNativeZoom!==void 0&&t<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<t?i.maxNativeZoom:t},_setView:function(t,i,a,u){var m=Math.round(i);this.options.maxZoom!==void 0&&m>this.options.maxZoom||this.options.minZoom!==void 0&&m<this.options.minZoom?m=void 0:m=this._clampZoom(m);var T=this.options.updateWhenZooming&&m!==this._tileZoom;(!u||T)&&(this._tileZoom=m,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),m!==void 0&&this._update(t),a||this._pruneTiles(),this._noPrune=!!a),this._setZoomTransforms(t,i)},_setZoomTransforms:function(t,i){for(var a in this._levels)this._setZoomTransform(this._levels[a],t,i)},_setZoomTransform:function(t,i,a){var u=this._map.getZoomScale(a,t.zoom),m=t.origin.multiplyBy(u).subtract(this._map._getNewPixelOrigin(i,a)).round();wt.any3d?Hn(t.el,m,u):Te(t.el,m)},_resetGrid:function(){var t=this._map,i=t.options.crs,a=this._tileSize=this.getTileSize(),u=this._tileZoom,m=this._map.getPixelWorldBounds(this._tileZoom);m&&(this._globalTileRange=this._pxBoundsToTileRange(m)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,i.wrapLng[0]],u).x/a.x),Math.ceil(t.project([0,i.wrapLng[1]],u).x/a.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([i.wrapLat[0],0],u).y/a.x),Math.ceil(t.project([i.wrapLat[1],0],u).y/a.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var i=this._map,a=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),u=i.getZoomScale(a,this._tileZoom),m=i.project(t,this._tileZoom).floor(),T=i.getSize().divideBy(u*2);return new mt(m.subtract(T),m.add(T))},_update:function(t){var i=this._map;if(!!i){var a=this._clampZoom(i.getZoom());if(t===void 0&&(t=i.getCenter()),this._tileZoom!==void 0){var u=this._getTiledPixelBounds(t),m=this._pxBoundsToTileRange(u),T=m.getCenter(),N=[],H=this.options.keepBuffer,V=new mt(m.getBottomLeft().subtract([H,-H]),m.getTopRight().add([H,-H]));if(!(isFinite(m.min.x)&&isFinite(m.min.y)&&isFinite(m.max.x)&&isFinite(m.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var it in this._tiles){var vt=this._tiles[it].coords;(vt.z!==this._tileZoom||!V.contains(new U(vt.x,vt.y)))&&(this._tiles[it].current=!1)}if(Math.abs(a-this._tileZoom)>1){this._setView(t,a);return}for(var Wt=m.min.y;Wt<=m.max.y;Wt++)for(var te=m.min.x;te<=m.max.x;te++){var fn=new U(te,Wt);if(fn.z=this._tileZoom,!!this._isValidTile(fn)){var Ae=this._tiles[this._tileCoordsToKey(fn)];Ae?Ae.current=!0:N.push(fn)}}if(N.sort(function(In,ki){return In.distanceTo(T)-ki.distanceTo(T)}),N.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Vi=document.createDocumentFragment();for(te=0;te<N.length;te++)this._addTile(N[te],Vi);this._level.el.appendChild(Vi)}}}},_isValidTile:function(t){var i=this._map.options.crs;if(!i.infinite){var a=this._globalTileRange;if(!i.wrapLng&&(t.x<a.min.x||t.x>a.max.x)||!i.wrapLat&&(t.y<a.min.y||t.y>a.max.y))return!1}if(!this.options.bounds)return!0;var u=this._tileCoordsToBounds(t);return At(this.options.bounds).overlaps(u)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var i=this._map,a=this.getTileSize(),u=t.scaleBy(a),m=u.add(a),T=i.unproject(u,t.z),N=i.unproject(m,t.z);return[T,N]},_tileCoordsToBounds:function(t){var i=this._tileCoordsToNwSe(t),a=new Et(i[0],i[1]);return this.options.noWrap||(a=this._map.wrapLatLngBounds(a)),a},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var i=t.split(":"),a=new U(+i[0],+i[1]);return a.z=+i[2],a},_removeTile:function(t){var i=this._tiles[t];!i||(pe(i.el),delete this._tiles[t],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Ht(t,"leaflet-tile");var i=this.getTileSize();t.style.width=i.x+"px",t.style.height=i.y+"px",t.onselectstart=y,t.onmousemove=y,wt.ielt9&&this.options.opacity<1&&tn(t,this.options.opacity)},_addTile:function(t,i){var a=this._getTilePos(t),u=this._tileCoordsToKey(t),m=this.createTile(this._wrapCoords(t),l(this._tileReady,this,t));this._initTile(m),this.createTile.length<2&&ut(l(this._tileReady,this,t,null,m)),Te(m,a),this._tiles[u]={el:m,coords:t,current:!0},i.appendChild(m),this.fire("tileloadstart",{tile:m,coords:t})},_tileReady:function(t,i,a){i&&this.fire("tileerror",{error:i,tile:a,coords:t});var u=this._tileCoordsToKey(t);a=this._tiles[u],a&&(a.loaded=+new Date,this._map._fadeAnimated?(tn(a.el,0),X(this._fadeFrame),this._fadeFrame=ut(this._updateOpacity,this)):(a.active=!0,this._pruneTiles()),i||(Ht(a.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:a.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),wt.ielt9||!this._map._fadeAnimated?ut(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var i=new U(this._wrapX?b(t.x,this._wrapX):t.x,this._wrapY?b(t.y,this._wrapY):t.y);return i.z=t.z,i},_pxBoundsToTileRange:function(t){var i=this.getTileSize();return new mt(t.min.unscaleBy(i).floor(),t.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function ll(t){return new Wi(t)}var ii=Wi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,i){this._url=t,i=v(this,i),i.detectRetina&&wt.retina&&i.maxZoom>0&&(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom++):(i.zoomOffset++,i.maxZoom--),i.minZoom=Math.max(0,i.minZoom)),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,i){return this._url===t&&i===void 0&&(i=!0),this._url=t,i||this.redraw(),this},createTile:function(t,i){var a=document.createElement("img");return Zt(a,"load",l(this._tileOnLoad,this,i,a)),Zt(a,"error",l(this._tileOnError,this,i,a)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(a.referrerPolicy=this.options.referrerPolicy),a.alt="",a.setAttribute("role","presentation"),a.src=this.getTileUrl(t),a},getTileUrl:function(t){var i={r:wt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var a=this._globalTileRange.max.y-t.y;this.options.tms&&(i.y=a),i["-y"]=a}return E(this._url,s(i,this.options))},_tileOnLoad:function(t,i){wt.ielt9?setTimeout(l(t,this,null,i),0):t(null,i)},_tileOnError:function(t,i,a){var u=this.options.errorTileUrl;u&&i.getAttribute("src")!==u&&(i.src=u),t(a,i)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,i=this.options.maxZoom,a=this.options.zoomReverse,u=this.options.zoomOffset;return a&&(t=i-t),t+u},_getSubdomain:function(t){var i=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var t,i;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(i=this._tiles[t].el,i.onload=y,i.onerror=y,!i.complete)){i.src=O;var a=this._tiles[t].coords;pe(i),delete this._tiles[t],this.fire("tileabort",{tile:i,coords:a})}},_removeTile:function(t){var i=this._tiles[t];if(!!i)return i.el.setAttribute("src",O),Wi.prototype._removeTile.call(this,t)},_tileReady:function(t,i,a){if(!(!this._map||a&&a.getAttribute("src")===O))return Wi.prototype._tileReady.call(this,t,i,a)}});function Er(t,i){return new ii(t,i)}var Sa=ii.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,i){this._url=t;var a=s({},this.defaultWmsParams);for(var u in i)u in this.options||(a[u]=i[u]);i=v(this,i);var m=i.detectRetina&&wt.retina?2:1,T=this.getTileSize();a.width=T.x*m,a.height=T.y*m,this.wmsParams=a},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,ii.prototype.onAdd.call(this,t)},getTileUrl:function(t){var i=this._tileCoordsToNwSe(t),a=this._crs,u=$t(a.project(i[0]),a.project(i[1])),m=u.min,T=u.max,N=(this._wmsVersion>=1.3&&this._crs===yo?[m.y,m.x,T.y,T.x]:[m.x,m.y,T.x,T.y]).join(","),H=ii.prototype.getTileUrl.call(this,t);return H+C(this.wmsParams,H,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+N},setParams:function(t,i){return s(this.wmsParams,t),i||this.redraw(),this}});function ul(t,i){return new Sa(t,i)}ii.WMS=Sa,Er.wms=ul;var En=nn.extend({options:{padding:.1},initialize:function(t){v(this,t),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Ht(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,i){var a=this._map.getZoomScale(i,this._zoom),u=this._map.getSize().multiplyBy(.5+this.options.padding),m=this._map.project(this._center,i),T=u.multiplyBy(-a).add(m).subtract(this._map._getNewPixelOrigin(t,i));wt.any3d?Hn(this._container,T,a):Te(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,i=this._map.getSize(),a=this._map.containerPointToLayerPoint(i.multiplyBy(-t)).round();this._bounds=new mt(a,a.add(i.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),To=En.extend({options:{tolerance:0},getEvents:function(){var t=En.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){En.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Zt(t,"mousemove",this._onMouseMove,this),Zt(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Zt(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){X(this._redrawRequest),delete this._ctx,pe(this._container),he(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var i in this._layers)t=this._layers[i],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){En.prototype._update.call(this);var t=this._bounds,i=this._container,a=t.getSize(),u=wt.retina?2:1;Te(i,t.min),i.width=u*a.x,i.height=u*a.y,i.style.width=a.x+"px",i.style.height=a.y+"px",wt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){En.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[p(t)]=t;var i=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var i=t._order,a=i.next,u=i.prev;a?a.prev=u:this._drawLast=u,u?u.next=a:this._drawFirst=a,delete t._order,delete this._layers[p(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var i=t.options.dashArray.split(/[, ]+/),a=[],u,m;for(m=0;m<i.length;m++){if(u=Number(i[m]),isNaN(u))return;a.push(u)}t.options._dashArray=a}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){!this._map||(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ut(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var i=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new mt,this._redrawBounds.extend(t._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(t._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var i=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,i=this._redrawBounds;if(this._ctx.save(),i){var a=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,a.x,a.y),this._ctx.clip()}this._drawing=!0;for(var u=this._drawFirst;u;u=u.next)t=u.layer,(!i||t._pxBounds&&t._pxBounds.intersects(i))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,i){if(!!this._drawing){var a,u,m,T,N=t._parts,H=N.length,V=this._ctx;if(!!H){for(V.beginPath(),a=0;a<H;a++){for(u=0,m=N[a].length;u<m;u++)T=N[a][u],V[u?"lineTo":"moveTo"](T.x,T.y);i&&V.closePath()}this._fillStroke(V,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var i=t._point,a=this._ctx,u=Math.max(Math.round(t._radius),1),m=(Math.max(Math.round(t._radiusY),1)||u)/u;m!==1&&(a.save(),a.scale(1,m)),a.beginPath(),a.arc(i.x,i.y/m,u,0,Math.PI*2,!1),m!==1&&a.restore(),this._fillStroke(a,t)}},_fillStroke:function(t,i){var a=i.options;a.fill&&(t.globalAlpha=a.fillOpacity,t.fillStyle=a.fillColor||a.color,t.fill(a.fillRule||"evenodd")),a.stroke&&a.weight!==0&&(t.setLineDash&&t.setLineDash(i.options&&i.options._dashArray||[]),t.globalAlpha=a.opacity,t.lineWidth=a.weight,t.strokeStyle=a.color,t.lineCap=a.lineCap,t.lineJoin=a.lineJoin,t.stroke())},_onClick:function(t){for(var i=this._map.mouseEventToLayerPoint(t),a,u,m=this._drawFirst;m;m=m.next)a=m.layer,a.options.interactive&&a._containsPoint(i)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(a))&&(u=a);this._fireEvent(u?[u]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,i)}},_handleMouseOut:function(t){var i=this._hoveredLayer;i&&(Le(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,i){if(!this._mouseHoverThrottled){for(var a,u,m=this._drawFirst;m;m=m.next)a=m.layer,a.options.interactive&&a._containsPoint(i)&&(u=a);u!==this._hoveredLayer&&(this._handleMouseOut(t),u&&(Ht(this._container,"leaflet-interactive"),this._fireEvent([u],t,"mouseover"),this._hoveredLayer=u)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,i,a){this._map._fireDOMEvent(i,a||i.type,t)},_bringToFront:function(t){var i=t._order;if(!!i){var a=i.next,u=i.prev;if(a)a.prev=u;else return;u?u.next=a:a&&(this._drawFirst=a),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(t)}},_bringToBack:function(t){var i=t._order;if(!!i){var a=i.next,u=i.prev;if(u)u.next=a;else return;a?a.prev=u:u&&(this._drawLast=u),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)}}});function Co(t){return wt.canvas?new To(t):null}var qi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),hl={_initContainer:function(){this._container=Jt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(En.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var i=t._container=qi("shape");Ht(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",t._path=qi("path"),i.appendChild(t._path),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){var i=t._container;this._container.appendChild(i),t.options.interactive&&t.addInteractiveTarget(i)},_removePath:function(t){var i=t._container;pe(i),t.removeInteractiveTarget(i),delete this._layers[p(t)]},_updateStyle:function(t){var i=t._stroke,a=t._fill,u=t.options,m=t._container;m.stroked=!!u.stroke,m.filled=!!u.fill,u.stroke?(i||(i=t._stroke=qi("stroke")),m.appendChild(i),i.weight=u.weight+"px",i.color=u.color,i.opacity=u.opacity,u.dashArray?i.dashStyle=S(u.dashArray)?u.dashArray.join(" "):u.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=u.lineCap.replace("butt","flat"),i.joinstyle=u.lineJoin):i&&(m.removeChild(i),t._stroke=null),u.fill?(a||(a=t._fill=qi("fill")),m.appendChild(a),a.color=u.fillColor||u.color,a.opacity=u.fillOpacity):a&&(m.removeChild(a),t._fill=null)},_updateCircle:function(t){var i=t._point.round(),a=Math.round(t._radius),u=Math.round(t._radiusY||a);this._setPath(t,t._empty()?"M0 0":"AL "+i.x+","+i.y+" "+a+","+u+" 0,"+65535*360)},_setPath:function(t,i){t._path.v=i},_bringToFront:function(t){di(t._container)},_bringToBack:function(t){pi(t._container)}},Ir=wt.vml?qi:Tt,Ui=En.extend({_initContainer:function(){this._container=Ir("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ir("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){pe(this._container),he(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){En.prototype._update.call(this);var t=this._bounds,i=t.getSize(),a=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,a.setAttribute("width",i.x),a.setAttribute("height",i.y)),Te(a,t.min),a.setAttribute("viewBox",[t.min.x,t.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(t){var i=t._path=Ir("path");t.options.className&&Ht(i,t.options.className),t.options.interactive&&Ht(i,"leaflet-interactive"),this._updateStyle(t),this._layers[p(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){pe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[p(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var i=t._path,a=t.options;!i||(a.stroke?(i.setAttribute("stroke",a.color),i.setAttribute("stroke-opacity",a.opacity),i.setAttribute("stroke-width",a.weight),i.setAttribute("stroke-linecap",a.lineCap),i.setAttribute("stroke-linejoin",a.lineJoin),a.dashArray?i.setAttribute("stroke-dasharray",a.dashArray):i.removeAttribute("stroke-dasharray"),a.dashOffset?i.setAttribute("stroke-dashoffset",a.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),a.fill?(i.setAttribute("fill",a.fillColor||a.color),i.setAttribute("fill-opacity",a.fillOpacity),i.setAttribute("fill-rule",a.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(t,i){this._setPath(t,Dt(t._parts,i))},_updateCircle:function(t){var i=t._point,a=Math.max(Math.round(t._radius),1),u=Math.max(Math.round(t._radiusY),1)||a,m="a"+a+","+u+" 0 1,0 ",T=t._empty()?"M0 0":"M"+(i.x-a)+","+i.y+m+a*2+",0 "+m+-a*2+",0 ";this._setPath(t,T)},_setPath:function(t,i){t._path.setAttribute("d",i)},_bringToFront:function(t){di(t._path)},_bringToBack:function(t){pi(t._path)}});wt.vml&&Ui.include(hl);function Ea(t){return wt.svg||wt.vml?new Ui(t):null}Qt.include({getRenderer:function(t){var i=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var i=this._paneRenderers[t];return i===void 0&&(i=this._createRenderer({pane:t}),this._paneRenderers[t]=i),i},_createRenderer:function(t){return this.options.preferCanvas&&Co(t)||Ea(t)}});var Ia=yi.extend({initialize:function(t,i){yi.prototype.initialize.call(this,this._boundsToLatLngs(t),i)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=At(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function cl(t,i){return new Ia(t,i)}Ui.create=Ir,Ui.pointsToPath=Dt,yn.geometryToLayer=kr,yn.coordsToLatLng=Pr,yn.coordsToLatLngs=ni,yn.latLngToCoords=ko,yn.latLngsToCoords=Hi,yn.getFeature=wi,yn.asFeature=Mr,Qt.mergeOptions({boxZoom:!0});var za=bn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Zt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){he(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){pe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Oi(),io(),this._startPoint=this._map.mouseEventToContainerPoint(t),Zt(document,{contextmenu:en,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Jt("div","leaflet-zoom-box",this._container),Ht(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var i=new mt(this._point,this._startPoint),a=i.getSize();Te(this._box,i.min),this._box.style.width=a.x+"px",this._box.style.height=a.y+"px"},_finish:function(){this._moved&&(pe(this._box),Le(this._container,"leaflet-crosshair")),Ni(),ro(),he(document,{contextmenu:en,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var i=new Et(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Qt.addInitHook("addHandler","boxZoom",za),Qt.mergeOptions({doubleClickZoom:!0});var Aa=bn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var i=this._map,a=i.getZoom(),u=i.options.zoomDelta,m=t.originalEvent.shiftKey?a-u:a+u;i.options.doubleClickZoom==="center"?i.setZoom(m):i.setZoomAround(t.containerPoint,m)}});Qt.addInitHook("addHandler","doubleClickZoom",Aa),Qt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Oa=bn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Gn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Ht(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Le(this._map._container,"leaflet-grab"),Le(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=At(this._map.options.maxBounds);this._offsetLimit=$t(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var i=this._lastTime=+new Date,a=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(a),this._times.push(i),this._prunePositions(i)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,i){return t-(t-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;t.x<i.min.x&&(t.x=this._viscousLimit(t.x,i.min.x)),t.y<i.min.y&&(t.y=this._viscousLimit(t.y,i.min.y)),t.x>i.max.x&&(t.x=this._viscousLimit(t.x,i.max.x)),t.y>i.max.y&&(t.y=this._viscousLimit(t.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,i=Math.round(t/2),a=this._initialWorldOffset,u=this._draggable._newPos.x,m=(u-i+a)%t+i-a,T=(u+i+a)%t-i-a,N=Math.abs(m+a)<Math.abs(T+a)?m:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=N},_onDragEnd:function(t){var i=this._map,a=i.options,u=!a.inertia||t.noInertia||this._times.length<2;if(i.fire("dragend",t),u)i.fire("moveend");else{this._prunePositions(+new Date);var m=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,N=a.easeLinearity,H=m.multiplyBy(N/T),V=H.distanceTo([0,0]),it=Math.min(a.inertiaMaxSpeed,V),vt=H.multiplyBy(it/V),Wt=it/(a.inertiaDeceleration*N),te=vt.multiplyBy(-Wt/2).round();!te.x&&!te.y?i.fire("moveend"):(te=i._limitOffset(te,i.options.maxBounds),ut(function(){i.panBy(te,{duration:Wt,easeLinearity:N,noMoveStart:!0,animate:!0})}))}}});Qt.addInitHook("addHandler","dragging",Oa),Qt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Na=bn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Zt(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),he(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,i=document.documentElement,a=t.scrollTop||i.scrollTop,u=t.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(u,a)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var i=this._panKeys={},a=this.keyCodes,u,m;for(u=0,m=a.left.length;u<m;u++)i[a.left[u]]=[-1*t,0];for(u=0,m=a.right.length;u<m;u++)i[a.right[u]]=[t,0];for(u=0,m=a.down.length;u<m;u++)i[a.down[u]]=[0,t];for(u=0,m=a.up.length;u<m;u++)i[a.up[u]]=[0,-1*t]},_setZoomDelta:function(t){var i=this._zoomKeys={},a=this.keyCodes,u,m;for(u=0,m=a.zoomIn.length;u<m;u++)i[a.zoomIn[u]]=t;for(u=0,m=a.zoomOut.length;u<m;u++)i[a.zoomOut[u]]=-t},_addHooks:function(){Zt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){he(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var i=t.keyCode,a=this._map,u;if(i in this._panKeys)(!a._panAnim||!a._panAnim._inProgress)&&(u=this._panKeys[i],t.shiftKey&&(u=W(u).multiplyBy(3)),a.panBy(u),a.options.maxBounds&&a.panInsideBounds(a.options.maxBounds));else if(i in this._zoomKeys)a.setZoom(a.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&a._popup&&a._popup.options.closeOnEscapeKey)a.closePopup();else return;en(t)}}});Qt.addInitHook("addHandler","keyboard",Na),Qt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ba=bn.extend({addHooks:function(){Zt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){he(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var i=pa(t),a=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var u=Math.max(a-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),u),en(t)},_performZoom:function(){var t=this._map,i=t.getZoom(),a=this._map.options.zoomSnap||0;t._stop();var u=this._delta/(this._map.options.wheelPxPerZoomLevel*4),m=4*Math.log(2/(1+Math.exp(-Math.abs(u))))/Math.LN2,T=a?Math.ceil(m/a)*a:m,N=t._limitZoom(i+(this._delta>0?T:-T))-i;this._delta=0,this._startTime=null,N&&(t.options.scrollWheelZoom==="center"?t.setZoom(i+N):t.setZoomAround(this._lastMousePos,i+N))}});Qt.addInitHook("addHandler","scrollWheelZoom",Ba);var fl=600;Qt.mergeOptions({tapHold:wt.touchNative&&wt.safari&&wt.mobile,tapTolerance:15});var Ra=bn.extend({addHooks:function(){Zt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){he(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var i=t.touches[0];this._startPos=this._newPos=new U(i.clientX,i.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Zt(document,"touchend",De),Zt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),fl),Zt(document,"touchend touchcancel contextmenu",this._cancel,this),Zt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){he(document,"touchend",De),he(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),he(document,"touchend touchcancel contextmenu",this._cancel,this),he(document,"touchmove",this._onMove,this)},_onMove:function(t){var i=t.touches[0];this._newPos=new U(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,i){var a=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});a._simulated=!0,i.target.dispatchEvent(a)}});Qt.addInitHook("addHandler","tapHold",Ra),Qt.mergeOptions({touchZoom:wt.touch,bounceAtZoomLimits:!0});var So=bn.extend({addHooks:function(){Ht(this._map._container,"leaflet-touch-zoom"),Zt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Le(this._map._container,"leaflet-touch-zoom"),he(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(!(!t.touches||t.touches.length!==2||i._animatingZoom||this._zooming)){var a=i.mouseEventToContainerPoint(t.touches[0]),u=i.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(a.add(u)._divideBy(2))),this._startDist=a.distanceTo(u),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),Zt(document,"touchmove",this._onTouchMove,this),Zt(document,"touchend touchcancel",this._onTouchEnd,this),De(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var i=this._map,a=i.mouseEventToContainerPoint(t.touches[0]),u=i.mouseEventToContainerPoint(t.touches[1]),m=a.distanceTo(u)/this._startDist;if(this._zoom=i.getScaleZoom(m,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&m<1||this._zoom>i.getMaxZoom()&&m>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,m===1)return}else{var T=a._add(u)._divideBy(2)._subtract(this._centerPoint);if(m===1&&T.x===0&&T.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),X(this._animRequest);var N=l(i._move,i,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=ut(N,this,!0),De(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,X(this._animRequest),he(document,"touchmove",this._onTouchMove,this),he(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Qt.addInitHook("addHandler","touchZoom",So),Qt.BoxZoom=za,Qt.DoubleClickZoom=Aa,Qt.Drag=Oa,Qt.Keyboard=Na,Qt.ScrollWheelZoom=Ba,Qt.TapHold=Ra,Qt.TouchZoom=So,r.Bounds=mt,r.Browser=wt,r.CRS=Gt,r.Canvas=To,r.Circle=xr,r.CircleMarker=wr,r.Class=lt,r.Control=cn,r.DivIcon=Ca,r.DivOverlay=wn,r.DomEvent=ho,r.DomUtil=fa,r.Draggable=Gn,r.Evented=ct,r.FeatureGroup=vi,r.GeoJSON=yn,r.GridLayer=Wi,r.Handler=bn,r.Icon=bi,r.ImageOverlay=xi,r.LatLng=It,r.LatLngBounds=Et,r.Layer=nn,r.LayerGroup=gi,r.LineUtil=Js,r.Map=Qt,r.Marker=yr,r.Mixin=Vs,r.Path=Wn,r.Point=U,r.PolyUtil=Qs,r.Polygon=yi,r.Polyline=Sn,r.Popup=Cr,r.PosAnimation=co,r.Projection=br,r.Rectangle=Ia,r.Renderer=En,r.SVG=Ui,r.SVGOverlay=Ta,r.TileLayer=ii,r.Tooltip=Gi,r.Transformation=zt,r.Util=j,r.VideoOverlay=Tr,r.bind=l,r.bounds=$t,r.canvas=Co,r.circle=Ma,r.circleMarker=il,r.control=mi,r.divIcon=Sr,r.extend=s,r.featureGroup=Fi,r.geoJSON=La,r.geoJson=ol,r.gridLayer=ll,r.icon=el,r.imageOverlay=Lr,r.latLng=Lt,r.latLngBounds=At,r.layerGroup=ka,r.map=Hs,r.marker=nl,r.point=W,r.polygon=wo,r.polyline=rl,r.popup=sl,r.rectangle=cl,r.setOptions=v,r.stamp=p,r.svg=Ea,r.svgOverlay=Mo,r.tileLayer=Er,r.tooltip=Lo,r.transformation=qt,r.version=o,r.videoOverlay=al;var Za=window.L;r.noConflict=function(){return window.L=Za,this},window.L=r})}(ja,ja.exports)),ja.exports}var Ka=zf();var X0={exports:{}};(function(e){(function(n,r){typeof modules=="object"&&e.exports?e.exports=r(zf()):r(L)})(xu,function(n){return n.TileLayer.Provider=n.TileLayer.extend({initialize:function(r,o){var s=n.TileLayer.Provider.providers,h=r.split("."),l=h[0],c=h[1];if(!s[l])throw"No such provider ("+l+")";var p={url:s[l].url,options:s[l].options};if(c&&"variants"in s[l]){if(!(c in s[l].variants))throw"No such variant of "+l+" ("+c+")";var d=s[l].variants[c],b;typeof d=="string"?b={variant:d}:b=d.options,p={url:d.url||p.url,options:n.Util.extend({},p.options,b)}}var y=function(P){return P.indexOf("{attribution.")===-1?P:P.replace(/\{attribution.(\w*)\}/g,function(k,v){return y(s[v].options.attribution)})};p.options.attribution=y(p.options.attribution);var g=n.Util.extend({},p.options,o);n.TileLayer.prototype.initialize.call(this,p.url,g)}}),n.TileLayer.Provider.providers={OpenStreetMap:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},variants:{Mapnik:{},DE:{url:"https://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18}},CH:{url:"https://tile.osm.ch/switzerland/{z}/{x}/{y}.png",options:{maxZoom:18,bounds:[[45,5],[48,11]]}},France:{url:"https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{maxZoom:20,attribution:"&copy; OpenStreetMap France | {attribution.OpenStreetMap}"}},HOT:{url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team</a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France</a>'}},BZH:{url:"https://tile.openstreetmap.bzh/br/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://www.openstreetmap.bzh/" target="_blank">Breton OpenStreetMap Team</a>',bounds:[[46.2,-5.5],[50,.7]]}}}},OpenSeaMap:{url:"https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'}},OPNVKarte:{url:"https://tileserver.memomaps.de/tilegen/{z}/{x}/{y}.png",options:{maxZoom:18,attribution:'Map <a href="https://memomaps.de/">memomaps.de</a> <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, map data {attribution.OpenStreetMap}'}},OpenTopoMap:{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenRailwayMap:{url:"https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://www.OpenRailwayMap.org">OpenRailwayMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenFireMap:{url:"http://openfiremap.org/hytiles/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="http://www.openfiremap.org">OpenFireMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},SafeCast:{url:"https://s3.amazonaws.com/te512.safecast.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://blog.safecast.org/about/">SafeCast</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},Stadia:{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png",options:{maxZoom:20,attribution:'&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'},variants:{AlidadeSmooth:{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth/{z}/{x}/{y}{r}.png"},AlidadeSmoothDark:{url:"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png"},OSMBright:{url:"https://tiles.stadiamaps.com/tiles/osm_bright/{z}/{x}/{y}{r}.png"},Outdoors:{url:"https://tiles.stadiamaps.com/tiles/outdoors/{z}/{x}/{y}{r}.png"}}},Thunderforest:{url:"https://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png?apikey={apikey}",options:{attribution:'&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, {attribution.OpenStreetMap}',variant:"cycle",apikey:"<insert your api key here>",maxZoom:22},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport"}},TransportDark:{options:{variant:"transport-dark"}},SpinalMap:{options:{variant:"spinal-map"}},Landscape:"landscape",Outdoors:"outdoors",Pioneer:"pioneer",MobileAtlas:"mobile-atlas",Neighbourhood:"neighbourhood"}},CyclOSM:{url:"https://{s}.tile-cyclosm.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",options:{maxZoom:20,attribution:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: {attribution.OpenStreetMap}'}},Hydda:{url:"https://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{maxZoom:20,variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},Jawg:{url:"https://{s}.tile.jawg.io/{variant}/{z}/{x}/{y}{r}.png?access-token={accessToken}",options:{attribution:'<a href="http://jawg.io" title="Tiles Courtesy of Jawg Maps" target="_blank">&copy; <b>Jawg</b>Maps</a> {attribution.OpenStreetMap}',minZoom:0,maxZoom:22,subdomains:"abcd",variant:"jawg-terrain",accessToken:"<insert your access token here>"},variants:{Streets:"jawg-streets",Terrain:"jawg-terrain",Sunny:"jawg-sunny",Dark:"jawg-dark",Light:"jawg-light",Matrix:"jawg-matrix"}},MapBox:{url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}{r}?access_token={accessToken}",options:{attribution:'&copy; <a href="https://www.mapbox.com/about/maps/" target="_blank">Mapbox</a> {attribution.OpenStreetMap} <a href="https://www.mapbox.com/map-feedback/" target="_blank">Improve this map</a>',tileSize:512,maxZoom:18,zoomOffset:-1,id:"mapbox/streets-v11",accessToken:"<insert your access token here>"}},MapTiler:{url:"https://api.maptiler.com/maps/{variant}/{z}/{x}/{y}{r}.{ext}?key={key}",options:{attribution:'<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>',variant:"streets",ext:"png",key:"<insert your MapTiler Cloud API key here>",tileSize:512,zoomOffset:-1,minZoom:0,maxZoom:21},variants:{Streets:"streets",Basic:"basic",Bright:"bright",Pastel:"pastel",Positron:"positron",Hybrid:{options:{variant:"hybrid",ext:"jpg"}},Toner:"toner",Topo:"topo",Voyager:"voyager"}},Stamen:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}{r}.{ext}",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{variant:"watercolor",ext:"jpg",minZoom:1,maxZoom:16}},Terrain:{options:{variant:"terrain",minZoom:0,maxZoom:18}},TerrainBackground:{options:{variant:"terrain-background",minZoom:0,maxZoom:18}},TerrainLabels:{options:{variant:"terrain-labels",minZoom:0,maxZoom:18}},TopOSMRelief:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{variant:"toposm-color-relief",ext:"jpg",bounds:[[22,-132],[51,-56]]}},TopOSMFeatures:{options:{variant:"toposm-features",bounds:[[22,-132],[51,-56]],opacity:.9}}}},TomTom:{url:"https://{s}.api.tomtom.com/map/1/tile/{variant}/{style}/{z}/{x}/{y}.{ext}?key={apikey}",options:{variant:"basic",maxZoom:22,attribution:'<a href="https://tomtom.com" target="_blank">&copy;  1992 - '+new Date().getFullYear()+" TomTom.</a> ",subdomains:"abcd",style:"main",ext:"png",apikey:"<insert your API key here>"},variants:{Basic:"basic",Hybrid:"hybrid",Labels:"labels"}},Esri:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png?appid={apiKey}",options:{maxZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',apiKey:"<insert your api key here>",opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"https://{s}.{base}.maps.api.here.com/maptile/2.1/{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?app_id={app_id}&app_code={app_code}&lg={language}",options:{attribution:"Map &copy; 1987-"+new Date().getFullYear()+' <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,type:"maptile",language:"eng",format:"png8",size:"256"},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalDayTraffic:{options:{variant:"normal.traffic.day",base:"traffic",type:"traffictile"}},normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",normalNightTransit:"normal.night.transit",normalNightTransitMobile:"normal.night.transit.mobile",reducedDay:"reduced.day",reducedNight:"reduced.night",basicMap:{options:{type:"basetile"}},mapLabels:{options:{type:"labeltile",format:"png"}},trafficFlow:{options:{base:"traffic",type:"flowtile"}},carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},hybridDayTransit:{options:{base:"aerial",variant:"hybrid.day.transit"}},hybridDayGrey:{options:{base:"aerial",variant:"hybrid.grey.day"}},hybridDayTraffic:{options:{variant:"hybrid.traffic.day",base:"traffic",type:"traffictile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},HEREv3:{url:"https://{s}.{base}.maps.ls.hereapi.com/maptile/2.1/{type}/{mapID}/{variant}/{z}/{x}/{y}/{size}/{format}?apiKey={apiKey}&lg={language}",options:{attribution:"Map &copy; 1987-"+new Date().getFullYear()+' <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",apiKey:"<insert your apiKey here>",base:"base",variant:"normal.day",maxZoom:20,type:"maptile",language:"eng",format:"png8",size:"256"},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",normalNightTransit:"normal.night.transit",normalNightTransitMobile:"normal.night.transit.mobile",reducedDay:"reduced.day",reducedNight:"reduced.night",basicMap:{options:{type:"basetile"}},mapLabels:{options:{type:"labeltile",format:"png"}},trafficFlow:{options:{base:"traffic",type:"flowtile"}},carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},hybridDayTransit:{options:{base:"aerial",variant:"hybrid.day.transit"}},hybridDayGrey:{options:{base:"aerial",variant:"hybrid.grey.day"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},FreeMapSK:{url:"https://{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,subdomains:"abcd",bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"https://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}{r}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:20,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels",Voyager:"rastertiles/voyager",VoyagerNoLabels:"rastertiles/voyager_nolabels",VoyagerOnlyLabels:"rastertiles/voyager_only_labels",VoyagerLabelsUnder:"rastertiles/voyager_labels_under"}},HikeBike:{url:"https://tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"https://maps{s}.wien.gv.at/basemap/{variant}/{type}/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,attribution:'Datenquelle: <a href="https://www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],type:"normal",format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:{options:{maxZoom:20,variant:"geolandbasemap"}},grau:"bmapgrau",overlay:"bmapoverlay",terrain:{options:{variant:"bmapgelaende",type:"grau",format:"jpeg"}},surface:{options:{variant:"bmapoberflaeche",type:"grau",format:"jpeg"}},highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{maxZoom:20,variant:"bmaporthofoto30cm",format:"jpeg"}}}},nlmaps:{url:"https://geodata.nationaalgeoregister.nl/tiles/service/wmts/{variant}/EPSG:3857/{z}/{x}/{y}.png",options:{minZoom:6,maxZoom:19,bounds:[[50.5,3.25],[54,7.6]],attribution:'Kaartgegevens &copy; <a href="https://www.kadaster.nl">Kadaster</a>'},variants:{standaard:"brtachtergrondkaart",pastel:"brtachtergrondkaartpastel",grijs:"brtachtergrondkaartgrijs",luchtfoto:{url:"https://service.pdok.nl/hwh/luchtfotorgb/wmts/v1_0/Actueel_ortho25/EPSG:3857/{z}/{x}/{y}.jpeg"}}},NASAGIBS:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}",options:{attribution:'Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.',bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{options:{variant:"VIIRS_CityLights_2012",maxZoom:8}},ModisTerraLSTDay:{options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,opacity:.75}},ModisTerraSnowCover:{options:{variant:"MODIS_Terra_NDSI_Snow_Cover",format:"png",maxZoom:8,opacity:.75}},ModisTerraAOD:{options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,opacity:.75}},ModisTerraChlorophyll:{options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,opacity:.75}}}},NLS:{url:"https://nls-{s}.tileserver.com/nls/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,subdomains:"0123"}},JusticeMap:{url:"https://www.justicemap.org/tile/{size}/{variant}/{z}/{x}/{y}.png",options:{attribution:'<a href="http://www.justicemap.org/terms.php">Justice Map</a>',size:"county",bounds:[[14,-180],[72,-56]]},variants:{income:"income",americanIndian:"indian",asian:"asian",black:"black",hispanic:"hispanic",multi:"multi",nonWhite:"nonwhite",white:"white",plurality:"plural"}},GeoportailFrance:{url:"https://wxs.ign.fr/{apikey}/geoportail/wmts?REQUEST=GetTile&SERVICE=WMTS&VERSION=1.0.0&STYLE={style}&TILEMATRIXSET=PM&FORMAT={format}&LAYER={variant}&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",options:{attribution:'<a target="_blank" href="https://www.geoportail.gouv.fr/">Geoportail France</a>',bounds:[[-75,-180],[81,180]],minZoom:2,maxZoom:18,apikey:"choisirgeoportail",format:"image/png",style:"normal",variant:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2"},variants:{plan:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",parcels:{options:{variant:"CADASTRALPARCELS.PARCELLAIRE_EXPRESS",style:"PCI vecteur",maxZoom:20}},orthos:{options:{maxZoom:19,format:"image/jpeg",variant:"ORTHOIMAGERY.ORTHOPHOTOS"}}}},OneMapSG:{url:"https://maps-{s}.onemap.sg/v3/{variant}/{z}/{x}/{y}.png",options:{variant:"Default",minZoom:11,maxZoom:18,bounds:[[1.56073,104.11475],[1.16,103.502]],attribution:'<img src="https://docs.onemap.sg/maps/images/oneMap64-01.png" style="height:20px;width:20px;"/> New OneMap | Map data &copy; contributors, <a href="http://SLA.gov.sg">Singapore Land Authority</a>'},variants:{Default:"Default",Night:"Night",Original:"Original",Grey:"Grey",LandLot:"LandLot"}},USGS:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSTopo/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:20,attribution:'Tiles courtesy of the <a href="https://usgs.gov/">U.S. Geological Survey</a>'},variants:{USTopo:{},USImagery:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryOnly/MapServer/tile/{z}/{y}/{x}"},USImageryTopo:{url:"https://basemap.nationalmap.gov/arcgis/rest/services/USGSImageryTopo/MapServer/tile/{z}/{y}/{x}"}}},WaymarkedTrails:{url:"https://tile.waymarkedtrails.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:18,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://waymarkedtrails.org">waymarkedtrails.org</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'},variants:{hiking:"hiking",cycling:"cycling",mtb:"mtb",slopes:"slopes",riding:"riding",skating:"skating"}},OpenAIP:{url:"https://{s}.tile.maps.openaip.net/geowebcache/service/tms/1.0.0/openaip_basemap@EPSG%3A900913@png/{z}/{x}/{y}.{ext}",options:{attribution:'<a href="https://www.openaip.net/">openAIP Data</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-NC-SA</a>)',ext:"png",minZoom:4,maxZoom:14,tms:!0,detectRetina:!0,subdomains:"12"}},OpenSnowMap:{url:"https://tiles.opensnowmap.org/{variant}/{z}/{x}/{y}.png",options:{minZoom:9,maxZoom:18,attribution:'Map data: {attribution.OpenStreetMap} & ODbL, &copy; <a href="https://www.opensnowmap.org/iframes/data.html">www.opensnowmap.org</a> <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'},variants:{pistes:"pistes"}},AzureMaps:{url:"https://atlas.microsoft.com/map/tile?api-version={apiVersion}&tilesetId={variant}&x={x}&y={y}&zoom={z}&language={language}&subscription-key={subscriptionKey}",options:{attribution:"See https://docs.microsoft.com/en-US/rest/api/maps/renderv2/getmaptilepreview for details.",apiVersion:"2.0",variant:"microsoft.imagery",subscriptionKey:"<insert your subscription key here>",language:"en-US"},variants:{MicrosoftImagery:"microsoft.imagery",MicrosoftBaseDarkGrey:"microsoft.base.darkgrey",MicrosoftBaseRoad:"microsoft.base.road",MicrosoftBaseHybridRoad:"microsoft.base.hybrid.road",MicrosoftTerraMain:"microsoft.terra.main",MicrosoftWeatherInfraredMain:{url:"https://atlas.microsoft.com/map/tile?api-version={apiVersion}&tilesetId={variant}&x={x}&y={y}&zoom={z}&timeStamp={timeStamp}&language={language}&subscription-key={subscriptionKey}",options:{timeStamp:"2021-05-08T09:03:00Z",attribution:"See https://docs.microsoft.com/en-US/rest/api/maps/renderv2/getmaptilepreview#uri-parameters for details.",variant:"microsoft.weather.infrared.main"}},MicrosoftWeatherRadarMain:{url:"https://atlas.microsoft.com/map/tile?api-version={apiVersion}&tilesetId={variant}&x={x}&y={y}&zoom={z}&timeStamp={timeStamp}&language={language}&subscription-key={subscriptionKey}",options:{timeStamp:"2021-05-08T09:03:00Z",attribution:"See https://docs.microsoft.com/en-US/rest/api/maps/renderv2/getmaptilepreview#uri-parameters for details.",variant:"microsoft.weather.radar.main"}}}}},n.tileLayer.provider=function(r,o){return new n.TileLayer.Provider(r,o)},n})})(X0);const Br=[];function ea(e,n){return{subscribe:Rt(e,n).subscribe}}function Rt(e,n=Bt){let r;const o=new Set;function s(c){if(Je(e,c)&&(e=c,r)){const p=!Br.length;for(const d of o)d[1](),Br.push(d,e);if(p){for(let d=0;d<Br.length;d+=2)Br[d][0](Br[d+1]);Br.length=0}}}function h(c){s(c(e))}function l(c,p=Bt){const d=[c,p];return o.add(d),o.size===1&&(r=n(s)||Bt),c(e),()=>{o.delete(d),o.size===0&&(r(),r=null)}}return{set:s,update:h,subscribe:l}}function na(e,n,r){const o=!Array.isArray(e),s=o?[e]:e,h=n.length<2;return ea(r,l=>{let c=!1;const p=[];let d=0,b=Bt;const y=()=>{if(d)return;b();const P=n(o?p[0]:p,l);h?l(P):b=hu(P)?P:Bt},g=s.map((P,k)=>on(P,v=>{p[k]=v,d&=~(1<<k),c&&y()},()=>{d|=1<<k}));return c=!0,y(),function(){Re(g),b()}})}var Af={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(e,n){(function(r,o){e.exports=o()})(xu,function(){for(var r=function(f,_,x){return _===void 0&&(_=0),x===void 0&&(x=1),f<_?_:f>x?x:f},o=r,s=function(f){f._clipped=!1,f._unclipped=f.slice(0);for(var _=0;_<=3;_++)_<3?((f[_]<0||f[_]>255)&&(f._clipped=!0),f[_]=o(f[_],0,255)):_===3&&(f[_]=o(f[_],0,1));return f},h={},l=0,c=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];l<c.length;l+=1){var p=c[l];h["[object "+p+"]"]=p.toLowerCase()}var d=function(f){return h[Object.prototype.toString.call(f)]||"object"},b=d,y=function(f,_){return _===void 0&&(_=null),f.length>=3?Array.prototype.slice.call(f):b(f[0])=="object"&&_?_.split("").filter(function(x){return f[0][x]!==void 0}).map(function(x){return f[0][x]}):f[0]},g=d,P=function(f){if(f.length<2)return null;var _=f.length-1;return g(f[_])=="string"?f[_].toLowerCase():null},k=Math.PI,v={clip_rgb:s,limit:r,type:d,unpack:y,last:P,PI:k,TWOPI:k*2,PITHIRD:k/3,DEG2RAD:k/180,RAD2DEG:180/k},C={format:{},autodetect:[]},z=v.last,E=v.clip_rgb,S=v.type,F=C,O=function(){for(var _=[],x=arguments.length;x--;)_[x]=arguments[x];var I=this;if(S(_[0])==="object"&&_[0].constructor&&_[0].constructor===this.constructor)return _[0];var R=z(_),D=!1;if(!R){D=!0,F.sorted||(F.autodetect=F.autodetect.sort(function(nt,ft){return ft.p-nt.p}),F.sorted=!0);for(var B=0,$=F.autodetect;B<$.length;B+=1){var G=$[B];if(R=G.test.apply(G,_),R)break}}if(F.format[R]){var J=F.format[R].apply(null,D?_:_.slice(0,-1));I._rgb=E(J)}else throw new Error("unknown format: "+_);I._rgb.length===3&&I._rgb.push(1)};O.prototype.toString=function(){return S(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var Z=O,rt=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(rt.Color,[null].concat(f)))};rt.Color=Z,rt.version="2.4.2";var Y=rt,Nt=v.unpack,Mt=Math.max,ut=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=Nt(f,"rgb"),I=x[0],R=x[1],D=x[2];I=I/255,R=R/255,D=D/255;var B=1-Mt(I,Mt(R,D)),$=B<1?1/(1-B):0,G=(1-I-B)*$,J=(1-R-B)*$,nt=(1-D-B)*$;return[G,J,nt,B]},X=ut,j=v.unpack,lt=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];f=j(f,"cmyk");var x=f[0],I=f[1],R=f[2],D=f[3],B=f.length>4?f[4]:1;return D===1?[0,0,0,B]:[x>=1?0:255*(1-x)*(1-D),I>=1?0:255*(1-I)*(1-D),R>=1?0:255*(1-R)*(1-D),B]},st=lt,dt=Y,ct=Z,U=C,et=v.unpack,W=v.type,mt=X;ct.prototype.cmyk=function(){return mt(this._rgb)},dt.cmyk=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(ct,[null].concat(f,["cmyk"])))},U.format.cmyk=st,U.autodetect.push({p:2,test:function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];if(f=et(f,"cmyk"),W(f)==="array"&&f.length===4)return"cmyk"}});var $t=v.unpack,Et=v.last,At=function(f){return Math.round(f*100)/100},It=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=$t(f,"hsla"),I=Et(f)||"lsa";return x[0]=At(x[0]||0),x[1]=At(x[1]*100)+"%",x[2]=At(x[2]*100)+"%",I==="hsla"||x.length>3&&x[3]<1?(x[3]=x.length>3?x[3]:1,I="hsla"):x.length=3,I+"("+x.join(",")+")"},Lt=It,Gt=v.unpack,fe=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];f=Gt(f,"rgba");var x=f[0],I=f[1],R=f[2];x/=255,I/=255,R/=255;var D=Math.min(x,I,R),B=Math.max(x,I,R),$=(B+D)/2,G,J;return B===D?(G=0,J=Number.NaN):G=$<.5?(B-D)/(B+D):(B-D)/(2-B-D),x==B?J=(I-R)/(B-D):I==B?J=2+(R-x)/(B-D):R==B&&(J=4+(x-I)/(B-D)),J*=60,J<0&&(J+=360),f.length>3&&f[3]!==void 0?[J,G,$,f[3]]:[J,G,$]},de=fe,re=v.unpack,zt=v.last,qt=Lt,ye=de,ht=Math.round,Tt=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=re(f,"rgba"),I=zt(f)||"rgb";return I.substr(0,3)=="hsl"?qt(ye(x),I):(x[0]=ht(x[0]),x[1]=ht(x[1]),x[2]=ht(x[2]),(I==="rgba"||x.length>3&&x[3]<1)&&(x[3]=x.length>3?x[3]:1,I="rgba"),I+"("+x.slice(0,I==="rgb"?3:4).join(",")+")")},Dt=Tt,jt=v.unpack,oe=Math.round,Me=function(){for(var f,_=[],x=arguments.length;x--;)_[x]=arguments[x];_=jt(_,"hsl");var I=_[0],R=_[1],D=_[2],B,$,G;if(R===0)B=$=G=D*255;else{var J=[0,0,0],nt=[0,0,0],ft=D<.5?D*(1+R):D+R-D*R,ot=2*D-ft,gt=I/360;J[0]=gt+1/3,J[1]=gt,J[2]=gt-1/3;for(var _t=0;_t<3;_t++)J[_t]<0&&(J[_t]+=1),J[_t]>1&&(J[_t]-=1),6*J[_t]<1?nt[_t]=ot+(ft-ot)*6*J[_t]:2*J[_t]<1?nt[_t]=ft:3*J[_t]<2?nt[_t]=ot+(ft-ot)*(2/3-J[_t])*6:nt[_t]=ot;f=[oe(nt[0]*255),oe(nt[1]*255),oe(nt[2]*255)],B=f[0],$=f[1],G=f[2]}return _.length>3?[B,$,G,_[3]]:[B,$,G,1]},Ot=Me,Ft=Ot,ae=C,Se=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,Ee=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,Fe=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Ne=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Ye=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Ve=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Fn=Math.round,Qe=function(f){f=f.toLowerCase().trim();var _;if(ae.format.named)try{return ae.format.named(f)}catch{}if(_=f.match(Se)){for(var x=_.slice(1,4),I=0;I<3;I++)x[I]=+x[I];return x[3]=1,x}if(_=f.match(Ee)){for(var R=_.slice(1,5),D=0;D<4;D++)R[D]=+R[D];return R}if(_=f.match(Fe)){for(var B=_.slice(1,4),$=0;$<3;$++)B[$]=Fn(B[$]*2.55);return B[3]=1,B}if(_=f.match(Ne)){for(var G=_.slice(1,5),J=0;J<3;J++)G[J]=Fn(G[J]*2.55);return G[3]=+G[3],G}if(_=f.match(Ye)){var nt=_.slice(1,4);nt[1]*=.01,nt[2]*=.01;var ft=Ft(nt);return ft[3]=1,ft}if(_=f.match(Ve)){var ot=_.slice(1,4);ot[1]*=.01,ot[2]*=.01;var gt=Ft(ot);return gt[3]=+_[4],gt}};Qe.test=function(f){return Se.test(f)||Ee.test(f)||Fe.test(f)||Ne.test(f)||Ye.test(f)||Ve.test(f)};var mn=Qe,jn=Y,$n=Z,Xe=C,Ie=v.type,ci=Dt,Ze=mn;$n.prototype.css=function(f){return ci(this._rgb,f)},jn.css=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply($n,[null].concat(f,["css"])))},Xe.format.css=Ze,Xe.autodetect.push({p:5,test:function(f){for(var _=[],x=arguments.length-1;x-- >0;)_[x]=arguments[x+1];if(!_.length&&Ie(f)==="string"&&Ze.test(f))return"css"}});var Kn=Z,_n=Y,ze=C,bt=v.unpack;ze.format.gl=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=bt(f,"rgba");return x[0]*=255,x[1]*=255,x[2]*=255,x},_n.gl=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(Kn,[null].concat(f,["gl"])))},Kn.prototype.gl=function(){var f=this._rgb;return[f[0]/255,f[1]/255,f[2]/255,f[3]]};var le=v.unpack,Ge=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=le(f,"rgb"),I=x[0],R=x[1],D=x[2],B=Math.min(I,R,D),$=Math.max(I,R,D),G=$-B,J=G*100/255,nt=B/(255-G)*100,ft;return G===0?ft=Number.NaN:(I===$&&(ft=(R-D)/G),R===$&&(ft=2+(D-I)/G),D===$&&(ft=4+(I-R)/G),ft*=60,ft<0&&(ft+=360)),[ft,J,nt]},fi=Ge,ue=v.unpack,Mn=Math.floor,Xr=function(){for(var f,_,x,I,R,D,B=[],$=arguments.length;$--;)B[$]=arguments[$];B=ue(B,"hcg");var G=B[0],J=B[1],nt=B[2],ft,ot,gt;nt=nt*255;var _t=J*255;if(J===0)ft=ot=gt=nt;else{G===360&&(G=0),G>360&&(G-=360),G<0&&(G+=360),G/=60;var Ut=Mn(G),Kt=G-Ut,ne=nt*(1-J),ce=ne+_t*(1-Kt),We=ne+_t*Kt,He=ne+_t;switch(Ut){case 0:f=[He,We,ne],ft=f[0],ot=f[1],gt=f[2];break;case 1:_=[ce,He,ne],ft=_[0],ot=_[1],gt=_[2];break;case 2:x=[ne,He,We],ft=x[0],ot=x[1],gt=x[2];break;case 3:I=[ne,ce,He],ft=I[0],ot=I[1],gt=I[2];break;case 4:R=[We,ne,He],ft=R[0],ot=R[1],gt=R[2];break;case 5:D=[He,ne,ce],ft=D[0],ot=D[1],gt=D[2];break}}return[ft,ot,gt,B.length>3?B[3]:1]},jr=Xr,Ii=v.unpack,Kr=v.type,Jr=Y,je=Z,wt=C,or=fi;je.prototype.hcg=function(){return or(this._rgb)},Jr.hcg=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(je,[null].concat(f,["hcg"])))},wt.format.hcg=jr,wt.autodetect.push({p:1,test:function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];if(f=Ii(f,"hcg"),Kr(f)==="array"&&f.length===3)return"hcg"}});var ar=v.unpack,sr=v.last,tt=Math.round,we=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=ar(f,"rgba"),I=x[0],R=x[1],D=x[2],B=x[3],$=sr(f)||"auto";B===void 0&&(B=1),$==="auto"&&($=B<1?"rgba":"rgb"),I=tt(I),R=tt(R),D=tt(D);var G=I<<16|R<<8|D,J="000000"+G.toString(16);J=J.substr(J.length-6);var nt="0"+tt(B*255).toString(16);switch(nt=nt.substr(nt.length-2),$.toLowerCase()){case"rgba":return"#"+J+nt;case"argb":return"#"+nt+J;default:return"#"+J}},Jn=we,Ln=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,zi=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Qr=function(f){if(f.match(Ln)){(f.length===4||f.length===7)&&(f=f.substr(1)),f.length===3&&(f=f.split(""),f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]);var _=parseInt(f,16),x=_>>16,I=_>>8&255,R=_&255;return[x,I,R,1]}if(f.match(zi)){(f.length===5||f.length===9)&&(f=f.substr(1)),f.length===4&&(f=f.split(""),f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]+f[3]+f[3]);var D=parseInt(f,16),B=D>>24&255,$=D>>16&255,G=D>>8&255,J=Math.round((D&255)/255*100)/100;return[B,$,G,J]}throw new Error("unknown hex color: "+f)},oa=Qr,Ns=Y,aa=Z,sa=v.type,la=C,lr=Jn;aa.prototype.hex=function(f){return lr(this._rgb,f)},Ns.hex=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(aa,[null].concat(f,["hex"])))},la.format.hex=oa,la.autodetect.push({p:4,test:function(f){for(var _=[],x=arguments.length-1;x-- >0;)_[x]=arguments[x+1];if(!_.length&&sa(f)==="string"&&[3,4,5,6,7,8,9].indexOf(f.length)>=0)return"hex"}});var Bs=v.unpack,ua=v.TWOPI,Rs=Math.min,Zs=Math.sqrt,Ds=Math.acos,to=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=Bs(f,"rgb"),I=x[0],R=x[1],D=x[2];I/=255,R/=255,D/=255;var B,$=Rs(I,R,D),G=(I+R+D)/3,J=G>0?1-$/G:0;return J===0?B=NaN:(B=(I-R+(I-D))/2,B/=Zs((I-R)*(I-R)+(I-D)*(R-D)),B=Ds(B),D>R&&(B=ua-B),B/=ua),[B*360,J,G]},Ai=to,ha=v.unpack,ur=v.limit,gn=v.TWOPI,Jt=v.PITHIRD,pe=Math.cos,hr=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];f=ha(f,"hsi");var x=f[0],I=f[1],R=f[2],D,B,$;return isNaN(x)&&(x=0),isNaN(I)&&(I=0),x>360&&(x-=360),x<0&&(x+=360),x/=360,x<1/3?($=(1-I)/3,D=(1+I*pe(gn*x)/pe(Jt-gn*x))/3,B=1-($+D)):x<2/3?(x-=1/3,D=(1-I)/3,B=(1+I*pe(gn*x)/pe(Jt-gn*x))/3,$=1-(D+B)):(x-=2/3,B=(1-I)/3,$=(1+I*pe(gn*x)/pe(Jt-gn*x))/3,D=1-(B+$)),D=ur(R*D*3),B=ur(R*B*3),$=ur(R*$*3),[D*255,B*255,$*255,f.length>3?f[3]:1]},di=hr,pi=v.unpack,eo=v.type,Ht=Y,Le=Z,cr=C,fr=Ai;Le.prototype.hsi=function(){return fr(this._rgb)},Ht.hsi=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(Le,[null].concat(f,["hsi"])))},cr.format.hsi=di,cr.autodetect.push({p:2,test:function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];if(f=pi(f,"hsi"),eo(f)==="array"&&f.length===3)return"hsi"}});var tn=v.unpack,Fs=v.type,dr=Y,Hn=Z,Te=C,Qn=de;Hn.prototype.hsl=function(){return Qn(this._rgb)},dr.hsl=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(Hn,[null].concat(f,["hsl"])))},Te.format.hsl=Ot,Te.autodetect.push({p:2,test:function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];if(f=tn(f,"hsl"),Fs(f)==="array"&&f.length===3)return"hsl"}});var Oi=v.unpack,Ni=Math.min,no=Math.max,Bi=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];f=Oi(f,"rgb");var x=f[0],I=f[1],R=f[2],D=Ni(x,I,R),B=no(x,I,R),$=B-D,G,J,nt;return nt=B/255,B===0?(G=Number.NaN,J=0):(J=$/B,x===B&&(G=(I-R)/$),I===B&&(G=2+(R-x)/$),R===B&&(G=4+(x-I)/$),G*=60,G<0&&(G+=360)),[G,J,nt]},io=Bi,ro=v.unpack,pr=Math.floor,oo=function(){for(var f,_,x,I,R,D,B=[],$=arguments.length;$--;)B[$]=arguments[$];B=ro(B,"hsv");var G=B[0],J=B[1],nt=B[2],ft,ot,gt;if(nt*=255,J===0)ft=ot=gt=nt;else{G===360&&(G=0),G>360&&(G-=360),G<0&&(G+=360),G/=60;var _t=pr(G),Ut=G-_t,Kt=nt*(1-J),ne=nt*(1-J*Ut),ce=nt*(1-J*(1-Ut));switch(_t){case 0:f=[nt,ce,Kt],ft=f[0],ot=f[1],gt=f[2];break;case 1:_=[ne,nt,Kt],ft=_[0],ot=_[1],gt=_[2];break;case 2:x=[Kt,nt,ce],ft=x[0],ot=x[1],gt=x[2];break;case 3:I=[Kt,ne,nt],ft=I[0],ot=I[1],gt=I[2];break;case 4:R=[ce,Kt,nt],ft=R[0],ot=R[1],gt=R[2];break;case 5:D=[nt,Kt,ne],ft=D[0],ot=D[1],gt=D[2];break}}return[ft,ot,gt,B.length>3?B[3]:1]},ao=oo,mr=v.unpack,ca=v.type,so=Y,fa=Z,Zt=C,vn=io;fa.prototype.hsv=function(){return vn(this._rgb)},so.hsv=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(fa,[null].concat(f,["hsv"])))},Zt.format.hsv=ao,Zt.autodetect.push({p:2,test:function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];if(f=mr(f,"hsv"),ca(f)==="array"&&f.length===3)return"hsv"}});var he={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},ti=he,lo=v.unpack,_r=Math.pow,uo=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=lo(f,"rgb"),I=x[0],R=x[1],D=x[2],B=Zi(I,R,D),$=B[0],G=B[1],J=B[2],nt=116*G-16;return[nt<0?0:nt,500*($-G),200*(G-J)]},Tn=function(f){return(f/=255)<=.04045?f/12.92:_r((f+.055)/1.055,2.4)},Ri=function(f){return f>ti.t3?_r(f,1/3):f/ti.t2+ti.t0},Zi=function(f,_,x){f=Tn(f),_=Tn(_),x=Tn(x);var I=Ri((.4124564*f+.3575761*_+.1804375*x)/ti.Xn),R=Ri((.2126729*f+.7151522*_+.072175*x)/ti.Yn),D=Ri((.0193339*f+.119192*_+.9503041*x)/ti.Zn);return[I,R,D]},De=uo,en=he,da=v.unpack,$s=Math.pow,pa=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];f=da(f,"lab");var x=f[0],I=f[1],R=f[2],D,B,$,G,J,nt;return B=(x+16)/116,D=isNaN(I)?B:B+I/500,$=isNaN(R)?B:B-R/200,B=en.Yn*ho(B),D=en.Xn*ho(D),$=en.Zn*ho($),G=Di(3.2404542*D-1.5371385*B-.4985314*$),J=Di(-.969266*D+1.8760108*B+.041556*$),nt=Di(.0556434*D-.2040259*B+1.0572252*$),[G,J,nt,f.length>3?f[3]:1]},Di=function(f){return 255*(f<=.00304?12.92*f:1.055*$s(f,1/2.4)-.055)},ho=function(f){return f>en.t1?f*f*f:en.t2*(f-en.t0)},co=pa,Qt=v.unpack,Hs=v.type,cn=Y,mi=Z,fo=C,Gs=De;mi.prototype.lab=function(){return Gs(this._rgb)},cn.lab=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(mi,[null].concat(f,["lab"])))},fo.format.lab=co,fo.autodetect.push({p:2,test:function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];if(f=Qt(f,"lab"),Hs(f)==="array"&&f.length===3)return"lab"}});var po=v.unpack,Ws=v.RAD2DEG,ma=Math.sqrt,qs=Math.atan2,Us=Math.round,mo=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=po(f,"lab"),I=x[0],R=x[1],D=x[2],B=ma(R*R+D*D),$=(qs(D,R)*Ws+360)%360;return Us(B*1e4)===0&&($=Number.NaN),[I,B,$]},_a=mo,bn=v.unpack,Vs=De,ga=_a,Gn=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=bn(f,"rgb"),I=x[0],R=x[1],D=x[2],B=Vs(I,R,D),$=B[0],G=B[1],J=B[2];return ga($,G,J)},va=Gn,ba=v.unpack,Ys=v.DEG2RAD,Xs=Math.sin,_o=Math.cos,js=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=ba(f,"lch"),I=x[0],R=x[1],D=x[2];return isNaN(D)&&(D=0),D=D*Ys,[I,_o(D)*R,Xs(D)*R]},go=js,ya=v.unpack,gr=go,ei=co,Ks=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];f=ya(f,"lch");var x=f[0],I=f[1],R=f[2],D=gr(x,I,R),B=D[0],$=D[1],G=D[2],J=ei(B,$,G),nt=J[0],ft=J[1],ot=J[2];return[nt,ft,ot,f.length>3?f[3]:1]},_i=Ks,Cn=v.unpack,wa=_i,Js=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=Cn(f,"hcl").reverse();return wa.apply(void 0,x)},xa=Js,Qs=v.unpack,vo=v.type,vr=Y,br=Z,bo=C,yo=va;br.prototype.lch=function(){return yo(this._rgb)},br.prototype.hcl=function(){return yo(this._rgb).reverse()},vr.lch=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(br,[null].concat(f,["lch"])))},vr.hcl=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(br,[null].concat(f,["hcl"])))},bo.format.lch=_i,bo.format.hcl=xa,["lch","hcl"].forEach(function(f){return bo.autodetect.push({p:2,test:function(){for(var _=[],x=arguments.length;x--;)_[x]=arguments[x];if(_=Qs(_,f),vo(_)==="array"&&_.length===3)return f}})});var tl={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},nn=tl,gi=Z,ka=C,vi=v.type,Fi=nn,bi=oa,el=Jn;gi.prototype.name=function(){for(var f=el(this._rgb,"rgb"),_=0,x=Object.keys(Fi);_<x.length;_+=1){var I=x[_];if(Fi[I]===f)return I.toLowerCase()}return f},ka.format.named=function(f){if(f=f.toLowerCase(),Fi[f])return bi(Fi[f]);throw new Error("unknown color name: "+f)},ka.autodetect.push({p:5,test:function(f){for(var _=[],x=arguments.length-1;x-- >0;)_[x]=arguments[x+1];if(!_.length&&vi(f)==="string"&&Fi[f.toLowerCase()])return"named"}});var $i=v.unpack,Pa=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=$i(f,"rgb"),I=x[0],R=x[1],D=x[2];return(I<<16)+(R<<8)+D},yr=Pa,nl=v.type,Wn=function(f){if(nl(f)=="number"&&f>=0&&f<=16777215){var _=f>>16,x=f>>8&255,I=f&255;return[_,x,I,1]}throw new Error("unknown num color: "+f)},wr=Wn,il=Y,xr=Z,Ma=C,Sn=v.type,rl=yr;xr.prototype.num=function(){return rl(this._rgb)},il.num=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(xr,[null].concat(f,["num"])))},Ma.format.num=wr,Ma.autodetect.push({p:5,test:function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];if(f.length===1&&Sn(f[0])==="number"&&f[0]>=0&&f[0]<=16777215)return"num"}});var yi=Y,wo=Z,yn=C,kr=v.unpack,xo=v.type,Pr=Math.round;wo.prototype.rgb=function(f){return f===void 0&&(f=!0),f===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Pr)},wo.prototype.rgba=function(f){return f===void 0&&(f=!0),this._rgb.slice(0,4).map(function(_,x){return x<3?f===!1?_:Pr(_):_})},yi.rgb=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(wo,[null].concat(f,["rgb"])))},yn.format.rgb=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=kr(f,"rgba");return x[3]===void 0&&(x[3]=1),x},yn.autodetect.push({p:3,test:function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];if(f=kr(f,"rgba"),xo(f)==="array"&&(f.length===3||f.length===4&&xo(f[3])=="number"&&f[3]>=0&&f[3]<=1))return"rgb"}});var ni=Math.log,ko=function(f){var _=f/100,x,I,R;return _<66?(x=255,I=_<6?0:-155.25485562709179-.44596950469579133*(I=_-2)+104.49216199393888*ni(I),R=_<20?0:-254.76935184120902+.8274096064007395*(R=_-10)+115.67994401066147*ni(R)):(x=351.97690566805693+.114206453784165*(x=_-55)-40.25366309332127*ni(x),I=325.4494125711974+.07943456536662342*(I=_-50)-28.0852963507957*ni(I),R=255),[x,I,R,1]},Hi=ko,wi=Hi,Mr=v.unpack,Po=Math.round,La=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];for(var x=Mr(f,"rgb"),I=x[0],R=x[2],D=1e3,B=4e4,$=.4,G;B-D>$;){G=(B+D)*.5;var J=wi(G);J[2]/J[0]>=R/I?B=G:D=G}return Po(G)},ol=La,xi=Y,Lr=Z,Tr=C,al=ol;Lr.prototype.temp=Lr.prototype.kelvin=Lr.prototype.temperature=function(){return al(this._rgb)},xi.temp=xi.kelvin=xi.temperature=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(Lr,[null].concat(f,["temp"])))},Tr.format.temp=Tr.format.kelvin=Tr.format.temperature=Hi;var Ta=v.unpack,Mo=Math.cbrt,wn=Math.pow,Cr=Math.sign,sl=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=Ta(f,"rgb"),I=x[0],R=x[1],D=x[2],B=[Lo(I/255),Lo(R/255),Lo(D/255)],$=B[0],G=B[1],J=B[2],nt=Mo(.4122214708*$+.5363325363*G+.0514459929*J),ft=Mo(.2119034982*$+.6806995451*G+.1073969566*J),ot=Mo(.0883024619*$+.2817188376*G+.6299787005*J);return[.2104542553*nt+.793617785*ft-.0040720468*ot,1.9779984951*nt-2.428592205*ft+.4505937099*ot,.0259040371*nt+.7827717662*ft-.808675766*ot]},Gi=sl;function Lo(f){var _=Math.abs(f);return _<.04045?f/12.92:(Cr(f)||1)*wn((_+.055)/1.055,2.4)}var Ca=v.unpack,Sr=Math.pow,Wi=Math.sign,ll=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];f=Ca(f,"lab");var x=f[0],I=f[1],R=f[2],D=Sr(x+.3963377774*I+.2158037573*R,3),B=Sr(x-.1055613458*I-.0638541728*R,3),$=Sr(x-.0894841775*I-1.291485548*R,3);return[255*Er(4.0767416621*D-3.3077115913*B+.2309699292*$),255*Er(-1.2684380046*D+2.6097574011*B-.3413193965*$),255*Er(-.0041960863*D-.7034186147*B+1.707614701*$),f.length>3?f[3]:1]},ii=ll;function Er(f){var _=Math.abs(f);return _>.0031308?(Wi(f)||1)*(1.055*Sr(_,1/2.4)-.055):f*12.92}var Sa=v.unpack,ul=v.type,En=Y,To=Z,Co=C,qi=Gi;To.prototype.oklab=function(){return qi(this._rgb)},En.oklab=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(To,[null].concat(f,["oklab"])))},Co.format.oklab=ii,Co.autodetect.push({p:3,test:function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];if(f=Sa(f,"oklab"),ul(f)==="array"&&f.length===3)return"oklab"}});var hl=v.unpack,Ir=Gi,Ui=_a,Ea=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];var x=hl(f,"rgb"),I=x[0],R=x[1],D=x[2],B=Ir(I,R,D),$=B[0],G=B[1],J=B[2];return Ui($,G,J)},Ia=Ea,cl=v.unpack,za=go,Aa=ii,Oa=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];f=cl(f,"lch");var x=f[0],I=f[1],R=f[2],D=za(x,I,R),B=D[0],$=D[1],G=D[2],J=Aa(B,$,G),nt=J[0],ft=J[1],ot=J[2];return[nt,ft,ot,f.length>3?f[3]:1]},Na=Oa,Ba=v.unpack,fl=v.type,Ra=Y,So=Z,Za=C,t=Ia;So.prototype.oklch=function(){return t(this._rgb)},Ra.oklch=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];return new(Function.prototype.bind.apply(So,[null].concat(f,["oklch"])))},Za.format.oklch=Na,Za.autodetect.push({p:3,test:function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];if(f=Ba(f,"oklch"),fl(f)==="array"&&f.length===3)return"oklch"}});var i=Z,a=v.type;i.prototype.alpha=function(f,_){return _===void 0&&(_=!1),f!==void 0&&a(f)==="number"?_?(this._rgb[3]=f,this):new i([this._rgb[0],this._rgb[1],this._rgb[2],f],"rgb"):this._rgb[3]};var u=Z;u.prototype.clipped=function(){return this._rgb._clipped||!1};var m=Z,T=he;m.prototype.darken=function(f){f===void 0&&(f=1);var _=this,x=_.lab();return x[0]-=T.Kn*f,new m(x,"lab").alpha(_.alpha(),!0)},m.prototype.brighten=function(f){return f===void 0&&(f=1),this.darken(-f)},m.prototype.darker=m.prototype.darken,m.prototype.brighter=m.prototype.brighten;var N=Z;N.prototype.get=function(f){var _=f.split("."),x=_[0],I=_[1],R=this[x]();if(I){var D=x.indexOf(I)-(x.substr(0,2)==="ok"?2:0);if(D>-1)return R[D];throw new Error("unknown channel "+I+" in mode "+x)}else return R};var H=Z,V=v.type,it=Math.pow,vt=1e-7,Wt=20;H.prototype.luminance=function(f){if(f!==void 0&&V(f)==="number"){if(f===0)return new H([0,0,0,this._rgb[3]],"rgb");if(f===1)return new H([255,255,255,this._rgb[3]],"rgb");var _=this.luminance(),x="rgb",I=Wt,R=function(B,$){var G=B.interpolate($,.5,x),J=G.luminance();return Math.abs(f-J)<vt||!I--?G:J>f?R(B,G):R(G,$)},D=(_>f?R(new H([0,0,0]),this):R(this,new H([255,255,255]))).rgb();return new H(D.concat([this._rgb[3]]))}return te.apply(void 0,this._rgb.slice(0,3))};var te=function(f,_,x){return f=fn(f),_=fn(_),x=fn(x),.2126*f+.7152*_+.0722*x},fn=function(f){return f/=255,f<=.03928?f/12.92:it((f+.055)/1.055,2.4)},Ae={},Vi=Z,In=v.type,ki=Ae,Da=function(f,_,x){x===void 0&&(x=.5);for(var I=[],R=arguments.length-3;R-- >0;)I[R]=arguments[R+3];var D=I[0]||"lrgb";if(!ki[D]&&!I.length&&(D=Object.keys(ki)[0]),!ki[D])throw new Error("interpolation mode "+D+" is not defined");return In(f)!=="object"&&(f=new Vi(f)),In(_)!=="object"&&(_=new Vi(_)),ki[D](f,_,x).alpha(f.alpha()+x*(_.alpha()-f.alpha()))},Fa=Z,dl=Da;Fa.prototype.mix=Fa.prototype.interpolate=function(f,_){_===void 0&&(_=.5);for(var x=[],I=arguments.length-2;I-- >0;)x[I]=arguments[I+2];return dl.apply(void 0,[this,f,_].concat(x))};var Eo=Z;Eo.prototype.premultiply=function(f){f===void 0&&(f=!1);var _=this._rgb,x=_[3];return f?(this._rgb=[_[0]*x,_[1]*x,_[2]*x,x],this):new Eo([_[0]*x,_[1]*x,_[2]*x,x],"rgb")};var Io=Z,$a=he;Io.prototype.saturate=function(f){f===void 0&&(f=1);var _=this,x=_.lch();return x[1]+=$a.Kn*f,x[1]<0&&(x[1]=0),new Io(x,"lch").alpha(_.alpha(),!0)},Io.prototype.desaturate=function(f){return f===void 0&&(f=1),this.saturate(-f)};var Ce=Z,Yi=v.type;Ce.prototype.set=function(f,_,x){x===void 0&&(x=!1);var I=f.split("."),R=I[0],D=I[1],B=this[R]();if(D){var $=R.indexOf(D)-(R.substr(0,2)==="ok"?2:0);if($>-1){if(Yi(_)=="string")switch(_.charAt(0)){case"+":B[$]+=+_;break;case"-":B[$]+=+_;break;case"*":B[$]*=+_.substr(1);break;case"/":B[$]/=+_.substr(1);break;default:B[$]=+_}else if(Yi(_)==="number")B[$]=_;else throw new Error("unsupported value for Color.set");var G=new Ce(B,R);return x?(this._rgb=G._rgb,this):G}throw new Error("unknown channel "+D+" in mode "+R)}else return B};var pl=Z,ml=function(f,_,x){var I=f._rgb,R=_._rgb;return new pl(I[0]+x*(R[0]-I[0]),I[1]+x*(R[1]-I[1]),I[2]+x*(R[2]-I[2]),"rgb")};Ae.rgb=ml;var _l=Z,Xi=Math.sqrt,ri=Math.pow,gl=function(f,_,x){var I=f._rgb,R=I[0],D=I[1],B=I[2],$=_._rgb,G=$[0],J=$[1],nt=$[2];return new _l(Xi(ri(R,2)*(1-x)+ri(G,2)*x),Xi(ri(D,2)*(1-x)+ri(J,2)*x),Xi(ri(B,2)*(1-x)+ri(nt,2)*x),"rgb")};Ae.lrgb=gl;var ed=Z,nd=function(f,_,x){var I=f.lab(),R=_.lab();return new ed(I[0]+x*(R[0]-I[0]),I[1]+x*(R[1]-I[1]),I[2]+x*(R[2]-I[2]),"lab")};Ae.lab=nd;var Iu=Z,zr=function(f,_,x,I){var R,D,B,$;I==="hsl"?(B=f.hsl(),$=_.hsl()):I==="hsv"?(B=f.hsv(),$=_.hsv()):I==="hcg"?(B=f.hcg(),$=_.hcg()):I==="hsi"?(B=f.hsi(),$=_.hsi()):I==="lch"||I==="hcl"?(I="hcl",B=f.hcl(),$=_.hcl()):I==="oklch"&&(B=f.oklch().reverse(),$=_.oklch().reverse());var G,J,nt,ft,ot,gt;(I.substr(0,1)==="h"||I==="oklch")&&(R=B,G=R[0],nt=R[1],ot=R[2],D=$,J=D[0],ft=D[1],gt=D[2]);var _t,Ut,Kt,ne;return!isNaN(G)&&!isNaN(J)?(J>G&&J-G>180?ne=J-(G+360):J<G&&G-J>180?ne=J+360-G:ne=J-G,Ut=G+x*ne):isNaN(G)?isNaN(J)?Ut=Number.NaN:(Ut=J,(ot==1||ot==0)&&I!="hsv"&&(_t=ft)):(Ut=G,(gt==1||gt==0)&&I!="hsv"&&(_t=nt)),_t===void 0&&(_t=nt+x*(ft-nt)),Kt=ot+x*(gt-ot),I==="oklch"?new Iu([Kt,_t,Ut],I):new Iu([Ut,_t,Kt],I)},id=zr,zu=function(f,_,x){return id(f,_,x,"lch")};Ae.lch=zu,Ae.hcl=zu;var rd=Z,od=function(f,_,x){var I=f.num(),R=_.num();return new rd(I+x*(R-I),"num")};Ae.num=od;var ad=zr,sd=function(f,_,x){return ad(f,_,x,"hcg")};Ae.hcg=sd;var ld=zr,ud=function(f,_,x){return ld(f,_,x,"hsi")};Ae.hsi=ud;var hd=zr,cd=function(f,_,x){return hd(f,_,x,"hsl")};Ae.hsl=cd;var fd=zr,dd=function(f,_,x){return fd(f,_,x,"hsv")};Ae.hsv=dd;var pd=Z,md=function(f,_,x){var I=f.oklab(),R=_.oklab();return new pd(I[0]+x*(R[0]-I[0]),I[1]+x*(R[1]-I[1]),I[2]+x*(R[2]-I[2]),"oklab")};Ae.oklab=md;var _d=zr,gd=function(f,_,x){return _d(f,_,x,"oklch")};Ae.oklch=gd;var vl=Z,vd=v.clip_rgb,bl=Math.pow,yl=Math.sqrt,wl=Math.PI,Au=Math.cos,Ou=Math.sin,bd=Math.atan2,yd=function(f,_,x){_===void 0&&(_="lrgb"),x===void 0&&(x=null);var I=f.length;x||(x=Array.from(new Array(I)).map(function(){return 1}));var R=I/x.reduce(function(Ut,Kt){return Ut+Kt});if(x.forEach(function(Ut,Kt){x[Kt]*=R}),f=f.map(function(Ut){return new vl(Ut)}),_==="lrgb")return wd(f,x);for(var D=f.shift(),B=D.get(_),$=[],G=0,J=0,nt=0;nt<B.length;nt++)if(B[nt]=(B[nt]||0)*x[0],$.push(isNaN(B[nt])?0:x[0]),_.charAt(nt)==="h"&&!isNaN(B[nt])){var ft=B[nt]/180*wl;G+=Au(ft)*x[0],J+=Ou(ft)*x[0]}var ot=D.alpha()*x[0];f.forEach(function(Ut,Kt){var ne=Ut.get(_);ot+=Ut.alpha()*x[Kt+1];for(var ce=0;ce<B.length;ce++)if(!isNaN(ne[ce]))if($[ce]+=x[Kt+1],_.charAt(ce)==="h"){var We=ne[ce]/180*wl;G+=Au(We)*x[Kt+1],J+=Ou(We)*x[Kt+1]}else B[ce]+=ne[ce]*x[Kt+1]});for(var gt=0;gt<B.length;gt++)if(_.charAt(gt)==="h"){for(var _t=bd(J/$[gt],G/$[gt])/wl*180;_t<0;)_t+=360;for(;_t>=360;)_t-=360;B[gt]=_t}else B[gt]=B[gt]/$[gt];return ot/=I,new vl(B,_).alpha(ot>.99999?1:ot,!0)},wd=function(f,_){for(var x=f.length,I=[0,0,0,0],R=0;R<f.length;R++){var D=f[R],B=_[R]/x,$=D._rgb;I[0]+=bl($[0],2)*B,I[1]+=bl($[1],2)*B,I[2]+=bl($[2],2)*B,I[3]+=$[3]*B}return I[0]=yl(I[0]),I[1]=yl(I[1]),I[2]=yl(I[2]),I[3]>.9999999&&(I[3]=1),new vl(vd(I))},zn=Y,Ar=v.type,xd=Math.pow,xl=function(f){var _="rgb",x=zn("#ccc"),I=0,R=[0,1],D=[],B=[0,0],$=!1,G=[],J=!1,nt=0,ft=1,ot=!1,gt={},_t=!0,Ut=1,Kt=function(at){if(at=at||["#fff","#000"],at&&Ar(at)==="string"&&zn.brewer&&zn.brewer[at.toLowerCase()]&&(at=zn.brewer[at.toLowerCase()]),Ar(at)==="array"){at.length===1&&(at=[at[0],at[0]]),at=at.slice(0);for(var St=0;St<at.length;St++)at[St]=zn(at[St]);D.length=0;for(var Yt=0;Yt<at.length;Yt++)D.push(Yt/(at.length-1))}return rn(),G=at},ne=function(at){if($!=null){for(var St=$.length-1,Yt=0;Yt<St&&at>=$[Yt];)Yt++;return Yt-1}return 0},ce=function(at){return at},We=function(at){return at},He=function(at,St){var Yt,Vt;if(St==null&&(St=!1),isNaN(at)||at===null)return x;if(St)Vt=at;else if($&&$.length>2){var qe=ne(at);Vt=qe/($.length-2)}else ft!==nt?Vt=(at-nt)/(ft-nt):Vt=1;Vt=We(Vt),St||(Vt=ce(Vt)),Ut!==1&&(Vt=xd(Vt,Ut)),Vt=B[0]+Vt*(1-B[0]-B[1]),Vt=Math.min(1,Math.max(0,Vt));var xe=Math.floor(Vt*1e4);if(_t&&gt[xe])Yt=gt[xe];else{if(Ar(G)==="array")for(var ie=0;ie<D.length;ie++){var me=D[ie];if(Vt<=me){Yt=G[ie];break}if(Vt>=me&&ie===D.length-1){Yt=G[ie];break}if(Vt>me&&Vt<D[ie+1]){Vt=(Vt-me)/(D[ie+1]-me),Yt=zn.interpolate(G[ie],G[ie+1],Vt,_);break}}else Ar(G)==="function"&&(Yt=G(Vt));_t&&(gt[xe]=Yt)}return Yt},rn=function(){return gt={}};Kt(f);var ee=function(at){var St=zn(He(at));return J&&St[J]?St[J]():St};return ee.classes=function(at){if(at!=null){if(Ar(at)==="array")$=at,R=[at[0],at[at.length-1]];else{var St=zn.analyze(R);at===0?$=[St.min,St.max]:$=zn.limits(St,"e",at)}return ee}return $},ee.domain=function(at){if(!arguments.length)return R;nt=at[0],ft=at[at.length-1],D=[];var St=G.length;if(at.length===St&&nt!==ft)for(var Yt=0,Vt=Array.from(at);Yt<Vt.length;Yt+=1){var qe=Vt[Yt];D.push((qe-nt)/(ft-nt))}else{for(var xe=0;xe<St;xe++)D.push(xe/(St-1));if(at.length>2){var ie=at.map(function(_e,ge){return ge/(at.length-1)}),me=at.map(function(_e){return(_e-nt)/(ft-nt)});me.every(function(_e,ge){return ie[ge]===_e})||(We=function(_e){if(_e<=0||_e>=1)return _e;for(var ge=0;_e>=me[ge+1];)ge++;var On=(_e-me[ge])/(me[ge+1]-me[ge]),Li=ie[ge]+On*(ie[ge+1]-ie[ge]);return Li})}}return R=[nt,ft],ee},ee.mode=function(at){return arguments.length?(_=at,rn(),ee):_},ee.range=function(at,St){return Kt(at),ee},ee.out=function(at){return J=at,ee},ee.spread=function(at){return arguments.length?(I=at,ee):I},ee.correctLightness=function(at){return at==null&&(at=!0),ot=at,rn(),ot?ce=function(St){for(var Yt=He(0,!0).lab()[0],Vt=He(1,!0).lab()[0],qe=Yt>Vt,xe=He(St,!0).lab()[0],ie=Yt+(Vt-Yt)*St,me=xe-ie,_e=0,ge=1,On=20;Math.abs(me)>.01&&On-- >0;)(function(){return qe&&(me*=-1),me<0?(_e=St,St+=(ge-St)*.5):(ge=St,St+=(_e-St)*.5),xe=He(St,!0).lab()[0],me=xe-ie})();return St}:ce=function(St){return St},ee},ee.padding=function(at){return at!=null?(Ar(at)==="number"&&(at=[at,at]),B=at,ee):B},ee.colors=function(at,St){arguments.length<2&&(St="hex");var Yt=[];if(arguments.length===0)Yt=G.slice(0);else if(at===1)Yt=[ee(.5)];else if(at>1){var Vt=R[0],qe=R[1]-Vt;Yt=kd(0,at,!1).map(function(ge){return ee(Vt+ge/(at-1)*qe)})}else{f=[];var xe=[];if($&&$.length>2)for(var ie=1,me=$.length,_e=1<=me;_e?ie<me:ie>me;_e?ie++:ie--)xe.push(($[ie-1]+$[ie])*.5);else xe=R;Yt=xe.map(function(ge){return ee(ge)})}return zn[St]&&(Yt=Yt.map(function(ge){return ge[St]()})),Yt},ee.cache=function(at){return at!=null?(_t=at,ee):_t},ee.gamma=function(at){return at!=null?(Ut=at,ee):Ut},ee.nodata=function(at){return at!=null?(x=zn(at),ee):x},ee};function kd(f,_,x){for(var I=[],R=f<_,D=x?R?_+1:_-1:_,B=f;R?B<D:B>D;R?B++:B--)I.push(B);return I}var zo=Z,Pd=xl,Md=function(f){for(var _=[1,1],x=1;x<f;x++){for(var I=[1],R=1;R<=_.length;R++)I[R]=(_[R]||0)+_[R-1];_=I}return _},Ld=function(f){var _,x,I,R,D,B,$;if(f=f.map(function(ot){return new zo(ot)}),f.length===2)_=f.map(function(ot){return ot.lab()}),D=_[0],B=_[1],R=function(ot){var gt=[0,1,2].map(function(_t){return D[_t]+ot*(B[_t]-D[_t])});return new zo(gt,"lab")};else if(f.length===3)x=f.map(function(ot){return ot.lab()}),D=x[0],B=x[1],$=x[2],R=function(ot){var gt=[0,1,2].map(function(_t){return(1-ot)*(1-ot)*D[_t]+2*(1-ot)*ot*B[_t]+ot*ot*$[_t]});return new zo(gt,"lab")};else if(f.length===4){var G;I=f.map(function(ot){return ot.lab()}),D=I[0],B=I[1],$=I[2],G=I[3],R=function(ot){var gt=[0,1,2].map(function(_t){return(1-ot)*(1-ot)*(1-ot)*D[_t]+3*(1-ot)*(1-ot)*ot*B[_t]+3*(1-ot)*ot*ot*$[_t]+ot*ot*ot*G[_t]});return new zo(gt,"lab")}}else if(f.length>=5){var J,nt,ft;J=f.map(function(ot){return ot.lab()}),ft=f.length-1,nt=Md(ft),R=function(ot){var gt=1-ot,_t=[0,1,2].map(function(Ut){return J.reduce(function(Kt,ne,ce){return Kt+nt[ce]*Math.pow(gt,ft-ce)*Math.pow(ot,ce)*ne[Ut]},0)});return new zo(_t,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return R},Td=function(f){var _=Ld(f);return _.scale=function(){return Pd(_)},_},kl=Y,An=function(f,_,x){if(!An[x])throw new Error("unknown blend mode "+x);return An[x](f,_)},Pi=function(f){return function(_,x){var I=kl(x).rgb(),R=kl(_).rgb();return kl.rgb(f(I,R))}},Mi=function(f){return function(_,x){var I=[];return I[0]=f(_[0],x[0]),I[1]=f(_[1],x[1]),I[2]=f(_[2],x[2]),I}},Cd=function(f){return f},Sd=function(f,_){return f*_/255},Ed=function(f,_){return f>_?_:f},Id=function(f,_){return f>_?f:_},zd=function(f,_){return 255*(1-(1-f/255)*(1-_/255))},Ad=function(f,_){return _<128?2*f*_/255:255*(1-2*(1-f/255)*(1-_/255))},Od=function(f,_){return 255*(1-(1-_/255)/(f/255))},Nd=function(f,_){return f===255?255:(f=255*(_/255)/(1-f/255),f>255?255:f)};An.normal=Pi(Mi(Cd)),An.multiply=Pi(Mi(Sd)),An.screen=Pi(Mi(zd)),An.overlay=Pi(Mi(Ad)),An.darken=Pi(Mi(Ed)),An.lighten=Pi(Mi(Id)),An.dodge=Pi(Mi(Nd)),An.burn=Pi(Mi(Od));for(var Bd=An,Pl=v.type,Rd=v.clip_rgb,Zd=v.TWOPI,Dd=Math.pow,Fd=Math.sin,$d=Math.cos,Nu=Y,Hd=function(f,_,x,I,R){f===void 0&&(f=300),_===void 0&&(_=-1.5),x===void 0&&(x=1),I===void 0&&(I=1),R===void 0&&(R=[0,1]);var D=0,B;Pl(R)==="array"?B=R[1]-R[0]:(B=0,R=[R,R]);var $=function(G){var J=Zd*((f+120)/360+_*G),nt=Dd(R[0]+B*G,I),ft=D!==0?x[0]+G*D:x,ot=ft*nt*(1-nt)/2,gt=$d(J),_t=Fd(J),Ut=nt+ot*(-.14861*gt+1.78277*_t),Kt=nt+ot*(-.29227*gt-.90649*_t),ne=nt+ot*(1.97294*gt);return Nu(Rd([Ut*255,Kt*255,ne*255,1]))};return $.start=function(G){return G==null?f:(f=G,$)},$.rotations=function(G){return G==null?_:(_=G,$)},$.gamma=function(G){return G==null?I:(I=G,$)},$.hue=function(G){return G==null?x:(x=G,Pl(x)==="array"?(D=x[1]-x[0],D===0&&(x=x[1])):D=0,$)},$.lightness=function(G){return G==null?R:(Pl(G)==="array"?(R=G,B=G[1]-G[0]):(R=[G,G],B=0),$)},$.scale=function(){return Nu.scale($)},$.hue(x),$},Gd=Z,Wd="0123456789abcdef",qd=Math.floor,Ud=Math.random,Vd=function(){for(var f="#",_=0;_<6;_++)f+=Wd.charAt(qd(Ud()*16));return new Gd(f,"hex")},Ml=d,Bu=Math.log,Yd=Math.pow,Xd=Math.floor,jd=Math.abs,Ru=function(f,_){_===void 0&&(_=null);var x={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Ml(f)==="object"&&(f=Object.values(f)),f.forEach(function(I){_&&Ml(I)==="object"&&(I=I[_]),I!=null&&!isNaN(I)&&(x.values.push(I),x.sum+=I,I<x.min&&(x.min=I),I>x.max&&(x.max=I),x.count+=1)}),x.domain=[x.min,x.max],x.limits=function(I,R){return Zu(x,I,R)},x},Zu=function(f,_,x){_===void 0&&(_="equal"),x===void 0&&(x=7),Ml(f)=="array"&&(f=Ru(f));var I=f.min,R=f.max,D=f.values.sort(function(Tl,Cl){return Tl-Cl});if(x===1)return[I,R];var B=[];if(_.substr(0,1)==="c"&&(B.push(I),B.push(R)),_.substr(0,1)==="e"){B.push(I);for(var $=1;$<x;$++)B.push(I+$/x*(R-I));B.push(R)}else if(_.substr(0,1)==="l"){if(I<=0)throw new Error("Logarithmic scales are only possible for values > 0");var G=Math.LOG10E*Bu(I),J=Math.LOG10E*Bu(R);B.push(I);for(var nt=1;nt<x;nt++)B.push(Yd(10,G+nt/x*(J-G)));B.push(R)}else if(_.substr(0,1)==="q"){B.push(I);for(var ft=1;ft<x;ft++){var ot=(D.length-1)*ft/x,gt=Xd(ot);if(gt===ot)B.push(D[gt]);else{var _t=ot-gt;B.push(D[gt]*(1-_t)+D[gt+1]*_t)}}B.push(R)}else if(_.substr(0,1)==="k"){var Ut,Kt=D.length,ne=new Array(Kt),ce=new Array(x),We=!0,He=0,rn=null;rn=[],rn.push(I);for(var ee=1;ee<x;ee++)rn.push(I+ee/x*(R-I));for(rn.push(R);We;){for(var at=0;at<x;at++)ce[at]=0;for(var St=0;St<Kt;St++)for(var Yt=D[St],Vt=Number.MAX_VALUE,qe=void 0,xe=0;xe<x;xe++){var ie=jd(rn[xe]-Yt);ie<Vt&&(Vt=ie,qe=xe),ce[qe]++,ne[St]=qe}for(var me=new Array(x),_e=0;_e<x;_e++)me[_e]=null;for(var ge=0;ge<Kt;ge++)Ut=ne[ge],me[Ut]===null?me[Ut]=D[ge]:me[Ut]+=D[ge];for(var On=0;On<x;On++)me[On]*=1/ce[On];We=!1;for(var Li=0;Li<x;Li++)if(me[Li]!==rn[Li]){We=!0;break}rn=me,He++,He>200&&(We=!1)}for(var Ti={},Or=0;Or<x;Or++)Ti[Or]=[];for(var Nr=0;Nr<Kt;Nr++)Ut=ne[Nr],Ti[Ut].push(D[Nr]);for(var ai=[],ji=0;ji<x;ji++)ai.push(Ti[ji][0]),ai.push(Ti[ji][Ti[ji].length-1]);ai=ai.sort(function(Tl,Cl){return Tl-Cl}),B.push(ai[0]);for(var Ao=1;Ao<ai.length;Ao+=2){var Ki=ai[Ao];!isNaN(Ki)&&B.indexOf(Ki)===-1&&B.push(Ki)}}return B},Du={analyze:Ru,limits:Zu},Fu=Z,Kd=function(f,_){f=new Fu(f),_=new Fu(_);var x=f.luminance(),I=_.luminance();return x>I?(x+.05)/(I+.05):(I+.05)/(x+.05)},$u=Z,oi=Math.sqrt,Be=Math.pow,Jd=Math.min,Qd=Math.max,Hu=Math.atan2,Gu=Math.abs,Ha=Math.cos,Wu=Math.sin,tp=Math.exp,qu=Math.PI,ep=function(f,_,x,I,R){x===void 0&&(x=1),I===void 0&&(I=1),R===void 0&&(R=1);var D=function(Ki){return 360*Ki/(2*qu)},B=function(Ki){return 2*qu*Ki/360};f=new $u(f),_=new $u(_);var $=Array.from(f.lab()),G=$[0],J=$[1],nt=$[2],ft=Array.from(_.lab()),ot=ft[0],gt=ft[1],_t=ft[2],Ut=(G+ot)/2,Kt=oi(Be(J,2)+Be(nt,2)),ne=oi(Be(gt,2)+Be(_t,2)),ce=(Kt+ne)/2,We=.5*(1-oi(Be(ce,7)/(Be(ce,7)+Be(25,7)))),He=J*(1+We),rn=gt*(1+We),ee=oi(Be(He,2)+Be(nt,2)),at=oi(Be(rn,2)+Be(_t,2)),St=(ee+at)/2,Yt=D(Hu(nt,He)),Vt=D(Hu(_t,rn)),qe=Yt>=0?Yt:Yt+360,xe=Vt>=0?Vt:Vt+360,ie=Gu(qe-xe)>180?(qe+xe+360)/2:(qe+xe)/2,me=1-.17*Ha(B(ie-30))+.24*Ha(B(2*ie))+.32*Ha(B(3*ie+6))-.2*Ha(B(4*ie-63)),_e=xe-qe;_e=Gu(_e)<=180?_e:xe<=qe?_e+360:_e-360,_e=2*oi(ee*at)*Wu(B(_e)/2);var ge=ot-G,On=at-ee,Li=1+.015*Be(Ut-50,2)/oi(20+Be(Ut-50,2)),Ti=1+.045*St,Or=1+.015*St*me,Nr=30*tp(-Be((ie-275)/25,2)),ai=2*oi(Be(St,7)/(Be(St,7)+Be(25,7))),ji=-ai*Wu(2*B(Nr)),Ao=oi(Be(ge/(x*Li),2)+Be(On/(I*Ti),2)+Be(_e/(R*Or),2)+ji*(On/(I*Ti))*(_e/(R*Or)));return Qd(0,Jd(100,Ao))},Uu=Z,np=function(f,_,x){x===void 0&&(x="lab"),f=new Uu(f),_=new Uu(_);var I=f.get(x),R=_.get(x),D=0;for(var B in I){var $=(I[B]||0)-(R[B]||0);D+=$*$}return Math.sqrt(D)},ip=Z,rp=function(){for(var f=[],_=arguments.length;_--;)f[_]=arguments[_];try{return new(Function.prototype.bind.apply(ip,[null].concat(f))),!0}catch{return!1}},Vu=Y,Yu=xl,op={cool:function(){return Yu([Vu.hsl(180,1,.9),Vu.hsl(250,.7,.4)])},hot:function(){return Yu(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Ga={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Ll=0,Xu=Object.keys(Ga);Ll<Xu.length;Ll+=1){var ju=Xu[Ll];Ga[ju.toLowerCase()]=Ga[ju]}var ap=Ga,$e=Y;$e.average=yd,$e.bezier=Td,$e.blend=Bd,$e.cubehelix=Hd,$e.mix=$e.interpolate=Da,$e.random=Vd,$e.scale=xl,$e.analyze=Du.analyze,$e.contrast=Kd,$e.deltaE=ep,$e.distance=np,$e.limits=Du.limits,$e.valid=rp,$e.scales=op,$e.colors=nn,$e.brewer=ap;var sp=$e;return sp})})(Af);const ke=Af.exports;var Of={},Nf={exports:{}};(function(e,n){var r=[],o={},s=function(g){return typeof g>"u"},h=/\s*(\.\d+|\d+(?:\.\d+)?)(%)?\s*/,l=/\s*(\.\d+|100|\d?\d(?:\.\d+)?)%\s*/,c=/\s*(\.\d+|\d+(?:\.\d+)?)\s*/,p=new RegExp("^(rgb|hsl|hsv)a?\\("+h.source+","+h.source+","+h.source+"(?:,"+c.source+")?\\)$","i");function d(g){if(Object.prototype.toString.apply(g)==="[object Array]"){if(typeof g[0]=="string"&&typeof d[g[0]]=="function")return new d[g[0]](g.slice(1,g.length));if(g.length===4)return new d.RGB(g[0]/255,g[1]/255,g[2]/255,g[3]/255)}else if(typeof g=="string"){var P=g.toLowerCase();o[P]&&(g="#"+o[P]),P==="transparent"&&(g="rgba(0,0,0,0)");var k=g.match(p);if(k){var v=k[1].toUpperCase(),C=s(k[8])?k[8]:parseFloat(k[8]),z=v[0]==="H",E=k[3]?100:z?360:255,S=k[5]||z?100:255,F=k[7]||z?100:255;if(s(d[v]))throw new Error("one.color."+v+" is not installed.");return new d[v](parseFloat(k[2])/E,parseFloat(k[4])/S,parseFloat(k[6])/F,C)}g.length<6&&(g=g.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3"));var O=g.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i);if(O)return new d.RGB(parseInt(O[1],16)/255,parseInt(O[2],16)/255,parseInt(O[3],16)/255);if(d.CMYK){var Z=g.match(new RegExp("^cmyk\\("+l.source+","+l.source+","+l.source+","+l.source+"\\)$","i"));if(Z)return new d.CMYK(parseFloat(Z[1])/100,parseFloat(Z[2])/100,parseFloat(Z[3])/100,parseFloat(Z[4])/100)}}else if(typeof g=="object"&&g.isColor)return g;return!1}function b(g,P,k){d[g]=new Function(P.join(","),"if (Object.prototype.toString.apply("+P[0]+") === '[object Array]') {"+P.map(function(S,F){return S+"="+P[0]+"["+F+"];"}).reverse().join("")+"}if ("+P.filter(function(S){return S!=="alpha"}).map(function(S){return"isNaN("+S+")"}).join("||")+'){throw new Error("['+g+']: Invalid color: ("+'+P.join('+","+')+'+")");}'+P.map(function(S){return S==="hue"?"this._hue=hue<0?hue-Math.floor(hue):hue%1":S==="alpha"?"this._alpha=(isNaN(alpha)||alpha>1)?1:(alpha<0?0:alpha);":"this._"+S+"="+S+"<0?0:("+S+">1?1:"+S+")"}).join(";")+";"),d[g].propertyNames=P;var v=d[g].prototype;["valueOf","hex","hexa","css","cssa"].forEach(function(S){v[S]=v[S]||(g==="RGB"?v.hex:new Function("return this.rgb()."+S+"();"))}),v.isColor=!0,v.equals=function(S,F){s(F)&&(F=1e-10),S=S[g.toLowerCase()]();for(var O=0;O<P.length;O=O+1)if(Math.abs(this["_"+P[O]]-S["_"+P[O]])>F)return!1;return!0},v.toJSON=new Function("return ['"+g+"', "+P.map(function(S){return"this._"+S},this).join(", ")+"];");for(var C in k)if(k.hasOwnProperty(C)){var z=C.match(/^from(.*)$/);z?d[z[1].toUpperCase()].prototype[g.toLowerCase()]=k[C]:v[C]=k[C]}v[g.toLowerCase()]=function(){return this},v.toString=new Function('return "[one.color.'+g+':"+'+P.map(function(S,F){return'" '+P[F]+'="+this._'+S}).join("+")+'+"]";'),P.forEach(function(S,F){v[S]=v[S==="black"?"k":S[0]]=new Function("value","isDelta","if (typeof value === 'undefined') {return this._"+S+";}if (isDelta) {return new this.constructor("+P.map(function(O,Z){return"this._"+O+(S===O?"+value":"")}).join(", ")+");}return new this.constructor("+P.map(function(O,Z){return S===O?"value":"this._"+O}).join(", ")+");")});function E(S,F){var O={};O[F.toLowerCase()]=new Function("return this.rgb()."+F.toLowerCase()+"();"),d[F].propertyNames.forEach(function(rt,Y){O[rt]=O[rt==="black"?"k":rt[0]]=new Function("value","isDelta","return this."+F.toLowerCase()+"()."+rt+"(value, isDelta);")});for(var Z in O)O.hasOwnProperty(Z)&&d[S].prototype[Z]===void 0&&(d[S].prototype[Z]=O[Z])}r.forEach(function(S){E(g,S),E(S,g)}),r.push(g)}d.installMethod=function(g,P){r.forEach(function(k){d[k].prototype[g]=P})},b("RGB",["red","green","blue","alpha"],{hex:function(){var g=(Math.round(255*this._red)*65536+Math.round(255*this._green)*256+Math.round(255*this._blue)).toString(16);return"#"+"00000".substr(0,6-g.length)+g},hexa:function(){var g=Math.round(this._alpha*255).toString(16);return"#"+"00".substr(0,2-g.length)+g+this.hex().substr(1,6)},css:function(){return"rgb("+Math.round(255*this._red)+","+Math.round(255*this._green)+","+Math.round(255*this._blue)+")"},cssa:function(){return"rgba("+Math.round(255*this._red)+","+Math.round(255*this._green)+","+Math.round(255*this._blue)+","+this._alpha+")"}}),e.exports=d,typeof jQuery<"u"&&s(jQuery.color)&&(jQuery.color=d),o={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},b("XYZ",["x","y","z","alpha"],{fromRgb:function(){var g=function(C){return C>.04045?Math.pow((C+.055)/1.055,2.4):C/12.92},P=g(this._red),k=g(this._green),v=g(this._blue);return new d.XYZ(P*.4124564+k*.3575761+v*.1804375,P*.2126729+k*.7151522+v*.072175,P*.0193339+k*.119192+v*.9503041,this._alpha)},rgb:function(){var g=this._x,P=this._y,k=this._z,v=function(C){return C>.0031308?1.055*Math.pow(C,1/2.4)-.055:12.92*C};return new d.RGB(v(g*3.2404542+P*-1.5371385+k*-.4985314),v(g*-.969266+P*1.8760108+k*.041556),v(g*.0556434+P*-.2040259+k*1.0572252),this._alpha)},lab:function(){var g=function(C){return C>.008856?Math.pow(C,.3333333333333333):7.787037*C+.13793103448275862},P=g(this._x/95.047),k=g(this._y/100),v=g(this._z/108.883);return new d.LAB(116*k-16,500*(P-k),200*(k-v),this._alpha)}}),b("LAB",["l","a","b","alpha"],{fromRgb:function(){return this.xyz().lab()},rgb:function(){return this.xyz().rgb()},xyz:function(){var g=function(C){var z=Math.pow(C,3);return z>.008856?z:(C-.13793103448275862)/7.87},P=(this._l+16)/116,k=this._a/500+P,v=P-this._b/200;return new d.XYZ(g(k)*95.047,g(P)*100,g(v)*108.883,this._alpha)}}),b("HSV",["hue","saturation","value","alpha"],{rgb:function(){var g=this._hue,P=this._saturation,k=this._value,v=Math.min(5,Math.floor(g*6)),C=g*6-v,z=k*(1-P),E=k*(1-C*P),S=k*(1-(1-C)*P),F,O,Z;switch(v){case 0:F=k,O=S,Z=z;break;case 1:F=E,O=k,Z=z;break;case 2:F=z,O=k,Z=S;break;case 3:F=z,O=E,Z=k;break;case 4:F=S,O=z,Z=k;break;case 5:F=k,O=z,Z=E;break}return new d.RGB(F,O,Z,this._alpha)},hsl:function(){var g=(2-this._saturation)*this._value,P=this._saturation*this._value,k=g<=1?g:2-g,v;return k<1e-9?v=0:v=P/k,new d.HSL(this._hue,v,g/2,this._alpha)},fromRgb:function(){var g=this._red,P=this._green,k=this._blue,v=Math.max(g,P,k),C=Math.min(g,P,k),z=v-C,E,S=v===0?0:z/v,F=v;if(z===0)E=0;else switch(v){case g:E=(P-k)/z/6+(P<k?1:0);break;case P:E=(k-g)/z/6+1/3;break;case k:E=(g-P)/z/6+2/3;break}return new d.HSV(E,S,F,this._alpha)}}),b("HSL",["hue","saturation","lightness","alpha"],{hsv:function(){var g=this._lightness*2,P=this._saturation*(g<=1?g:2-g),k;return g+P<1e-9?k=0:k=2*P/(g+P),new d.HSV(this._hue,k,(g+P)/2,this._alpha)},rgb:function(){return this.hsv().rgb()},fromRgb:function(){return this.hsv().hsl()}}),b("CMYK",["cyan","magenta","yellow","black","alpha"],{rgb:function(){return new d.RGB(1-this._cyan*(1-this._black)-this._black,1-this._magenta*(1-this._black)-this._black,1-this._yellow*(1-this._black)-this._black,this._alpha)},fromRgb:function(){var g=this._red,P=this._green,k=this._blue,v=1-g,C=1-P,z=1-k,E=1;return g||P||k?(E=Math.min(v,Math.min(C,z)),v=(v-E)/(1-E),C=(C-E)/(1-E),z=(z-E)/(1-E)):E=1,new d.CMYK(v,C,z,E,this._alpha)}}),d.installMethod("clearer",function(g){return this.alpha(isNaN(g)?-.1:-g,!0)}),d.installMethod("darken",function(g){return this.lightness(isNaN(g)?-.1:-g,!0)}),d.installMethod("desaturate",function(g){return this.saturation(isNaN(g)?-.1:-g,!0)});function y(){var g=this.rgb(),P=g._red*.3+g._green*.59+g._blue*.11;return new d.RGB(P,P,P,this._alpha)}d.installMethod("greyscale",y),d.installMethod("grayscale",y),d.installMethod("lighten",function(g){return this.lightness(isNaN(g)?.1:g,!0)}),d.installMethod("mix",function(g,P){g=d(g).rgb(),P=1-(isNaN(P)?.5:P);var k=P*2-1,v=this._alpha-g._alpha,C=((k*v===-1?k:(k+v)/(1+k*v))+1)/2,z=1-C,E=this.rgb();return new d.RGB(E._red*C+g._red*z,E._green*C+g._green*z,E._blue*C+g._blue*z,E._alpha*P+g._alpha*(1-P))}),d.installMethod("negate",function(){var g=this.rgb();return new d.RGB(1-g._red,1-g._green,1-g._blue,this._alpha)}),d.installMethod("opaquer",function(g){return this.alpha(isNaN(g)?.1:g,!0)}),d.installMethod("rotate",function(g){return this.hue((g||0)/360,!0)}),d.installMethod("saturate",function(g){return this.saturation(isNaN(g)?.1:g,!0)}),d.installMethod("toAlpha",function(g){var P=this.rgb(),k=d(g).rgb(),v=1e-10,C=new d.RGB(0,0,0,P._alpha),z=["_red","_green","_blue"];return z.forEach(function(E){P[E]<v?C[E]=P[E]:P[E]>k[E]?C[E]=(P[E]-k[E])/(1-k[E]):P[E]>k[E]?C[E]=(k[E]-P[E])/k[E]:C[E]=0}),C._red>C._green?C._red>C._blue?P._alpha=C._red:P._alpha=C._blue:C._green>C._blue?P._alpha=C._green:P._alpha=C._blue,P._alpha<v||(z.forEach(function(E){P[E]=(P[E]-k[E])/P._alpha+k[E]}),P._alpha*=C._alpha),P})})(Nf);var Bf={},Nl=2.2,j0=[3.240712470389558,-.969259258688888,.05563600315398933,-1.5372626602963142,1.875996969313966,-.2039948802843549,-.49857440415943116,.041556132211625726,1.0570636917433989],K0=[.41242371206635076,.21265606784927693,.019331987577444885,.3575793401363035,.715157818248362,.11919267420354762,.1804662232369621,.0721864539171564,.9504491124870351],J0={protan:{x:.7465,y:.2535,m:1.273463,yi:-.073894},deutan:{x:1.4,y:-.4,m:.968437,yi:.003331},tritan:{x:.1748,y:0,m:.062921,yi:.292119},custom:{x:.735,y:.265,m:-1.059259,yi:1.026914}},Q0=function(e){var n=K0,r={},o=e.R/255,s=e.G/255,h=e.B/255;return o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,h=h>.04045?Math.pow((h+.055)/1.055,2.4):h/12.92,r.X=o*n[0]+s*n[3]+h*n[6],r.Y=o*n[1]+s*n[4]+h*n[7],r.Z=o*n[2]+s*n[5]+h*n[8],r},tv=function(e){var n=e.X+e.Y+e.Z;return n===0?{x:0,y:0,Y:e.Y}:{x:e.X/n,y:e.Y/n,Y:e.Y}};Bf.Blind=function(e,n,r){var o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E,S,F,O,Z,rt,Y;return n==="achroma"?(o=e.R*.212656+e.G*.715158+e.B*.072186,o={R:o,G:o,B:o},r&&(s=1.75,h=s+1,o.R=(s*o.R+e.R)/h,o.G=(s*o.G+e.G)/h,o.B=(s*o.B+e.B)/h),o):(l=J0[n],c=tv(Q0(e)),p=(c.y-l.y)/(c.x-l.x),d=c.y-c.x*p,b=(l.yi-d)/(p-l.m),y=p*b+d,P=0,o={},o.X=b*c.Y/y,o.Y=c.Y,o.Z=(1-(b+y))*c.Y/y,O=.312713*c.Y/.329016,Z=.358271*c.Y/.329016,g=O-o.X,k=Z-o.Z,rt=j0,v=g*rt[0]+P*rt[3]+k*rt[6],C=g*rt[1]+P*rt[4]+k*rt[7],z=g*rt[2]+P*rt[5]+k*rt[8],o.R=o.X*rt[0]+o.Y*rt[3]+o.Z*rt[6],o.G=o.X*rt[1]+o.Y*rt[4]+o.Z*rt[7],o.B=o.X*rt[2]+o.Y*rt[5]+o.Z*rt[8],E=((o.R<0?0:1)-o.R)/v,S=((o.G<0?0:1)-o.G)/C,F=((o.B<0?0:1)-o.B)/z,E=E>1||E<0?0:E,S=S>1||S<0?0:S,F=F>1||F<0?0:F,Y=E>S?E:S,F>Y&&(Y=F),o.R+=Y*v,o.G+=Y*C,o.B+=Y*z,o.R=255*(o.R<=0?0:o.R>=1?1:Math.pow(o.R,1/Nl)),o.G=255*(o.G<=0?0:o.G>=1?1:Math.pow(o.G,1/Nl)),o.B=255*(o.B<=0?0:o.B>=1?1:Math.pow(o.B,1/Nl)),r&&(s=1.75,h=s+1,o.R=(s*o.R+e.R)/h,o.G=(s*o.G+e.G)/h,o.B=(s*o.B+e.B)/h),o)};(function(e){var n=Nf.exports,r=Bf.Blind,o={protanomaly:{type:"protan",anomalize:!0},protanopia:{type:"protan"},deuteranomaly:{type:"deutan",anomalize:!0},deuteranopia:{type:"deutan"},tritanomaly:{type:"tritan",anomalize:!0},tritanopia:{type:"tritan"},achromatomaly:{type:"achroma",anomalize:!0},achromatopsia:{type:"achroma"}},s=function(c){return Math.round(c*255)},h=function(c){return function(p,d){var b=n(p);if(!b)return d?{R:0,G:0,B:0}:"#000000";var y=new r({R:s(b.red()||0),G:s(b.green()||0),B:s(b.blue()||0)},o[c].type,o[c].anomalize);return y.R=y.R||0,y.G=y.G||0,y.B=y.B||0,d?(delete y.X,delete y.Y,delete y.Z,y):new n.RGB(y.R%256/255,y.G%256/255,y.B%256/255,1).hex()}};for(var l in o)e[l]=h(l)})(Of);const Ts=Rt("none"),ev=ea([{id:"none",label:"None - Pick a CVD to simulate"},{id:"deuteranomaly",label:"Deuteranomaly"},{id:"deuteranopia",label:"Deuteranopia"},{id:"protanomaly",label:"Protanomaly"},{id:"protanopia",label:"Protanopia"},{id:"tritanomaly",label:"Tritanomaly"},{id:"tritanopia",label:"Tritanopia"},{id:"achromatomaly",label:"Achromatomaly"},{id:"achromatopsia",label:"Achromatopsia"}]),nv=Rt(!0),iv=Rt(!0),au=Rt(!1),Ro=Rt("template"),Ih=Rt(120),zh=Rt(300),su=Rt(!1),lu=Rt(!1);class rv{constructor(n=Rt(!0),r=Rt(!0),o=Rt(!0),s=Rt(1),h=Rt(1),l=Rt(1),c=Rt(!0),p=Rt(!1),d=Rt(25)){this.showPointLayer=n,this.showAreaLayer=r,this.showBasemapLayer=o,this.pointLayerOpacity=s,this.areaLayerOpacity=h,this.basemapLayerOpacity=l,this.countryScale=c,this.pointsSizeFixed=p,this.pointsSizeValue=d}}const As=new rv,Ah=Rt("single"),Oh=Rt("hex"),Nh=Rt(""),Bh=Rt(""),Rh=Rt(""),Zh=Rt(""),Dh=Rt(""),Bl=(e,n,r,o=0,s=1)=>n+(e-o)*(r-n)/(s-o),Xt=(()=>{const e=Rt([{color:"#000000",id:0,pointInputIndex:0,areaInputIndex:0}]),{set:n,subscribe:r,update:o}=e;function s(k,v="none"){e.update(C=>{if(k<C.length)for(let S=k;S<C.length;S++)Xt.removeFromInput(!0,C[S].id),Xt.removeFromInput(!1,C[S].id);C.length=k;let z=ke.random();z=z.set("oklch.l","0.7");let E=360/k;v!="none"&&(z=ke(v),E=360/k+1,z=z.set("oklch.h","+"+E.toString()),z=z.set("oklch.c",Bl(Math.random(),.3,1)));for(let S=0;S<k;S++)C[S]==null&&(C[S]={color:"",id:S,pointInputIndex:-1,areaInputIndex:-1}),C[S].color=z.hex(),z=ke(z).set("oklch.h","+"+E.toString());return C})}function h(k){e.update(v=>{if(k<v.length)for(let C=k;C<v.length;C++)Xt.removeFromInput(!0,v[C].id),Xt.removeFromInput(!1,v[C].id);v.length=k;for(let C=0;C<k;C++)v[C]==null&&(v[C]={color:"",id:C,pointInputIndex:-1,areaInputIndex:-1}),v[C].color=ke.random().hex();return v})}function l(k){e.update(v=>{if(k.length<v.length)for(let C=k.length;C<v.length;C++)Xt.removeFromInput(!0,v[C].id),Xt.removeFromInput(!1,v[C].id);v.length=k.length;for(let C=0;C<k.length;C++)v[C]==null&&(v[C]={color:"",id:C,pointInputIndex:-1,areaInputIndex:-1}),v[C].color=k[C];return v})}function c(k){const v=/#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/g;let C=k.match(v);C!=null?(Xt.load(C),su.set(!0),setTimeout(()=>{su.set(!1)},1500)):(lu.set(!0),setTimeout(()=>{lu.set(!1)},1500))}function p(k,v,C){k?Xt.loadFromText(C):Xt.generate(v),e.update(z=>(Xt.setInputIndex(z,0,!0,0),Xt.setInputIndex(z,0,!1,0),z.length>=2&&(Xt.setInputIndex(z,1,!0,1),Xt.setInputIndex(z,1,!1,1)),z.length>=3&&(Xt.setInputIndex(z,2,!0,2),Xt.setInputIndex(z,2,!1,2)),z))}function d(k,v,C,z){return C?k[v].pointInputIndex=z:k[v].areaInputIndex=z,k}function b(k,v){e.update(C=>(C.forEach(z=>{let E=ke(z.color).get("oklch.h");k<v?E=Bl(E,k,v,0,360):(E=Bl(E,k,360+v,0,360),E>360&&(E-=360)),z.color=ke(z.color).set("oklch.h",E).hex()}),C))}function y(k,v){let C=k?"pointInputIndex":"areaInputIndex";e.update(z=>{let E=z.findIndex(F=>F.id==v),S=z[E][C];return S<0||(z[E][C]=-1,z.forEach(F=>{F[C]>S&&(F[C]-=1)})),z})}function g(k,v){let C=k?"pointInputIndex":"areaInputIndex";e.update(z=>{let E=z.findIndex(O=>O.id==v);z[E][C]>=0&&Xt.removeFromInput(k,v);let F=z.filter(O=>O[C]!==-1);return z[E][C]=F.length,z})}function P(k,v,C){let z=k?"pointInputIndex":"areaInputIndex";e.update(E=>{let S=E.findIndex(rt=>rt.id==v),F=E.findIndex(rt=>rt.id==C);if(S==F)return E;let O=E[S][z],Z=E[F][z];return O>=0&&Xt.removeFromInput(k,v),E.forEach(rt=>{rt[z]>=Z&&(rt[z]+=1)}),E[S][z]=Z,E})}return{set:n,subscribe:r,update:o,generate:s,generateRandom:h,load:l,loadFromText:c,initialize:p,setInputIndex:d,rescaleHue:b,removeFromInput:y,addToInputEnd:g,addToInputPosition:P}})(),ov=ea(["sequential","diverging","qualitative"]),ku=Rt("sequential"),Pu=Rt("sequential"),ia=Rt(9),ra=Rt(9),Rf=(e,n)=>na(e,r=>{let o;return n?(o=r.filter(s=>s.pointInputIndex!==-1),o.sort((s,h)=>s.pointInputIndex-h.pointInputIndex)):(o=r.filter(s=>s.areaInputIndex!==-1),o.sort((s,h)=>s.areaInputIndex-h.areaInputIndex)),o}),Mu=Rf(Xt,!0),Lu=Rf(Xt,!1),Tu=Rt(!0),Cu=Rt(!0),Zf=Rt(!0),Df=Rt(!0),Ff=(e,n,r,o,s,h,l)=>na([e,n,r,o,s,h,l],([c,p,d,b,y,g,P])=>{let k=c.map(v=>Object.assign({},v));switch(b){case"sequential":if(g){k.length<2&&k.splice(1,0,Object.assign({},k[0])),k[0].color=ke(k[0].color).set("oklch.l",p-d).hex();let v=k.length-1;k[v].color=ke(k[v].color).set("oklch.l",p+d).hex()}break;case"diverging":if(g){if(k.length==2)k.splice(1,0,{color:ke.oklch(.5,0,NaN),id:NaN,pointInputIndex:NaN,areaInputIndex:NaN});else if(k.length==1){k.splice(1,0,{color:ke.oklch(.5,0,NaN),id:NaN,pointInputIndex:NaN,areaInputIndex:NaN});let C=Object.assign({},k[0]);C.color=ke(C.color).set("oklch.h","+180").hex(),k.splice(2,0,C)}if(k[0].color=ke(k[0].color).set("oklch.l",p-d).hex(),k.length>=3){let C=Math.floor(k.length/2),z=k.length%2==1?[C]:[C,C-1];for(const E of z)k[E].color=ke(k[E].color).set("oklch.l",p+d).hex()}let v=k.length-1;k[v].color=ke(k[v].color).set("oklch.l",p-d).hex()}break;case"qualitative":g&&(k=k.map(v=>(v.color=ke(v.color).set("oklch.l",p).hex(),v)));break}return P!="none"&&k.forEach(v=>{v.color=Of[P](v.color)}),k}),$f=Rt(.5),Hf=Rt(.2),Gf=Rt(.7),Wf=Rt(.2),qf=Rt(!1),Uf=Rt(!1),Vf=(e,n)=>na([e,n],([r,o])=>o?-r:r),av=Vf(Hf,qf),sv=Vf(Wf,Uf),lv=Ff(Mu,$f,av,ku,ia,Tu,Ts),uv=Ff(Lu,Gf,sv,Pu,ra,Cu,Ts),Yf=(e,n,r,o,s)=>na([e,n,r,o,s],([h,l,c,p,d])=>{let b=h.map(g=>g.color);if(p&&l=="diverging"){let g=b.slice(0,Math.floor(b.length/2)+1),P=b.slice(Math.floor(b.length/2),b.length),k=ke.scale(g).mode("oklch").correctLightness(),v=ke.scale(P).mode("oklch").correctLightness();b=[...k.colors(c),...v.colors(c)]}let y=ke.scale(b);switch((l=="sequential"||l=="diverging")&&d&&b.length>1&&(y=ke.bezier(b).scale()),y.classes(c).mode("oklch"),l){case"sequential":p&&(y=y.correctLightness());break}return y}),Xf=Yf(lv,ku,ia,Tu,Zf),jf=Yf(uv,Pu,ra,Cu,Df),Fh=Rt(["#000000"]),uu=Rt("#FFFFFF"),Kf=(e,n)=>na([e,n],([r,o])=>r.colors(o)),Su=Kf(Xf,ia),Eu=Kf(jf,ra),Jo=Rt("CartoDB.PositronNoLabels"),Jf=ea([{id:"darkmatter",label:"Dark Matter",provider:"CartoDB.DarkMatterNoLabels"},{id:"imagery",label:"Imagery",provider:"USGS.USImagery"},{id:"osm",label:"OpenStreetMap",provider:"OpenStreetMap.Mapnik"},{id:"positron",label:"Positron",provider:"CartoDB.PositronNoLabels"},{id:"terrain",label:"Terrain",provider:"Stamen.TerrainBackground"},{id:"toner",label:"Toner",provider:"Stamen.TonerBackground"},{id:"voyager",label:"Voyager",provider:"CartoDB.VoyagerNoLabels"}]),Os=()=>{const e=Rt([]),{set:n,subscribe:r,update:o}=e;return{subscribe:r,loadJson:async l=>{let p=[...(await l0(l)).features];e.set(p)},randomData:()=>{e.update(l=>{for(let c in l)l[c].properties.data=Math.random();return l})}}},as=Os(),ss=Os(),ls=Os(),us=Os(),hv=ea([{id:"city",center:[48.2,16.37],zoom:11},{id:"country",center:[55,10],zoom:4}]);function cv(e){let n;return{c(){n=A("div"),w(n,"id","leafletmap"),w(n,"class","h-screen lg:w-1/2 2xl:w-2/3")},m(r,o){Q(r,n,o)},p:Bt,i:Bt,o:Bt,d(r){r&&K(n)}}}function fv(e,n,r){let o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E,S,F;kt(e,ls,ht=>r(16,h=ht)),kt(e,as,ht=>r(17,l=ht)),kt(e,Xf,ht=>r(18,c=ht)),kt(e,jf,ht=>r(19,p=ht)),kt(e,us,ht=>r(20,d=ht)),kt(e,ss,ht=>r(21,b=ht)),kt(e,Jo,ht=>r(27,C=ht)),kt(e,uu,ht=>r(30,S=ht)),kt(e,hv,ht=>r(35,F=ht));const{showPointLayer:O,showAreaLayer:Z,showBasemapLayer:rt,pointLayerOpacity:Y,areaLayerOpacity:Nt,basemapLayerOpacity:Mt,countryScale:ut,pointsSizeFixed:X,pointsSizeValue:j}=As;kt(e,O,ht=>r(25,k=ht)),kt(e,Z,ht=>r(26,v=ht)),kt(e,rt,ht=>r(28,z=ht)),kt(e,Y,ht=>r(22,y=ht)),kt(e,Nt,ht=>r(23,g=ht)),kt(e,Mt,ht=>r(24,P=ht)),kt(e,ut,ht=>r(29,E=ht)),kt(e,X,ht=>r(15,s=ht)),kt(e,j,ht=>r(14,o=ht));let lt=!1,st,dt,ct,U,et,W,mt=Ka.tileLayer.provider(C),$t="";const Et=ht=>{let Tt=document.getElementsByClassName("leaflet-container")[0];Tt.style.background=ht},At=()=>{z?C!==$t&&(st.hasLayer(mt)&&st.removeLayer(mt),mt=Ka.tileLayer.provider(C),st.addLayer(mt),$t=C):($t="",st.hasLayer(mt)&&st.removeLayer(mt))},It=ht=>{let Tt=document.getElementsByClassName("leaflet-layer")[0];Tt.style.opacity=ht},Lt=(ht,Tt)=>ht.selectAll("path").data(Tt).join("path"),Gt=(ht,Tt)=>{ht.attr("fill",Dt=>Tt(Dt.properties.data))},fe=(ht,Tt,Dt,jt)=>{ht.attr("d",oe=>(Dt?Tt.pointRadius(jt):Tt.pointRadius(oe.properties.data*jt),Tt(oe.geometry)))},de=(ht,Tt,Dt,jt,oe)=>{fe(ht,Dt,jt,oe),Tt.attr("d",Dt)};function re(ht,Tt){let Dt=st.latLngToLayerPoint([Tt,ht]);this.stream.point(Dt.x,Dt.y)}const zt=N0().projection(B0({point:re})),qt=()=>{st.setView(F[E?1:0].center,F[E?1:0].zoom)},ye=()=>{r(11,U=E?Lt(ct,b):Lt(ct,d)),r(13,W=E?Lt(et,l):Lt(et,h)),de(W,U,zt,s,o)};return Ss(async()=>{st=Ka.map("leafletmap",{zoomControl:!1}),qt(),Ka.svg().addTo(st),dt=w_(st.getPanes().overlayPane).select("svg"),r(10,ct=dt.append("g").attr("id","areas")),r(12,et=dt.append("g").attr("id","points")),await as.loadJson("data/naturalearth_europe_capitals.geojson"),await ss.loadJson("data/naturalearth_europe.geojson"),await ls.loadJson("data/vienna_swimmingpools.json"),await us.loadJson("data/vienna_districts.json"),as.randomData(),ss.randomData(),ls.randomData(),us.randomData(),r(9,lt=!0),st.on("zoomend",function(){de(W,U,zt,s,o)})}),kp(()=>{}),e.$$.update=()=>{e.$$.dirty[0]&1073742336&&lt&&Et(S),e.$$.dirty[0]&536871424&&lt&&qt(),e.$$.dirty[0]&536871424&&lt&&ye(),e.$$.dirty[0]&402653696&&lt&&At(),e.$$.dirty[0]&67110400&&lt&&ct.classed("hidden",!v),e.$$.dirty[0]&33559040&&lt&&et.classed("hidden",!k),e.$$.dirty[0]&16777728&&lt&&It(P.toString()),e.$$.dirty[0]&8390144&&lt&&ct.style("opacity",g),e.$$.dirty[0]&4198912&&lt&&et.style("opacity",y),e.$$.dirty[0]&3672576&&lt&&Gt(U,p),e.$$.dirty[0]&467456&&lt&&Gt(W,c),e.$$.dirty[0]&254464&&lt&&fe(W,zt,s,o)},[O,Z,rt,Y,Nt,Mt,ut,X,j,lt,ct,U,et,W,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E,S]}class dv extends hn{constructor(n){super(),un(this,n,fv,cv,Je,{},null,[-1,-1])}}function pv(e){let n;return{c(){n=xt("Help content")},m(r,o){Q(r,n,o)},d(r){r&&K(n)}}}function mv(e){let n,r,o,s,h,l,c,p,d,b,y;const g=e[6].default,P=Ac(g,e,e[5],null),k=P||pv();return{c(){n=A("div"),r=A("label"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="w-4 h-4 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',o=q(),s=A("div"),h=A("div"),l=A("h2"),c=xt(e[0]),p=q(),d=A("p"),k&&k.c(),w(r,"tabindex","0"),w(r,"class","btn btn-circle rounded-lg btn-ghost btn-xs text-info"),w(l,"class","card-title"),w(h,"class","card-body"),w(s,"tabindex","0"),w(s,"class",b="card compact dropdown-content bg-base-100 rounded-lg w-fit "+e[4]+" border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300"),w(n,"class","dropdown"),Pt(n,"dropdown-top",e[2]),Pt(n,"dropdown-end",e[3]),Pt(n,"absolute",e[1]),Pt(n,"top-2",e[1]),Pt(n,"right-2",e[1])},m(v,C){Q(v,n,C),M(n,r),M(n,o),M(n,s),M(s,h),M(h,l),M(l,c),M(h,p),M(h,d),k&&k.m(d,null),y=!0},p(v,[C]){(!y||C&1)&&Ue(c,v[0]),P&&P.p&&(!y||C&32)&&Bc(P,g,v,v[5],y?Nc(g,v[5],C,null):Rc(v[5]),null),(!y||C&16&&b!==(b="card compact dropdown-content bg-base-100 rounded-lg w-fit "+v[4]+" border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300"))&&w(s,"class",b),C&4&&Pt(n,"dropdown-top",v[2]),C&8&&Pt(n,"dropdown-end",v[3]),C&2&&Pt(n,"absolute",v[1]),C&2&&Pt(n,"top-2",v[1]),C&2&&Pt(n,"right-2",v[1])},i(v){y||(yt(k,v),y=!0)},o(v){Ct(k,v),y=!1},d(v){v&&K(n),k&&k.d(v)}}}function _v(e,n,r){let{$$slots:o={},$$scope:s}=n,{title:h="Help"}=n,{absolute:l=!1}=n,{dropdownTop:c=!1}=n,{dropdownEnd:p=!1}=n,{minWidth:d="min-w-[16rem]"}=n;return e.$$set=b=>{"title"in b&&r(0,h=b.title),"absolute"in b&&r(1,l=b.absolute),"dropdownTop"in b&&r(2,c=b.dropdownTop),"dropdownEnd"in b&&r(3,p=b.dropdownEnd),"minWidth"in b&&r(4,d=b.minWidth),"$$scope"in b&&r(5,s=b.$$scope)},[h,l,c,p,d,s,o]}class rr extends hn{constructor(n){super(),un(this,n,_v,mv,Je,{title:0,absolute:1,dropdownTop:2,dropdownEnd:3,minWidth:4})}}function gv(e){const n=e-1;return n*n*n+1}function Yn(e,{delay:n=0,duration:r=400,easing:o=Ic}={}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:o,css:h=>`opacity: ${h*s}`}}function $h(e,{delay:n=0,duration:r=400,easing:o=gv,start:s=0,opacity:h=0}={}){const l=getComputedStyle(e),c=+l.opacity,p=l.transform==="none"?"":l.transform,d=1-s,b=c*(1-h);return{delay:n,duration:r,easing:o,css:(y,g)=>`
			transform: ${p} scale(${1-d*g});
			opacity: ${c-b*g}
		`}}var vv={format:"image/png",quality:.92,width:void 0,height:void 0,Canvas:void 0,crossOrigin:void 0},bv=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n={}),new Promise(function(r){n=Object.assign({},vv,n);var o=n.Canvas?new n.Canvas:window.document.createElement("canvas"),s=n.Image||window.Image,h=e.map(function(c){return new Promise(function(p,d){c.constructor.name!=="Object"&&(c={src:c});var b=new s;b.crossOrigin=n.crossOrigin,b.onerror=function(){return d(new Error("Couldn't load image"))},b.onload=function(){return p(Object.assign({},c,{img:b}))},b.src=c.src})}),l=o.getContext("2d");r(Promise.all(h).then(function(c){var p=function(d){return n[d]||Math.max.apply(Math,c.map(function(b){return b.img[d]}))};return o.width=p("width"),o.height=p("height"),c.forEach(function(d){return l.globalAlpha=d.opacity?d.opacity:1,l.drawImage(d.img,d.x||0,d.y||0)}),n.Canvas&&n.format==="image/jpeg"?new Promise(function(d,b){o.toDataURL(n.format,{quality:n.quality,progressive:!1},function(y,g){if(y){b(y);return}d(g)})}):o.toDataURL(n.format,n.quality)}))})};function Hh(e,n,r){const o=e.slice();return o[33]=n[r],o[34]=n,o[35]=r,o}function Gh(e,n,r){const o=e.slice();return o[36]=n[r],o}function Wh(e){let n,r=e[36].label+"",o,s;return{c(){n=A("option"),o=xt(r),n.__value=s=e[36].provider,n.value=n.__value},m(h,l){Q(h,n,l),M(n,o)},p(h,l){l[0]&1024&&r!==(r=h[36].label+"")&&Ue(o,r),l[0]&1024&&s!==(s=h[36].provider)&&(n.__value=s,n.value=n.__value)},d(h){h&&K(n)}}}function yv(e){let n,r,o,s,h,l,c=e[5]&&qh(e);return{c(){n=A("button"),n.textContent="Generate",r=q(),c&&c.c(),o=Yr(),w(n,"class","btn btn-secondary self-end mt-2"),Pt(n,"loading",e[4])},m(p,d){Q(p,n,d),Q(p,r,d),c&&c.m(p,d),Q(p,o,d),s=!0,h||(l=pt(n,"click",e[28]),h=!0)},p(p,d){d[0]&16&&Pt(n,"loading",p[4]),p[5]?c?(c.p(p,d),d[0]&32&&yt(c,1)):(c=qh(p),c.c(),yt(c,1),c.m(o.parentNode,o)):c&&(sn(),Ct(c,1,1,()=>{c=null}),ln())},i(p){s||(yt(c),s=!0)},o(p){Ct(c),s=!1},d(p){p&&K(n),p&&K(r),c&&c.d(p),p&&K(o),h=!1,l()}}}function wv(e){let n,r,o,s,h,l,c,p=e[11]&&Uh(),d=e[12]&&Vh(e);return{c(){n=A("button"),n.textContent="Load",r=q(),p&&p.c(),o=q(),d&&d.c(),s=Yr(),w(n,"class","btn btn-secondary self-end mt-2")},m(b,y){Q(b,n,y),Q(b,r,y),p&&p.m(b,y),Q(b,o,y),d&&d.m(b,y),Q(b,s,y),h=!0,l||(c=pt(n,"click",e[27]),l=!0)},p(b,y){b[11]?p?y[0]&2048&&yt(p,1):(p=Uh(),p.c(),yt(p,1),p.m(o.parentNode,o)):p&&(sn(),Ct(p,1,1,()=>{p=null}),ln()),b[12]?d?(d.p(b,y),y[0]&4096&&yt(d,1)):(d=Vh(b),d.c(),yt(d,1),d.m(s.parentNode,s)):d&&(sn(),Ct(d,1,1,()=>{d=null}),ln())},i(b){h||(yt(p),yt(d),h=!0)},o(b){Ct(p),Ct(d),h=!1},d(b){b&&K(n),b&&K(r),p&&p.d(b),b&&K(o),d&&d.d(b),b&&K(s),l=!1,c()}}}function qh(e){let n,r,o,s,h,l,c,p=e[13].length+"",d,b,y,g;return{c(){n=A("div"),r=A("div"),o=Pn("svg"),s=Pn("path"),h=q(),l=A("span"),c=xt("Successfully generated "),d=xt(p),b=xt(" seed colors!"),w(s,"stroke-linecap","round"),w(s,"stroke-linejoin","round"),w(s,"stroke-width","2"),w(s,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),w(o,"xmlns","http://www.w3.org/2000/svg"),w(o,"class","stroke-current flex-shrink-0 h-6 w-6"),w(o,"fill","none"),w(o,"viewBox","0 0 24 24"),w(n,"class","z-10 absolute bottom-20 w-fit alert alert-success p-4 self-center border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300")},m(P,k){Q(P,n,k),M(n,r),M(r,o),M(o,s),M(r,h),M(r,l),M(l,c),M(l,d),M(l,b),g=!0},p(P,k){(!g||k[0]&8192)&&p!==(p=P[13].length+"")&&Ue(d,p)},i(P){g||(Ke(()=>{y||(y=kn(n,Yn,{duration:300},!0)),y.run(1)}),g=!0)},o(P){y||(y=kn(n,Yn,{duration:300},!1)),y.run(0),g=!1},d(P){P&&K(n),P&&y&&y.end()}}}function Uh(e){let n,r,o;return{c(){n=A("div"),n.innerHTML=`<div><svg xmlns="http://www.w3.org/2000/svg" class="stroke-current flex-shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> 
                    <span>Error! Try importing actual hex color codes!</span></div>`,w(n,"class","z-10 absolute bottom-20 w-fit alert alert-error p-4 self-center border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300")},m(s,h){Q(s,n,h),o=!0},i(s){o||(Ke(()=>{r||(r=kn(n,Yn,{duration:300},!0)),r.run(1)}),o=!0)},o(s){r||(r=kn(n,Yn,{duration:300},!1)),r.run(0),o=!1},d(s){s&&K(n),s&&r&&r.end()}}}function Vh(e){let n,r,o,s,h,l,c,p=e[13].length+"",d,b,y,g;return{c(){n=A("div"),r=A("div"),o=Pn("svg"),s=Pn("path"),h=q(),l=A("span"),c=xt("Successfully loaded "),d=xt(p),b=xt(" seed colors!"),w(s,"stroke-linecap","round"),w(s,"stroke-linejoin","round"),w(s,"stroke-width","2"),w(s,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),w(o,"xmlns","http://www.w3.org/2000/svg"),w(o,"class","stroke-current flex-shrink-0 h-6 w-6"),w(o,"fill","none"),w(o,"viewBox","0 0 24 24"),w(n,"class","z-10 absolute bottom-20 w-fit alert alert-success p-4 self-center border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300")},m(P,k){Q(P,n,k),M(n,r),M(r,o),M(o,s),M(r,h),M(r,l),M(l,c),M(l,d),M(l,b),g=!0},p(P,k){(!g||k[0]&8192)&&p!==(p=P[13].length+"")&&Ue(d,p)},i(P){g||(Ke(()=>{y||(y=kn(n,Yn,{duration:300},!0)),y.run(1)}),g=!0)},o(P){y||(y=kn(n,Yn,{duration:300},!1)),y.run(0),g=!1},d(P){P&&K(n),P&&y&&y.end()}}}function xv(e){let n,r,o,s,h;return{c(){n=xt("Seed colors are the basis for the palette derivation on the next page. "),r=A("br"),o=q(),s=A("br"),h=xt(`Whenever the seed colors are displayed you can click on them to adjust them\r
                further.`)},m(l,c){Q(l,n,c),Q(l,r,c),Q(l,o,c),Q(l,s,c),Q(l,h,c)},p:Bt,d(l){l&&K(n),l&&K(r),l&&K(o),l&&K(s),l&&K(h)}}}function Yh(e){let n,r,o=e[33].color+"",s,h,l,c,p,d,b,y;function g(){e[29].call(c,e[34],e[35])}return{c(){n=A("div"),r=A("label"),s=xt(o),l=q(),c=A("input"),d=q(),w(r,"class","w-full text-center text-2xs absolute bottom-0 hover:cursor-pointer"),w(r,"for",h=e[33].color),w(c,"class","w-12 h-12 mb-4 mx-1 hover:cursor-pointer"),w(c,"id",p=e[33].color),w(c,"type","color"),w(n,"class","relative")},m(P,k){Q(P,n,k),M(n,r),M(r,s),M(n,l),M(n,c),se(c,e[33].color),M(n,d),b||(y=pt(c,"input",g),b=!0)},p(P,k){e=P,k[0]&8192&&o!==(o=e[33].color+"")&&Ue(s,o),k[0]&8192&&h!==(h=e[33].color)&&w(r,"for",h),k[0]&8192&&p!==(p=e[33].color)&&w(c,"id",p),k[0]&8192&&se(c,e[33].color)},d(P){P&&K(n),b=!1,y()}}}function kv(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E,S,F,O,Z,rt,Y,Nt,Mt,ut,X,j,lt,st,dt,ct,U,et,W,mt,$t,Et,At,It,Lt,Gt,fe,de,re,zt,qt,ye,ht,Tt,Dt,jt,oe,Me,Ot,Ft,ae,Se,Ee,Fe,Ne,Ye,Ve,Fn,Qe,mn,jn,$n,Xe=e[10],Ie=[];for(let bt=0;bt<Xe.length;bt+=1)Ie[bt]=Wh(Gh(e,Xe,bt));const ci=[wv,yv],Ze=[];function Kn(bt,le){return bt[0]?0:1}Ft=Kn(e),ae=Ze[Ft]=ci[Ft](e),Ve=new rr({props:{dropdownTop:!0,dropdownEnd:!0,absolute:!0,title:"Seed colors",$$slots:{default:[xv]},$$scope:{ctx:e}}});let _n=e[13],ze=[];for(let bt=0;bt<_n.length;bt+=1)ze[bt]=Yh(Hh(e,_n,bt));return{c(){n=A("div"),r=A("h2"),r.textContent="Welcome!",o=q(),s=A("p"),h=xt("This tool is here to help you work with color palettes for thematic maps."),l=A("br"),c=xt(`\r
        First time here? Check out the\r
        `),p=A("button"),p.textContent="tutorial",d=xt("."),b=q(),y=A("h3"),y.textContent="I want to...",g=q(),P=A("div"),k=A("label"),v=A("input"),C=q(),z=A("span"),E=xt("generate "),S=A("input"),F=xt(" seed colors"),O=q(),Z=A("div"),rt=A("label"),Y=A("input"),Nt=q(),Mt=A("span"),Mt.textContent="with harmoniously spread hues",ut=q(),X=A("label"),j=A("input"),lt=q(),st=A("span"),dt=xt("with hues ranging from "),ct=A("input"),U=xt(`\r
                    to\r
                    `),et=A("input"),W=xt(" degrees"),mt=q(),$t=A("label"),Et=A("input"),At=q(),It=A("span"),Lt=xt("fitted to this basemap:"),Gt=A("select");for(let bt=0;bt<Ie.length;bt+=1)Ie[bt].c();fe=q(),de=A("label"),re=A("input"),zt=q(),qt=A("span"),qt.textContent="randomly",ye=q(),ht=A("label"),Tt=A("input"),Dt=q(),jt=A("span"),jt.textContent="load seed colors",oe=q(),Me=A("textarea"),Ot=q(),ae.c(),Se=q(),Ee=A("div"),Fe=A("div"),Ne=A("h3"),Ne.textContent="Current seed colors",Ye=q(),Pe(Ve.$$.fragment),Fn=q(),Qe=A("div");for(let bt=0;bt<ze.length;bt+=1)ze[bt].c();w(r,"class","text-lg font-semibold"),w(p,"class","link hover:text-secondary-focus"),w(s,"class","pt-2"),w(y,"class","font-semibold pt-2"),w(v,"type","radio"),w(v,"name","seed"),v.__value=!1,v.value=v.__value,w(v,"class","radio checked:bg-secondary"),e[16][0].push(v),w(S,"type","number"),w(S,"min","1"),w(S,"max","20"),w(S,"class","input input-xs w-14 label-text text-base"),w(z,"class","label-text text-base pl-2"),w(k,"class","label cursor-pointer"),w(Y,"type","radio"),w(Y,"class","radio radio-accent"),Y.__value="template",Y.value=Y.__value,e[16][1].push(Y),w(Mt,"class","label-text pl-2"),w(rt,"class","cursor-pointer label"),w(j,"type","radio"),w(j,"class","radio radio-accent"),j.__value="filter",j.value=j.__value,e[16][1].push(j),w(ct,"type","number"),w(ct,"min","0"),w(ct,"max","360"),w(ct,"step","1"),w(ct,"class","input input-xs w-[4.5rem] label-text text-base"),w(et,"type","number"),w(et,"min","0"),w(et,"max","360"),w(et,"step","1"),w(et,"class","input input-xs w-[4.5rem] label-text text-base"),w(st,"class","label-text pl-2"),w(X,"class","cursor-pointer label"),w(Et,"type","radio"),w(Et,"class","radio radio-accent"),Et.__value="basemap",Et.value=Et.__value,e[16][1].push(Et),w(Gt,"class","select select-accent select-xs max-w-xs ml-1"),e[9]===void 0&&Ke(()=>e[23].call(Gt)),w(It,"class","label-text pl-2"),w($t,"class","cursor-pointer label"),w(re,"type","radio"),w(re,"class","radio radio-accent"),re.__value="random",re.value=re.__value,e[16][1].push(re),w(qt,"class","label-text pl-2"),w(de,"class","cursor-pointer label"),w(Z,"class","form-control items-start pl-10"),Pt(Z,"hidden",e[0]),w(Tt,"type","radio"),w(Tt,"name","seed"),Tt.__value=!0,Tt.value=Tt.__value,w(Tt,"class","radio checked:bg-secondary"),e[16][0].push(Tt),w(jt,"class","label-text text-base pl-2"),w(ht,"class","label cursor-pointer"),w(Me,"class","textarea textarea-accent w-full"),w(Me,"placeholder","Paste an array with seed colors here. \rExample: #7fc97f, #beaed4, #fdc086"),Pt(Me,"hidden",!e[0]),w(P,"class","form-control items-start w-full"),w(Ne,"class","font-semibold"),w(Fe,"class","flex flex-row items-baseline justify-between"),w(Qe,"class","flex flex-row flex-wrap pt-2"),w(Ee,"class","w-full bg-base-200 p-4 my-2 relative rounded-lg border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300"),w(n,"class","flex flex-col items-start")},m(bt,le){Q(bt,n,le),M(n,r),M(n,o),M(n,s),M(s,h),M(s,l),M(s,c),M(s,p),M(s,d),M(n,b),M(n,y),M(n,g),M(n,P),M(P,k),M(k,v),v.checked=v.__value===e[0],M(k,C),M(k,z),M(z,E),M(z,S),se(S,e[1]),M(z,F),M(P,O),M(P,Z),M(Z,rt),M(rt,Y),Y.checked=Y.__value===e[6],M(rt,Nt),M(rt,Mt),M(Z,ut),M(Z,X),M(X,j),j.checked=j.__value===e[6],M(X,lt),M(X,st),M(st,dt),M(st,ct),se(ct,e[7]),M(st,U),M(st,et),se(et,e[8]),M(st,W),M(Z,mt),M(Z,$t),M($t,Et),Et.checked=Et.__value===e[6],M($t,At),M($t,It),M(It,Lt),M(It,Gt);for(let Ge=0;Ge<Ie.length;Ge+=1)Ie[Ge].m(Gt,null);Ei(Gt,e[9]),M(Z,fe),M(Z,de),M(de,re),re.checked=re.__value===e[6],M(de,zt),M(de,qt),M(P,ye),M(P,ht),M(ht,Tt),Tt.checked=Tt.__value===e[0],M(ht,Dt),M(ht,jt),M(P,oe),M(P,Me),se(Me,e[2]),M(n,Ot),Ze[Ft].m(n,null),M(n,Se),M(n,Ee),M(Ee,Fe),M(Fe,Ne),M(Fe,Ye),ve(Ve,Fe,null),M(Ee,Fn),M(Ee,Qe);for(let Ge=0;Ge<ze.length;Ge+=1)ze[Ge].m(Qe,null);mn=!0,jn||($n=[pt(p,"click",e[14]),pt(v,"change",e[15]),pt(S,"input",e[17]),pt(Y,"change",e[18]),pt(j,"change",e[19]),pt(ct,"input",e[20]),pt(et,"input",e[21]),pt(Et,"change",e[22]),pt(Gt,"change",e[23]),pt(re,"change",e[24]),pt(Tt,"change",e[25]),pt(Me,"input",e[26])],jn=!0)},p(bt,le){if(le[0]&1&&(v.checked=v.__value===bt[0]),le[0]&2&&Oe(S.value)!==bt[1]&&se(S,bt[1]),le[0]&64&&(Y.checked=Y.__value===bt[6]),le[0]&64&&(j.checked=j.__value===bt[6]),le[0]&128&&Oe(ct.value)!==bt[7]&&se(ct,bt[7]),le[0]&256&&Oe(et.value)!==bt[8]&&se(et,bt[8]),le[0]&64&&(Et.checked=Et.__value===bt[6]),le[0]&1024){Xe=bt[10];let ue;for(ue=0;ue<Xe.length;ue+=1){const Mn=Gh(bt,Xe,ue);Ie[ue]?Ie[ue].p(Mn,le):(Ie[ue]=Wh(Mn),Ie[ue].c(),Ie[ue].m(Gt,null))}for(;ue<Ie.length;ue+=1)Ie[ue].d(1);Ie.length=Xe.length}le[0]&1536&&Ei(Gt,bt[9]),le[0]&64&&(re.checked=re.__value===bt[6]),le[0]&1&&Pt(Z,"hidden",bt[0]),le[0]&1&&(Tt.checked=Tt.__value===bt[0]),le[0]&4&&se(Me,bt[2]),le[0]&1&&Pt(Me,"hidden",!bt[0]);let Ge=Ft;Ft=Kn(bt),Ft===Ge?Ze[Ft].p(bt,le):(sn(),Ct(Ze[Ge],1,1,()=>{Ze[Ge]=null}),ln(),ae=Ze[Ft],ae?ae.p(bt,le):(ae=Ze[Ft]=ci[Ft](bt),ae.c()),yt(ae,1),ae.m(n,Se));const fi={};if(le[1]&256&&(fi.$$scope={dirty:le,ctx:bt}),Ve.$set(fi),le[0]&8192){_n=bt[13];let ue;for(ue=0;ue<_n.length;ue+=1){const Mn=Hh(bt,_n,ue);ze[ue]?ze[ue].p(Mn,le):(ze[ue]=Yh(Mn),ze[ue].c(),ze[ue].m(Qe,null))}for(;ue<ze.length;ue+=1)ze[ue].d(1);ze.length=_n.length}},i(bt){mn||(yt(ae),yt(Ve.$$.fragment,bt),mn=!0)},o(bt){Ct(ae),Ct(Ve.$$.fragment,bt),mn=!1},d(bt){bt&&K(n),e[16][0].splice(e[16][0].indexOf(v),1),e[16][1].splice(e[16][1].indexOf(Y),1),e[16][1].splice(e[16][1].indexOf(j),1),e[16][1].splice(e[16][1].indexOf(Et),1),dn(Ie,bt),e[16][1].splice(e[16][1].indexOf(re),1),e[16][0].splice(e[16][0].indexOf(Tt),1),Ze[Ft].d(),be(Ve),dn(ze,bt),jn=!1,Re($n)}}}function Pv(e,n,r){let o,s,h,l,c,p,d,b,y;kt(e,Fh,W=>r(30,o=W)),kt(e,Ro,W=>r(6,s=W)),kt(e,Ih,W=>r(7,h=W)),kt(e,zh,W=>r(8,l=W)),kt(e,Jo,W=>r(9,c=W)),kt(e,Jf,W=>r(10,p=W)),kt(e,lu,W=>r(11,d=W)),kt(e,su,W=>r(12,b=W)),kt(e,Xt,W=>r(13,y=W));let{loadSeedColors:g}=n,{numberOfSeedColors:P}=n,{textInput:k}=n,v=!1,C=!1;const z=async W=>new Promise(mt=>{let $t;const Et=new Image,At=document.createElement("canvas"),It=At.getContext("2d");Et.src=W,Et.onload=()=>{At.width=Et.width,At.height=Et.height,It.drawImage(Et,0,0);const Lt=It.getImageData(0,0,At.width,At.height);let Gt=[];for(let zt=0;zt<Lt.data.length;zt+=4)Gt.push({r:Lt.data[zt],g:Lt.data[zt+1],b:Lt.data[zt+2]});const fe=zt=>{let qt,ye,ht=0,Tt,Dt,jt=255;zt.forEach(ae=>{qt=Math.max(qt,ae.r),ye=Math.max(ye,ae.g),ht=Math.max(ht,ae.b),Tt=Math.min(Tt,ae.r),Dt=Math.min(Dt,ae.g),jt=Math.min(jt,ae.b)});const oe=qt-Tt,Me=ye-Dt,Ot=ht-jt,Ft=Math.max(oe,Me,Ot);return Ft==oe?"r":Ft==Me?"g":"b"},de=(zt,qt)=>{if(qt==4||zt.length==0){const Dt=zt.reduce((jt,oe)=>(jt.r+=oe.r,jt.g+=oe.g,jt.b+=oe.b,jt),{r:0,g:0,b:0});return Dt.r=Math.round(Dt.r/zt.length),Dt.g=Math.round(Dt.g/zt.length),Dt.b=Math.round(Dt.b/zt.length),[Dt]}const ht=fe(zt);zt.sort((Dt,jt)=>Dt[ht]-jt[ht]);const Tt=zt.length/2;return[...de(zt.slice(0,Tt),qt+1),...de(zt.slice(Tt+1),qt+1)]};$t=de(Gt,1).filter((zt,qt,ye)=>ye.findIndex(ht=>["r","g","b"].every(Tt=>ht[Tt]===zt[Tt]))===qt),mt($t)}}),E=async()=>{let W=document.getElementsByClassName("leaflet-tile-loaded"),mt=[],$t=0,Et=75;for(const Gt of W)mt.push({src:Gt.src,x:0,y:$t}),$t+=Et;let At=await bv(mt,{width:Et,height:$t,crossOrigin:"Anonymous"});return(await z(At)).map(Gt=>ke(Object.values(Gt)).hex())},S=async()=>{r(4,v=!0),Ci(Fh,o=await E(),o);let W=ke.average(o,"oklch"),mt=W.get("oklch.h");isNaN(mt)?Xt.generate(P):Xt.generate(P,W),r(4,v=!1),r(5,C=!0),setTimeout(()=>{r(5,C=!1)},1500)},F=[[],[]],O=()=>au.set(!0);function Z(){g=this.__value,r(0,g)}function rt(){P=Oe(this.value),r(1,P)}function Y(){s=this.__value,Ro.set(s)}function Nt(){s=this.__value,Ro.set(s)}function Mt(){h=Oe(this.value),Ih.set(h)}function ut(){l=Oe(this.value),zh.set(l)}function X(){s=this.__value,Ro.set(s)}function j(){c=Cs(this),Jo.set(c)}function lt(){s=this.__value,Ro.set(s)}function st(){g=this.__value,r(0,g)}function dt(){k=this.value,r(2,k)}const ct=()=>Xt.loadFromText(k),U=()=>{switch(s){case"template":Xt.generate(P);break;case"filter":Xt.generate(P),Xt.rescaleHue(h,l);break;case"basemap":S();break;case"random":Xt.generateRandom(P);break}};function et(W,mt){W[mt].color=this.value,Xt.set(y)}return e.$$set=W=>{"loadSeedColors"in W&&r(0,g=W.loadSeedColors),"numberOfSeedColors"in W&&r(1,P=W.numberOfSeedColors),"textInput"in W&&r(2,k=W.textInput)},[g,P,k,S,v,C,s,h,l,c,p,d,b,y,O,Z,F,rt,Y,Nt,Mt,ut,X,j,lt,st,dt,ct,U,et]}class Mv extends hn{constructor(n){super(),un(this,n,Pv,kv,Je,{loadSeedColors:0,numberOfSeedColors:1,textInput:2,generateFromBasemap:3},null,[-1,-1])}get generateFromBasemap(){return this.$$.ctx[3]}}function Xh(e,n,r){const o=e.slice();return o[68]=n[r],o}function jh(e,n,r){const o=e.slice();return o[71]=n[r],o[72]=n,o[73]=r,o}function Kh(e,n,r){const o=e.slice();return o[74]=n[r],o}function Jh(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E=e[18],S=[];for(let O=0;O<E.length;O+=1)S[O]=Qh(Kh(e,E,O));let F=e[0]&&tc(e);return k=new rr({props:{title:"Layer controls",absolute:!0,dropdownEnd:!0,$$slots:{default:[Lv]},$$scope:{ctx:e}}}),{c(){n=A("select");for(let O=0;O<S.length;O+=1)S[O].c();r=q(),o=A("div"),s=A("label"),s.textContent="Opacity",h=q(),l=A("div"),c=A("input"),p=q(),d=A("input"),b=q(),y=A("button"),y.textContent="New Data",g=q(),F&&F.c(),P=q(),Pe(k.$$.fragment),w(n,"class","select select-primary select-xs max-w-xs ml-1"),e[17]===void 0&&Ke(()=>e[41].call(n)),w(s,"tabindex","0"),w(s,"class","btn btn-xs btn-primary m-1"),w(c,"type","range"),w(c,"min","0"),w(c,"max","1"),w(c,"step","0.01"),w(c,"class","range range-sm range-primary"),w(d,"type","number"),w(d,"min","0"),w(d,"max","1"),w(d,"step","0.01"),w(d,"class","input input-xs w-16"),w(l,"tabindex","0"),w(l,"class","dropdown-content menu p-2 bg-base-100 rounded-lg w-60 flex flex-row border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300"),w(o,"class","dropdown"),w(y,"class","btn btn-xs btn-accent")},m(O,Z){Q(O,n,Z);for(let rt=0;rt<S.length;rt+=1)S[rt].m(n,null);Ei(n,e[17]),Q(O,r,Z),Q(O,o,Z),M(o,s),M(o,h),M(o,l),M(l,c),se(c,e[19]),M(l,p),M(l,d),se(d,e[19]),Q(O,b,Z),Q(O,y,Z),Q(O,g,Z),F&&F.m(O,Z),Q(O,P,Z),ve(k,O,Z),v=!0,C||(z=[pt(n,"change",e[41]),pt(c,"change",e[42]),pt(c,"input",e[42]),pt(d,"input",e[43]),pt(y,"click",e[44])],C=!0)},p(O,Z){if(Z[0]&262144){E=O[18];let Y;for(Y=0;Y<E.length;Y+=1){const Nt=Kh(O,E,Y);S[Y]?S[Y].p(Nt,Z):(S[Y]=Qh(Nt),S[Y].c(),S[Y].m(n,null))}for(;Y<S.length;Y+=1)S[Y].d(1);S.length=E.length}Z[0]&393216&&Ei(n,O[17]),Z[0]&524288&&se(c,O[19]),Z[0]&524288&&Oe(d.value)!==O[19]&&se(d,O[19]),O[0]?F?F.p(O,Z):(F=tc(O),F.c(),F.m(P.parentNode,P)):F&&(F.d(1),F=null);const rt={};Z[2]&32768&&(rt.$$scope={dirty:Z,ctx:O}),k.$set(rt)},i(O){v||(yt(k.$$.fragment,O),v=!0)},o(O){Ct(k.$$.fragment,O),v=!1},d(O){O&&K(n),dn(S,O),O&&K(r),O&&K(o),O&&K(b),O&&K(y),O&&K(g),F&&F.d(O),O&&K(P),be(k,O),C=!1,Re(z)}}}function Qh(e){let n,r=e[74]+"",o,s;return{c(){n=A("option"),o=xt(r),n.__value=s=e[74],n.value=n.__value},m(h,l){Q(h,n,l),M(n,o)},p(h,l){l[0]&262144&&r!==(r=h[74]+"")&&Ue(o,r),l[0]&262144&&s!==(s=h[74])&&(n.__value=s,n.value=n.__value)},d(h){h&&K(n)}}}function tc(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E;return{c(){n=A("div"),r=A("label"),r.textContent="Size",o=q(),s=A("div"),h=A("h5"),h.textContent="Point size",l=q(),c=A("div"),p=A("div"),d=A("input"),b=q(),y=A("input"),g=q(),P=A("label"),k=A("input"),v=q(),C=A("span"),C.textContent="Same-sized points",w(r,"tabindex","0"),w(r,"class","btn btn-xs btn-accent m-1"),w(h,"class","font-semibold"),w(d,"type","range"),w(d,"min","1"),w(d,"max","100"),w(d,"step","1"),w(d,"class","range range-sm range-primary"),w(y,"type","number"),w(y,"min","1"),w(y,"max","100"),w(y,"step","1"),w(y,"class","input input-xs w-16"),w(p,"class","flex flex-row items-center"),w(k,"type","checkbox"),w(k,"class","checkbox checkbox-accent"),w(C,"class","label-text pl-2"),w(P,"class","cursor-pointer label w-fit py-2"),w(c,"class","pl-2 pt-2"),w(s,"tabindex","0"),w(s,"class","dropdown-content menu p-2 bg-base-100 rounded-lg w-fit min-w-[16rem] border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300"),w(n,"class","dropdown dropdown-end")},m(S,F){Q(S,n,F),M(n,r),M(n,o),M(n,s),M(s,h),M(s,l),M(s,c),M(c,p),M(p,d),se(d,e[21]),M(p,b),M(p,y),se(y,e[21]),M(c,g),M(c,P),M(P,k),k.checked=e[22],M(P,v),M(P,C),z||(E=[pt(d,"change",e[45]),pt(d,"input",e[45]),pt(y,"input",e[46]),pt(k,"change",e[47])],z=!0)},p(S,F){F[0]&2097152&&se(d,S[21]),F[0]&2097152&&Oe(y.value)!==S[21]&&se(y,S[21]),F[0]&4194304&&(k.checked=S[22])},d(S){S&&K(n),z=!1,Re(E)}}}function Lv(e){let n,r,o,s,h;return{c(){n=xt("The layer controls house a lot of powerful tools to derive palettes from seed colors and visualize them for easy testing."),r=A("br"),o=xt("Drag and drop seed color cards into the green drop zone to use them for palette derivation and rearrange freely."),s=A("br"),h=xt("On this screen, you can also still readjust the seed colors (by clicking on them) and see the changes live in the map.")},m(l,c){Q(l,n,c),Q(l,r,c),Q(l,o,c),Q(l,s,c),Q(l,h,c)},p:Bt,d(l){l&&K(n),l&&K(r),l&&K(o),l&&K(s),l&&K(h)}}}function ec(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E,S,F,O,Z,rt,Y,Nt,Mt,ut,X=e[17]!="qualitative"&&nc(e),j=e[17]!="qualitative"&&ic(e),lt=e[28],st=[];for(let U=0;U<lt.length;U+=1)st[U]=rc(jh(e,lt,U));let dt=e[30],ct=[];for(let U=0;U<dt.length;U+=1)ct[U]=oc(Xh(e,dt,U));return{c(){n=A("div"),r=A("label"),o=A("input"),s=q(),h=A("span"),l=xt("Optimize lightness and map to "),X&&X.c(),c=A("input"),p=q(),j&&j.c(),d=q(),b=A("div"),y=A("div"),g=A("div"),P=q();for(let U=0;U<st.length;U+=1)st[U].c();k=q(),v=A("div"),C=A("div"),z=q(),E=A("div"),S=A("p"),F=xt(`Palette with\r
                `),O=A("input"),Z=xt(`\r
                classes\r
                `),rt=A("button"),rt.textContent="reverse order",Y=q(),Nt=A("div");for(let U=0;U<ct.length;U+=1)ct[U].c();w(o,"type","checkbox"),w(o,"class","checkbox checkbox-accent"),w(c,"type","number"),w(c,"min","0"),w(c,"max","1"),w(c,"step","0.05"),w(c,"class","input input-xs w-[4.5rem] label-text text-base"),w(h,"class","label-text pl-2"),w(r,"class","cursor-pointer label p-2"),w(n,"class","flex flex-row flex-wrap"),w(g,"class","z-10 absolute top-0 left-0 right-0 bottom-0 w-full h-full"),w(y,"class","min-h-12 flex flex-row flex-wrap bg-base-300 border-4 border-opacity-75 border-b-white border-r-white border-l-gray-300 border-t-gray-300 relative p-2 mb-2 rounded-lg"),w(C,"class","z-10 absolute top-0 left-0 right-0 bottom-0 w-full h-full"),w(v,"class","min-h-16 flex flex-row flex-wrap relative p-2 border-4 border-opacity-75 border-r-white border-b-white border-l-gray-300 border-t-gray-300 bg-success bg-opacity-25 rounded-lg"),w(b,"class",""),w(O,"type","number"),w(O,"min","2"),w(O,"max","100"),w(O,"class","input input-xs w-16"),w(rt,"class","btn btn-xs btn-accent"),w(S,"class","pl-2 pb-2 label-text"),w(Nt,"class","h-12 flex flex-row w-full border-4 border-opacity-75 border-r-white border-b-white border-l-gray-300 border-t-gray-300"),w(E,"class","w-full p-2 mt-2 rounded-lg")},m(U,et){Q(U,n,et),M(n,r),M(r,o),o.checked=e[23],M(r,s),M(r,h),M(h,l),X&&X.m(h,null),M(h,c),se(c,e[26]),M(n,p),j&&j.m(n,null),Q(U,d,et),Q(U,b,et),M(b,y),M(y,g),M(y,P);for(let W=0;W<st.length;W+=1)st[W].m(y,null);M(b,k),M(b,v),M(v,C),e[62](v),Q(U,z,et),Q(U,E,et),M(E,S),M(S,F),M(S,O),se(O,e[29]),M(S,Z),M(S,rt),M(E,Y),M(E,Nt);for(let W=0;W<ct.length;W+=1)ct[W].m(Nt,null);Mt||(ut=[pt(o,"change",e[48]),pt(c,"input",e[51]),pt(g,"drop",Rr(e[53])),pt(g,"dragover",Rr(e[54])),pt(C,"drop",Rr(e[60])),pt(C,"dragover",Rr(e[61])),pt(O,"input",e[63]),pt(rt,"click",e[64])],Mt=!0)},p(U,et){if(et[0]&8388608&&(o.checked=U[23]),U[17]!="qualitative"?X?X.p(U,et):(X=nc(U),X.c(),X.m(h,c)):X&&(X.d(1),X=null),et[0]&67108864&&Oe(c.value)!==U[26]&&se(c,U[26]),U[17]!="qualitative"?j?j.p(U,et):(j=ic(U),j.c(),j.m(n,null)):j&&(j.d(1),j=null),et[0]&268500993|et[1]&88){lt=U[28];let W;for(W=0;W<lt.length;W+=1){const mt=jh(U,lt,W);st[W]?st[W].p(mt,et):(st[W]=rc(mt),st[W].c(),st[W].m(y,null))}for(;W<st.length;W+=1)st[W].d(1);st.length=lt.length}if(et[0]&536870912&&Oe(O.value)!==U[29]&&se(O,U[29]),et[0]&1073741824){dt=U[30];let W;for(W=0;W<dt.length;W+=1){const mt=Xh(U,dt,W);ct[W]?ct[W].p(mt,et):(ct[W]=oc(mt),ct[W].c(),ct[W].m(Nt,null))}for(;W<ct.length;W+=1)ct[W].d(1);ct.length=dt.length}},d(U){U&&K(n),X&&X.d(),j&&j.d(),U&&K(d),U&&K(b),dn(st,U),e[62](null),U&&K(z),U&&K(E),dn(ct,U),Mt=!1,Re(ut)}}}function nc(e){let n,r,o,s,h,l,c;function p(y,g){return y[24]?Cv:Tv}let d=p(e),b=d(e);return{c(){n=A("label"),r=A("input"),b.c(),o=q(),s=A("input"),h=xt(`\r
                        around\r
                    `),w(r,"type","checkbox"),w(r,"class","hidden"),w(n,"class","label cursor-pointer inline btn btn-xs btn-accent p-1.5 bg-opacity-50 border-opacity-0"),w(s,"type","number"),w(s,"min","0"),w(s,"max","1"),w(s,"step","0.05"),w(s,"class","input input-xs w-[4.5rem] label-text text-base")},m(y,g){Q(y,n,g),M(n,r),r.checked=e[24],b.m(n,null),Q(y,o,g),Q(y,s,g),se(s,e[25]),Q(y,h,g),l||(c=[pt(r,"change",e[49]),pt(s,"input",e[50])],l=!0)},p(y,g){g[0]&16777216&&(r.checked=y[24]),d!==(d=p(y))&&(b.d(1),b=d(y),b&&(b.c(),b.m(n,null))),g[0]&33554432&&Oe(s.value)!==y[25]&&se(s,y[25])},d(y){y&&K(n),b.d(),y&&K(o),y&&K(s),y&&K(h),l=!1,Re(c)}}}function Tv(e){let n;return{c(){n=xt("+/-")},m(r,o){Q(r,n,o)},d(r){r&&K(n)}}}function Cv(e){let n;return{c(){n=xt("-/+")},m(r,o){Q(r,n,o)},d(r){r&&K(n)}}}function ic(e){let n,r,o,s,h,l;return{c(){n=A("label"),r=A("input"),o=q(),s=A("span"),s.textContent="Smooth with B\xE9zier curve interpolation",w(r,"type","checkbox"),w(r,"class","checkbox checkbox-accent"),w(s,"class","label-text pl-2"),w(n,"class","cursor-pointer label px-2 py-0 pb-2")},m(c,p){Q(c,n,p),M(n,r),r.checked=e[27],M(n,o),M(n,s),h||(l=pt(r,"change",e[52]),h=!0)},p(c,p){p[0]&134217728&&(r.checked=c[27])},d(c){c&&K(n),h=!1,l()}}}function rc(e){let n,r,o,s,h=e[71].color+"",l,c,p,d=e[73],b,y;function g(){e[55].call(r,e[72],e[73])}const P=()=>e[56](n,d),k=()=>e[56](null,d);function v(...z){return e[57](e[71],...z)}function C(...z){return e[58](e[73],e[71],...z)}return{c(){n=A("div"),r=A("input"),o=q(),s=A("p"),l=xt(h),c=q(),w(r,"class","w-12 h-12 hover:cursor-pointer"),w(r,"type","color"),w(s,"class","w-full text-center text-2xs"),w(n,"draggable",!0),w(n,"class","p-2 m-1 pb-4 bg-base-100 z-20 rounded-lg border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300 active:border-opacity-100 hover:cursor-grab active:cursor-grabbing"),w(n,"id",p=e[0]?"pointInput"+e[71].id:"areaInput"+e[71].id)},m(z,E){Q(z,n,E),M(n,r),se(r,e[71].color),M(n,o),M(n,s),M(s,l),M(n,c),P(),b||(y=[pt(r,"input",g),pt(n,"dragstart",v),pt(n,"drop",Rr(C)),pt(n,"dragover",Rr(e[59]))],b=!0)},p(z,E){e=z,E[0]&268435456&&se(r,e[71].color),E[0]&268435456&&h!==(h=e[71].color+"")&&Ue(l,h),E[0]&268435457&&p!==(p=e[0]?"pointInput"+e[71].id:"areaInput"+e[71].id)&&w(n,"id",p),d!==e[73]&&(k(),d=e[73],P())},d(z){z&&K(n),k(),b=!1,Re(y)}}}function oc(e){let n;return{c(){n=A("div"),w(n,"class","flex-grow"),ui(n,"background-color",e[68])},m(r,o){Q(r,n,o)},p(r,o){o[0]&1073741824&&ui(n,"background-color",r[68])},d(r){r&&K(n)}}}function Sv(e){let n,r,o,s,h,l,c=e[0]?"Points":"Areas",p,d,b,y,g,P,k=e[15]&&Jh(e),v=e[15]&&ec(e);return{c(){n=A("div"),r=A("div"),o=A("label"),s=A("input"),h=q(),l=A("h4"),p=xt(c),d=q(),k&&k.c(),b=q(),v&&v.c(),w(s,"type","checkbox"),w(s,"class","toggle toggle-sm toggle-primary"),w(l,"class","pl-2"),w(o,"class","label cursor-pointer rounded-lg"),w(r,"class","flex flex-row items-center flex-wrap pr-4"),w(n,"class","p-2 rounded-lg bg-base-200 mb-2 border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300 relative")},m(C,z){Q(C,n,z),M(n,r),M(r,o),M(o,s),s.checked=e[15],M(o,h),M(o,l),M(l,p),M(r,d),k&&k.m(r,null),M(n,b),v&&v.m(n,null),y=!0,g||(P=pt(s,"change",e[40]),g=!0)},p(C,z){z[0]&32768&&(s.checked=C[15]),(!y||z[0]&1)&&c!==(c=C[0]?"Points":"Areas")&&Ue(p,c),C[15]?k?(k.p(C,z),z[0]&32768&&yt(k,1)):(k=Jh(C),k.c(),yt(k,1),k.m(r,null)):k&&(sn(),Ct(k,1,1,()=>{k=null}),ln()),C[15]?v?v.p(C,z):(v=ec(C),v.c(),v.m(n,null)):v&&(v.d(1),v=null)},i(C){y||(yt(k),y=!0)},o(C){Ct(k),y=!1},d(C){C&&K(n),k&&k.d(),v&&v.d(),g=!1,P()}}}function Ev(e,n,r){let o,s=Bt,h=()=>(s(),s=on(de,tt=>r(15,o=tt)),de),l,c=Bt,p=()=>(c(),c=on(zt,tt=>r(66,l=tt)),zt),d,b=Bt,y=()=>(b(),b=on(qt,tt=>r(17,d=tt)),qt),g,P,k=Bt,v=()=>(k(),k=on(re,tt=>r(19,P=tt)),re),C,z,E,S,F=Bt,O=()=>(F(),F=on(jt,tt=>r(23,S=tt)),jt),Z,rt=Bt,Y=()=>(rt(),rt=on(Ft,tt=>r(24,Z=tt)),Ft),Nt,Mt=Bt,ut=()=>(Mt(),Mt=on(Ot,tt=>r(25,Nt=tt)),Ot),X,j=Bt,lt=()=>(j(),j=on(Me,tt=>r(26,X=tt)),Me),st,dt=Bt,ct=()=>(dt(),dt=on(oe,tt=>r(27,st=tt)),oe),U,et,W=Bt,mt=()=>(W(),W=on(ye,tt=>r(29,et=tt)),ye),$t,Et=Bt,At=()=>(Et(),Et=on(ht,tt=>r(30,$t=tt)),ht);kt(e,ov,tt=>r(18,g=tt)),kt(e,Xt,tt=>r(28,U=tt)),e.$$.on_destroy.push(()=>s()),e.$$.on_destroy.push(()=>c()),e.$$.on_destroy.push(()=>b()),e.$$.on_destroy.push(()=>k()),e.$$.on_destroy.push(()=>F()),e.$$.on_destroy.push(()=>rt()),e.$$.on_destroy.push(()=>Mt()),e.$$.on_destroy.push(()=>j()),e.$$.on_destroy.push(()=>dt()),e.$$.on_destroy.push(()=>W()),e.$$.on_destroy.push(()=>Et());const{countryScale:It,pointsSizeFixed:Lt,pointsSizeValue:Gt}=As;kt(e,It,tt=>r(20,C=tt)),kt(e,Lt,tt=>r(22,E=tt)),kt(e,Gt,tt=>r(21,z=tt));let{pointInput:fe}=n,{showLayer:de}=n;h();let{layerOpacity:re}=n;v();let{inputColors:zt}=n;p();let{paletteType:qt}=n;y();let{paletteClasses:ye}=n;mt();let{paletteColors:ht}=n;At();let{countryData:Tt}=n,{cityData:Dt}=n,{lightnessCorrection:jt}=n;O();let{bezierInterpolation:oe}=n;ct();let{lightnessMid:Me}=n;lt();let{lightnessRange:Ot}=n;ut();let{invertLightness:Ft}=n;Y();let ae=[],Se,Ee;const Fe=(tt,we)=>{tt.dataTransfer.setData("id",we),Ee=tt.target},Ne=tt=>{tt.dataTransfer.dropEffect="move"},Ye=tt=>{let we=tt.dataTransfer.getData("id");Xt.addToInputEnd(fe,we),tt.target.parentNode.appendChild(Ee)},Ve=(tt,we,Jn)=>{let Ln=tt.dataTransfer.getData("id");if(we.parentNode==Se)Xt.addToInputPosition(fe,Ln,Jn);else{if(Se.children.length<3)return;Xt.removeFromInput(fe,Ln)}let zi=[...we.parentNode.children].indexOf(Ee),Qr=[...we.parentNode.children].indexOf(we);zi<Qr&&zi!=-1?we.insertAdjacentElement("afterend",Ee):we.insertAdjacentElement("beforebegin",Ee)},Fn=tt=>{if(Se.children.length<3)return;let we=tt.dataTransfer.getData("id");Xt.removeFromInput(fe,we),tt.target.parentNode.appendChild(Ee)},Qe=()=>{for(const tt of l)Se.appendChild(document.getElementById(fe?"pointInput"+tt.id:"areaInput"+tt.id))},mn=()=>{for(let tt=l.length-2;tt>-1;tt--)Xt.addToInputEnd(fe,l[tt].id);Qe()};function jn(){o=this.checked,de.set(o)}function $n(){d=Cs(this),qt.set(d)}function Xe(){P=Oe(this.value),re.set(P)}function Ie(){P=Oe(this.value),re.set(P)}const ci=()=>{C?Tt.randomData():Dt.randomData()};function Ze(){z=Oe(this.value),Gt.set(z)}function Kn(){z=Oe(this.value),Gt.set(z)}function _n(){E=this.checked,Lt.set(E)}function ze(){S=this.checked,jt.set(S)}function bt(){Z=this.checked,Ft.set(Z)}function le(){Nt=Oe(this.value),Ot.set(Nt)}function Ge(){X=Oe(this.value),Me.set(X)}function fi(){st=this.checked,oe.set(st)}const ue=tt=>Fn(tt),Mn=tt=>Ne(tt);function Xr(tt,we){tt[we].color=this.value,Xt.set(U)}function jr(tt,we){xn[tt?"unshift":"push"](()=>{ae[we]=tt,r(16,ae)})}const Ii=(tt,we)=>Fe(we,tt.id),Kr=(tt,we,Jn)=>Ve(Jn,ae[tt],we.id),Jr=tt=>Ne(tt),je=tt=>Ye(tt),wt=tt=>Ne(tt);function or(tt){xn[tt?"unshift":"push"](()=>{Se=tt,r(14,Se)})}function ar(){et=Oe(this.value),ye.set(et)}const sr=()=>mn();return e.$$set=tt=>{"pointInput"in tt&&r(0,fe=tt.pointInput),"showLayer"in tt&&h(r(1,de=tt.showLayer)),"layerOpacity"in tt&&v(r(2,re=tt.layerOpacity)),"inputColors"in tt&&p(r(3,zt=tt.inputColors)),"paletteType"in tt&&y(r(4,qt=tt.paletteType)),"paletteClasses"in tt&&mt(r(5,ye=tt.paletteClasses)),"paletteColors"in tt&&At(r(6,ht=tt.paletteColors)),"countryData"in tt&&r(7,Tt=tt.countryData),"cityData"in tt&&r(8,Dt=tt.cityData),"lightnessCorrection"in tt&&O(r(9,jt=tt.lightnessCorrection)),"bezierInterpolation"in tt&&ct(r(10,oe=tt.bezierInterpolation)),"lightnessMid"in tt&&lt(r(11,Me=tt.lightnessMid)),"lightnessRange"in tt&&ut(r(12,Ot=tt.lightnessRange)),"invertLightness"in tt&&Y(r(13,Ft=tt.invertLightness))},e.$$.update=()=>{e.$$.dirty[0]&49152&&Se!=null&&o&&Qe()},[fe,de,re,zt,qt,ye,ht,Tt,Dt,jt,oe,Me,Ot,Ft,Se,o,ae,d,g,P,C,z,E,S,Z,Nt,X,st,U,et,$t,It,Lt,Gt,Fe,Ne,Ye,Ve,Fn,mn,jn,$n,Xe,Ie,ci,Ze,Kn,_n,ze,bt,le,Ge,fi,ue,Mn,Xr,jr,Ii,Kr,Jr,je,wt,or,ar,sr]}class ac extends hn{constructor(n){super(),un(this,n,Ev,Sv,Je,{pointInput:0,showLayer:1,layerOpacity:2,inputColors:3,paletteType:4,paletteClasses:5,paletteColors:6,countryData:7,cityData:8,lightnessCorrection:9,bezierInterpolation:10,lightnessMid:11,lightnessRange:12,invertLightness:13},null,[-1,-1,-1])}}function sc(e,n,r){const o=e.slice();return o[21]=n[r],o}function lc(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v=e[3],C=[];for(let z=0;z<v.length;z+=1)C[z]=uc(sc(e,v,z));return y=new rr({props:{title:"Basemap",absolute:!0,dropdownEnd:!0,dropdownTop:!0,$$slots:{default:[Iv]},$$scope:{ctx:e}}}),{c(){n=A("select");for(let z=0;z<C.length;z+=1)C[z].c();r=q(),o=A("div"),s=A("label"),s.textContent="Opacity",h=q(),l=A("div"),c=A("input"),p=q(),d=A("input"),b=q(),Pe(y.$$.fragment),w(n,"class","select select-primary select-xs max-w-xs ml-1"),e[2]===void 0&&Ke(()=>e[17].call(n)),w(s,"tabindex","0"),w(s,"class","btn btn-xs btn-primary m-1"),w(c,"type","range"),w(c,"min","0"),w(c,"max","1"),w(c,"step","0.01"),w(c,"class","range range-sm range-primary"),w(d,"type","number"),w(d,"min","0"),w(d,"max","1"),w(d,"step","0.01"),w(d,"class","input input-xs w-16"),w(l,"tabindex","0"),w(l,"class","relative top-8 dropdown-content menu p-2 bg-base-100 rounded-lg w-60 flex flex-row border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300"),w(o,"class","dropdown dropdown-end")},m(z,E){Q(z,n,E);for(let S=0;S<C.length;S+=1)C[S].m(n,null);Ei(n,e[2]),Q(z,r,E),Q(z,o,E),M(o,s),M(o,h),M(o,l),M(l,c),se(c,e[4]),M(l,p),M(l,d),se(d,e[4]),Q(z,b,E),ve(y,z,E),g=!0,P||(k=[pt(n,"change",e[17]),pt(c,"change",e[18]),pt(c,"input",e[18]),pt(d,"input",e[19])],P=!0)},p(z,E){if(E&8){v=z[3];let F;for(F=0;F<v.length;F+=1){const O=sc(z,v,F);C[F]?C[F].p(O,E):(C[F]=uc(O),C[F].c(),C[F].m(n,null))}for(;F<C.length;F+=1)C[F].d(1);C.length=v.length}E&12&&Ei(n,z[2]),E&16&&se(c,z[4]),E&16&&Oe(d.value)!==z[4]&&se(d,z[4]);const S={};E&16777216&&(S.$$scope={dirty:E,ctx:z}),y.$set(S)},i(z){g||(yt(y.$$.fragment,z),g=!0)},o(z){Ct(y.$$.fragment,z),g=!1},d(z){z&&K(n),dn(C,z),z&&K(r),z&&K(o),z&&K(b),be(y,z),P=!1,Re(k)}}}function uc(e){let n,r=e[21].label+"",o,s;return{c(){n=A("option"),o=xt(r),n.__value=s=e[21].provider,n.value=n.__value},m(h,l){Q(h,n,l),M(n,o)},p(h,l){l&8&&r!==(r=h[21].label+"")&&Ue(o,r),l&8&&s!==(s=h[21].provider)&&(n.__value=s,n.value=n.__value)},d(h){h&&K(n)}}}function Iv(e){let n,r,o,s,h;return{c(){n=xt(`Choose a basemap fitting to your deployment situation or deactivate this layer\r
                    and adjust the background color by clicking on it.`),r=A("br"),o=xt(`All basemaps used here\r
                    are freely available e.g. via\r
                    `),s=A("a"),s.textContent="Leaflet-providers",h=xt("."),w(s,"class","link hover:text-secondary-focus"),w(s,"target","_blank"),w(s,"href","https://github.com/leaflet-extras/leaflet-providers")},m(l,c){Q(l,n,c),Q(l,r,c),Q(l,o,c),Q(l,s,c),Q(l,h,c)},p:Bt,d(l){l&&K(n),l&&K(r),l&&K(o),l&&K(s),l&&K(h)}}}function zv(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E,S,F,O,Z,rt,Y,Nt,Mt,ut,X,j,lt,st,dt,ct,U;C=new ac({props:{pointInput:!0,showLayer:e[6],layerOpacity:e[9],inputColors:Mu,paletteType:ku,paletteClasses:ia,paletteColors:Su,countryData:as,cityData:ls,lightnessCorrection:Tu,bezierInterpolation:Zf,lightnessMid:$f,lightnessRange:Hf,invertLightness:qf}}),E=new ac({props:{pointInput:!1,showLayer:e[7],layerOpacity:e[10],inputColors:Lu,paletteType:Pu,paletteClasses:ra,paletteColors:Eu,countryData:ss,cityData:us,lightnessCorrection:Cu,bezierInterpolation:Df,lightnessMid:Gf,lightnessRange:Wf,invertLightness:Uf}});let et=e[1]&&lc(e);return{c(){n=A("div"),r=A("h2"),r.textContent="Choose your layers",o=q(),s=A("p"),s.textContent=`Adjust the zoom level of the map and the data type per layer to fit your use case. Then drag\r
        and drop seed colors to derive your palettes.`,h=q(),l=A("h3"),l.textContent="Show me...",c=q(),p=A("div"),d=A("input"),b=q(),y=A("input"),g=q(),P=A("h3"),P.textContent="Layers",k=q(),v=A("div"),Pe(C.$$.fragment),z=q(),Pe(E.$$.fragment),S=q(),F=A("div"),O=A("label"),Z=A("input"),rt=q(),Y=A("h4"),Y.textContent="Basemap",Nt=q(),et&&et.c(),Mt=q(),ut=A("div"),X=A("label"),j=A("input"),lt=q(),st=A("h4"),st.textContent="Background",w(r,"class","text-lg font-semibold"),w(s,"class","pt-2"),w(l,"class","font-semibold pt-2"),w(d,"type","radio"),w(d,"name","map-scale"),w(d,"data-title","Country level data"),d.__value=!0,d.value=d.__value,w(d,"class","btn btn-sm btn-primary btn-outline"),e[14][0].push(d),w(y,"type","radio"),w(y,"name","map-scale"),w(y,"data-title","City level data"),y.__value=!1,y.value=y.__value,w(y,"class","btn btn-sm btn-primary btn-outline"),e[14][0].push(y),w(p,"class","btn-group pl-2 pt-2"),w(P,"class","font-semibold pt-2 pb-2"),w(Z,"type","checkbox"),w(Z,"class","toggle toggle-sm toggle-primary"),w(Y,"class","pl-2"),w(O,"class","label cursor-pointer"),w(F,"class","flex flex-row items-center flex-wrap p-2 rounded-lg bg-base-200 mb-2 pr-8 relative border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300"),w(j,"type","color"),w(j,"class","w-8 h-5"),w(st,"class","pl-2"),w(X,"class","label cursor-pointer"),w(ut,"class","flex flex-row items-center flex-wrap p-2 rounded-lg bg-base-200 mb-2 border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300"),w(v,"class","flex flex-col items-start")},m(W,mt){Q(W,n,mt),M(n,r),M(n,o),M(n,s),M(n,h),M(n,l),M(n,c),M(n,p),M(p,d),d.checked=d.__value===e[0],M(p,b),M(p,y),y.checked=y.__value===e[0],M(n,g),M(n,P),M(n,k),M(n,v),ve(C,v,null),M(v,z),ve(E,v,null),M(v,S),M(v,F),M(F,O),M(O,Z),Z.checked=e[1],M(O,rt),M(O,Y),M(F,Nt),et&&et.m(F,null),M(v,Mt),M(v,ut),M(ut,X),M(X,j),se(j,e[5]),M(X,lt),M(X,st),dt=!0,ct||(U=[pt(d,"change",e[13]),pt(y,"change",e[15]),pt(Z,"change",e[16]),pt(j,"input",e[20])],ct=!0)},p(W,[mt]){mt&1&&(d.checked=d.__value===W[0]),mt&1&&(y.checked=y.__value===W[0]),mt&2&&(Z.checked=W[1]),W[1]?et?(et.p(W,mt),mt&2&&yt(et,1)):(et=lc(W),et.c(),yt(et,1),et.m(F,null)):et&&(sn(),Ct(et,1,1,()=>{et=null}),ln()),mt&32&&se(j,W[5])},i(W){dt||(yt(C.$$.fragment,W),yt(E.$$.fragment,W),yt(et),dt=!0)},o(W){Ct(C.$$.fragment,W),Ct(E.$$.fragment,W),Ct(et),dt=!1},d(W){W&&K(n),e[14][0].splice(e[14][0].indexOf(d),1),e[14][0].splice(e[14][0].indexOf(y),1),be(C),be(E),et&&et.d(),ct=!1,Re(U)}}}function Av(e,n,r){let o,s,h,l,c,p;kt(e,Jo,Y=>r(2,h=Y)),kt(e,Jf,Y=>r(3,l=Y)),kt(e,uu,Y=>r(5,p=Y));const{showPointLayer:d,showAreaLayer:b,showBasemapLayer:y,pointLayerOpacity:g,areaLayerOpacity:P,basemapLayerOpacity:k,countryScale:v}=As;kt(e,y,Y=>r(1,s=Y)),kt(e,k,Y=>r(4,c=Y)),kt(e,v,Y=>r(0,o=Y));const C=[[]];function z(){o=this.__value,v.set(o)}function E(){o=this.__value,v.set(o)}function S(){s=this.checked,y.set(s)}function F(){h=Cs(this),Jo.set(h)}function O(){c=Oe(this.value),k.set(c)}function Z(){c=Oe(this.value),k.set(c)}function rt(){p=this.value,uu.set(p)}return[o,s,h,l,c,p,d,b,y,g,P,k,v,z,C,E,S,F,O,Z,rt]}class Ov extends hn{constructor(n){super(),un(this,n,Av,zv,Je,{})}}function hc(e,n,r){const o=e.slice();return o[17]=n[r],o[19]=r,o}function cc(e,n,r){const o=e.slice();return o[20]=n[r],o}function Nv(e){let n,r,o;return{c(){n=xt("Charting lightness steps within a color palette (in a perceptually uniform color space) can be a great help in testing a color palette."),r=A("br"),o=xt("See the tutorial for more advice.")},m(s,h){Q(s,n,h),Q(s,r,h),Q(s,o,h)},p:Bt,d(s){s&&K(n),s&&K(r),s&&K(o)}}}function fc(e){let n,r,o=e[9]?e[6].ticks(3):e[7].ticks(4),s=[];for(let c=0;c<o.length;c+=1)s[c]=dc(cc(e,o,c));let h=e[3],l=[];for(let c=0;c<h.length;c+=1)l[c]=mc(hc(e,h,c));return{c(){n=Pn("g");for(let c=0;c<s.length;c+=1)s[c].c();r=Pn("g");for(let c=0;c<l.length;c+=1)l[c].c();w(n,"transform",`translate(0,${e[10].top})`),w(r,"transform",`translate(${e[10].left},${e[10].top})`)},m(c,p){Q(c,n,p);for(let d=0;d<s.length;d+=1)s[d].m(n,null);Q(c,r,p);for(let d=0;d<l.length;d+=1)l[d].m(r,null)},p(c,p){if(p&704){o=c[9]?c[6].ticks(3):c[7].ticks(4);let d;for(d=0;d<o.length;d+=1){const b=cc(c,o,d);s[d]?s[d].p(b,p):(s[d]=dc(b),s[d].c(),s[d].m(n,null))}for(;d<s.length;d+=1)s[d].d(1);s.length=o.length}if(p&984){h=c[3];let d;for(d=0;d<h.length;d+=1){const b=hc(c,h,d);l[d]?l[d].p(b,p):(l[d]=mc(b),l[d].c(),l[d].m(r,null))}for(;d<l.length;d+=1)l[d].d(1);l.length=h.length}},d(c){c&&K(n),dn(s,c),c&&K(r),dn(l,c)}}}function dc(e){let n,r=(e[20]*100).toFixed(0)+"%",o,s;return{c(){n=Pn("text"),o=xt(r),w(n,"class","fill-base-content"),w(n,"text-anchor","middle"),w(n,"x",25),w(n,"y",s=e[9]?e[6](e[20])-5:e[7](e[20])-5)},m(h,l){Q(h,n,l),M(n,o)},p(h,l){l&704&&r!==(r=(h[20]*100).toFixed(0)+"%")&&Ue(o,r),l&704&&s!==(s=h[9]?h[6](h[20])-5:h[7](h[20])-5)&&w(n,"y",s)},d(h){h&&K(n)}}}function pc(e){let n,r=(e[17].lightness*100).toFixed(0)+"%",o,s,h;return{c(){n=Pn("text"),o=xt(r),w(n,"class","fill-base-content"),w(n,"text-anchor","middle"),w(n,"x",s=e[8](e[19])+e[4]/e[3].length/2),w(n,"y",h=e[9]?e[6](e[17].lightness)-5:e[7](e[17].lightness)-5)},m(l,c){Q(l,n,c),M(n,o)},p(l,c){c&8&&r!==(r=(l[17].lightness*100).toFixed(0)+"%")&&Ue(o,r),c&280&&s!==(s=l[8](l[19])+l[4]/l[3].length/2)&&w(n,"x",s),c&712&&h!==(h=l[9]?l[6](l[17].lightness)-5:l[7](l[17].lightness)-5)&&w(n,"y",h)},d(l){l&&K(n)}}}function mc(e){let n,r,o,s,h,l,c=(e[3].length<10||e[19]%2==1&&e[3].length<20||e[19]%4==1)&&pc(e);return{c(){n=Pn("rect"),c&&c.c(),l=Yr(),w(n,"fill",r=e[17].color),w(n,"y",o=e[9]?e[6](e[17].lightness):e[7](e[17].lightness)),w(n,"x",s=e[8](e[19])),w(n,"width",h=e[4]/e[3].length),w(n,"height",10)},m(p,d){Q(p,n,d),c&&c.m(p,d),Q(p,l,d)},p(p,d){d&8&&r!==(r=p[17].color)&&w(n,"fill",r),d&712&&o!==(o=p[9]?p[6](p[17].lightness):p[7](p[17].lightness))&&w(n,"y",o),d&256&&s!==(s=p[8](p[19]))&&w(n,"x",s),d&24&&h!==(h=p[4]/p[3].length)&&w(n,"width",h),p[3].length<10||p[19]%2==1&&p[3].length<20||p[19]%4==1?c?c.p(p,d):(c=pc(p),c.c(),c.m(l.parentNode,l)):c&&(c.d(1),c=null)},d(p){p&&K(n),c&&c.d(p),p&&K(l)}}}function Bv(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z;h=new rr({props:{title:"Lightness graph",$$slots:{default:[Nv]},$$scope:{ctx:e}}});let E=e[5]&&fc(e);return{c(){n=A("div"),r=A("div"),o=A("h5"),s=xt("Lightness graph "),Pe(h.$$.fragment),l=q(),c=A("label"),p=A("input"),d=q(),b=A("span"),b.textContent="Absolute scale",y=q(),g=A("div"),P=Pn("svg"),E&&E.c(),w(o,"class","pl-2"),w(p,"type","checkbox"),w(p,"class","toggle toggle-sm toggle-accent"),w(b,"class","pl-2 text-sm"),w(c,"class","label cursor-pointer justify-start items-center"),w(r,"class","flex flex-row flex-wrap items-center justify-between relative"),w(P,"class","w-full min-h-[10rem]"),w(P,"height",e[2]),w(g,"class","bg-base-100 rounded-lg border-4 border-opacity-75 border-r-white border-b-white border-l-gray-300 border-t-gray-300"),Ke(()=>e[15].call(g))},m(S,F){Q(S,n,F),M(n,r),M(r,o),M(o,s),ve(h,o,null),M(r,l),M(r,c),M(c,p),p.checked=e[9],M(c,d),M(c,b),M(n,y),M(n,g),M(g,P),E&&E.m(P,null),k=gp(g,e[15].bind(g)),v=!0,C||(z=pt(p,"change",e[14]),C=!0)},p(S,[F]){const O={};F&8388608&&(O.$$scope={dirty:F,ctx:S}),h.$set(O),F&512&&(p.checked=S[9]),S[5]?E?E.p(S,F):(E=fc(S),E.c(),E.m(P,null)):E&&(E.d(1),E=null),(!v||F&4)&&w(P,"height",S[2])},i(S){v||(yt(h.$$.fragment,S),v=!0)},o(S){Ct(h.$$.fragment,S),v=!1},d(S){S&&K(n),be(h),E&&E.d(),k(),C=!1,z()}}}function Rv(e,n,r){let o,s,h,l,c,p,d,b=Bt,y=()=>(b(),b=on(g,Z=>r(9,d=Z)),g);e.$$.on_destroy.push(()=>b());let{scaleAbsolute:g}=n;y();let{paletteColors:P}=n,{paletteClasses:k}=n,v=!1;const C=Z=>Z.map(rt=>({color:rt,lightness:ke(rt).get("oklch.l")}));let z,E;const S={top:35,bottom:15,left:50,right:10};Ss(()=>{r(5,v=!0)});function F(){d=this.checked,g.set(d)}function O(){z=this.clientWidth,E=this.clientHeight,r(1,z),r(2,E)}return e.$$set=Z=>{"scaleAbsolute"in Z&&y(r(0,g=Z.scaleAbsolute)),"paletteColors"in Z&&r(11,P=Z.paletteColors),"paletteClasses"in Z&&r(12,k=Z.paletteClasses)},e.$$.update=()=>{e.$$.dirty&2048&&r(3,o=C(P)),e.$$.dirty&2&&r(4,s=z-S.left-S.right),e.$$.dirty&4&&r(13,h=E-S.top-S.bottom),e.$$.dirty&4112&&r(8,l=os().domain([0,k]).range([0,s])),e.$$.dirty&8200&&r(7,c=os().domain(Rp(o.map(Z=>Z.lightness))).range([h,0])),e.$$.dirty&8192&&r(6,p=os().domain([0,1]).range([h,0]))},[g,z,E,o,s,v,p,c,l,d,S,P,k,h,F,O]}class Qf extends hn{constructor(n){super(),un(this,n,Rv,Bv,Je,{scaleAbsolute:0,paletteColors:11,paletteClasses:12})}}function _c(e,n,r){const o=e.slice();return o[13]=n[r],o}function gc(e,n,r){const o=e.slice();return o[13]=n[r],o}function vc(e,n,r){const o=e.slice();return o[18]=n[r],o}function Zv(e){let n,r,o;return{c(){n=xt("Color vision deficiencies (CVDs) can lead to distorted and obstructed understanding of data if they are not considered in choosing a color palette."),r=A("br"),o=xt("The most common one is deuteranomaly which reduces discrimination of reddish and greenish contents of colors.")},m(s,h){Q(s,n,h),Q(s,r,h),Q(s,o,h)},p:Bt,d(s){s&&K(n),s&&K(r),s&&K(o)}}}function bc(e){let n,r=e[18].label+"",o,s;return{c(){n=A("option"),o=xt(r),n.__value=s=e[18].id,n.value=n.__value},m(h,l){Q(h,n,l),M(n,o)},p(h,l){l&2&&r!==(r=h[18].label+"")&&Ue(o,r),l&2&&s!==(s=h[18].id)&&(n.__value=s,n.value=n.__value)},d(h){h&&K(n)}}}function yc(e){let n,r,o,s,h=e[3],l=[];for(let c=0;c<h.length;c+=1)l[c]=wc(gc(e,h,c));return o=new Qf({props:{scaleAbsolute:nv,paletteColors:e[3],paletteClasses:e[4]}}),{c(){n=A("div");for(let c=0;c<l.length;c+=1)l[c].c();r=q(),Pe(o.$$.fragment),w(n,"class","h-12 ml-[50px] mr-[10px] mt-2 mb-1 flex flex-row border-4 border-opacity-75 border-r-white border-b-white border-l-gray-300 border-t-gray-300")},m(c,p){Q(c,n,p);for(let d=0;d<l.length;d+=1)l[d].m(n,null);Q(c,r,p),ve(o,c,p),s=!0},p(c,p){if(p&8){h=c[3];let b;for(b=0;b<h.length;b+=1){const y=gc(c,h,b);l[b]?l[b].p(y,p):(l[b]=wc(y),l[b].c(),l[b].m(n,null))}for(;b<l.length;b+=1)l[b].d(1);l.length=h.length}const d={};p&8&&(d.paletteColors=c[3]),p&16&&(d.paletteClasses=c[4]),o.$set(d)},i(c){s||(yt(o.$$.fragment,c),s=!0)},o(c){Ct(o.$$.fragment,c),s=!1},d(c){c&&K(n),dn(l,c),c&&K(r),be(o,c)}}}function wc(e){let n;return{c(){n=A("div"),w(n,"class","flex-grow"),ui(n,"background-color",e[13])},m(r,o){Q(r,n,o)},p(r,o){o&8&&ui(n,"background-color",r[13])},d(r){r&&K(n)}}}function xc(e){let n,r,o,s,h=e[6],l=[];for(let c=0;c<h.length;c+=1)l[c]=kc(_c(e,h,c));return o=new Qf({props:{scaleAbsolute:iv,paletteColors:e[6],paletteClasses:e[7]}}),{c(){n=A("div");for(let c=0;c<l.length;c+=1)l[c].c();r=q(),Pe(o.$$.fragment),w(n,"class","h-12 ml-[50px] mr-[10px] mt-2 mb-1 flex flex-row border-4 border-opacity-75 border-r-white border-b-white border-l-gray-300 border-t-gray-300")},m(c,p){Q(c,n,p);for(let d=0;d<l.length;d+=1)l[d].m(n,null);Q(c,r,p),ve(o,c,p),s=!0},p(c,p){if(p&64){h=c[6];let b;for(b=0;b<h.length;b+=1){const y=_c(c,h,b);l[b]?l[b].p(y,p):(l[b]=kc(y),l[b].c(),l[b].m(n,null))}for(;b<l.length;b+=1)l[b].d(1);l.length=h.length}const d={};p&64&&(d.paletteColors=c[6]),p&128&&(d.paletteClasses=c[7]),o.$set(d)},i(c){s||(yt(o.$$.fragment,c),s=!0)},o(c){Ct(o.$$.fragment,c),s=!1},d(c){c&&K(n),dn(l,c),c&&K(r),be(o,c)}}}function kc(e){let n;return{c(){n=A("div"),w(n,"class","flex-grow"),ui(n,"background-color",e[13])},m(r,o){Q(r,n,o)},p(r,o){o&64&&ui(n,"background-color",r[13])},d(r){r&&K(n)}}}function Dv(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E,S,F,O,Z,rt,Y,Nt,Mt;l=new rr({props:{title:"CVD simulation",dropdownEnd:!0,$$slots:{default:[Zv]},$$scope:{ctx:e}}});let ut=e[1],X=[];for(let st=0;st<ut.length;st+=1)X[st]=bc(vc(e,ut,st));let j=e[2]&&yc(e),lt=e[5]&&xc(e);return{c(){n=A("div"),r=A("h2"),r.textContent="Test your palettes",o=q(),s=A("h3"),h=xt("Apply a color vision deficiency simulation "),Pe(l.$$.fragment),c=xt(" and check the lightness graphs."),p=q(),d=A("select");for(let st=0;st<X.length;st+=1)X[st].c();b=q(),y=A("div"),g=A("label"),P=A("h4"),P.textContent="Point palette",k=q(),v=A("input"),C=q(),j&&j.c(),z=q(),E=A("div"),S=A("label"),F=A("h4"),F.textContent="Area palette",O=q(),Z=A("input"),rt=q(),lt&&lt.c(),w(r,"class","text-lg font-semibold"),w(d,"class","m-2 select select-sm select-primary w-full max-w-xs"),e[0]===void 0&&Ke(()=>e[10].call(d)),w(P,"class","font-semibold"),w(v,"type","checkbox"),w(v,"class","toggle toggle-sm toggle-primary"),w(g,"class","label cursor-pointer rounded-lg"),w(y,"class","bg-base-200 rounded-lg p-2 mt-2 mb-2 border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300"),w(F,"class","font-semibold"),w(Z,"type","checkbox"),w(Z,"class","toggle toggle-sm toggle-primary"),w(S,"class","label cursor-pointer rounded-lg"),w(E,"class","bg-base-200 rounded-lg p-2 mb-2 border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300")},m(st,dt){Q(st,n,dt),M(n,r),M(n,o),M(n,s),M(s,h),ve(l,s,null),M(s,c),M(n,p),M(n,d);for(let ct=0;ct<X.length;ct+=1)X[ct].m(d,null);Ei(d,e[0]),M(n,b),M(n,y),M(y,g),M(g,P),M(g,k),M(g,v),v.checked=e[2],M(y,C),j&&j.m(y,null),M(n,z),M(n,E),M(E,S),M(S,F),M(S,O),M(S,Z),Z.checked=e[5],M(E,rt),lt&&lt.m(E,null),Y=!0,Nt||(Mt=[pt(d,"change",e[10]),pt(v,"change",e[11]),pt(Z,"change",e[12])],Nt=!0)},p(st,[dt]){const ct={};if(dt&2097152&&(ct.$$scope={dirty:dt,ctx:st}),l.$set(ct),dt&2){ut=st[1];let U;for(U=0;U<ut.length;U+=1){const et=vc(st,ut,U);X[U]?X[U].p(et,dt):(X[U]=bc(et),X[U].c(),X[U].m(d,null))}for(;U<X.length;U+=1)X[U].d(1);X.length=ut.length}dt&3&&Ei(d,st[0]),dt&4&&(v.checked=st[2]),st[2]?j?(j.p(st,dt),dt&4&&yt(j,1)):(j=yc(st),j.c(),yt(j,1),j.m(y,null)):j&&(sn(),Ct(j,1,1,()=>{j=null}),ln()),dt&32&&(Z.checked=st[5]),st[5]?lt?(lt.p(st,dt),dt&32&&yt(lt,1)):(lt=xc(st),lt.c(),yt(lt,1),lt.m(E,null)):lt&&(sn(),Ct(lt,1,1,()=>{lt=null}),ln())},i(st){Y||(yt(l.$$.fragment,st),yt(j),yt(lt),Y=!0)},o(st){Ct(l.$$.fragment,st),Ct(j),Ct(lt),Y=!1},d(st){st&&K(n),be(l),dn(X,st),j&&j.d(),lt&&lt.d(),Nt=!1,Re(Mt)}}}function Fv(e,n,r){let o,s,h,l,c,p,d,b;kt(e,Ts,C=>r(0,o=C)),kt(e,ev,C=>r(1,s=C)),kt(e,Su,C=>r(3,l=C)),kt(e,ia,C=>r(4,c=C)),kt(e,Eu,C=>r(6,d=C)),kt(e,ra,C=>r(7,b=C));const{showPointLayer:y,showAreaLayer:g}=As;kt(e,y,C=>r(2,h=C)),kt(e,g,C=>r(5,p=C));function P(){o=Cs(this),Ts.set(o)}function k(){h=this.checked,y.set(h)}function v(){p=this.checked,g.set(p)}return[o,s,h,l,c,p,d,b,y,g,P,k,v]}class $v extends hn{constructor(n){super(),un(this,n,Fv,Dv,Je,{})}}function Pc(e,n,r){const o=e.slice();return o[8]=n[r],o}function Mc(e){let n;return{c(){n=A("div"),w(n,"class","flex-grow"),ui(n,"background-color",e[8])},m(r,o){Q(r,n,o)},p(r,o){o&1&&ui(n,"background-color",r[8])},d(r){r&&K(n)}}}function Lc(e){let n,r,o,s,h,l,c,p=e[3].innerText+"",d,b,y,g;return{c(){n=A("div"),r=A("div"),o=Pn("svg"),s=Pn("path"),h=q(),l=A("span"),c=xt("Successfully copied "),d=xt(p),b=xt(" to the clipboard!"),w(s,"stroke-linecap","round"),w(s,"stroke-linejoin","round"),w(s,"stroke-width","2"),w(s,"d","M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"),w(o,"xmlns","http://www.w3.org/2000/svg"),w(o,"class","stroke-current flex-shrink-0 h-6 w-6"),w(o,"fill","none"),w(o,"viewBox","0 0 24 24"),w(n,"class","z-[1010] fixed bottom-10 left-20 right-20 m-auto w-fit alert alert-success p-4 self-center border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300")},m(P,k){Q(P,n,k),M(n,r),M(r,o),M(o,s),M(r,h),M(r,l),M(l,c),M(l,d),M(l,b),g=!0},p(P,k){(!g||k&8)&&p!==(p=P[3].innerText+"")&&Ue(d,p)},i(P){g||(Ke(()=>{y||(y=kn(n,Yn,{duration:300},!0)),y.run(1)}),g=!0)},o(P){y||(y=kn(n,Yn,{duration:300},!1)),y.run(0),g=!1},d(P){P&&K(n),P&&y&&y.end()}}}function Hv(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C=e[0],z=[];for(let S=0;S<C.length;S+=1)z[S]=Mc(Pc(e,C,S));let E=e[4]&&Lc(e);return{c(){n=A("div"),r=A("div"),o=A("h4"),s=xt(e[2]),h=q(),l=A("button"),l.textContent="Copy",c=q(),p=A("div");for(let S=0;S<z.length;S+=1)z[S].c();d=q(),b=A("p"),y=xt(e[1]),g=q(),E&&E.c(),w(o,"class","font-semibold"),w(l,"class","btn btn-sm btn-secondary"),w(r,"class","flex flex-row flex-wrap items-center justify-between pl-4 pr-2 pb-2"),w(p,"class","h-8 mx-8 mb-2 flex flex-row border-4 border-opacity-75 border-r-white border-b-white border-l-gray-300 border-t-gray-300"),w(b,"class","mx-8 px-2 overflow-x-auto bg-base-100 rounded-lg border-4 border-opacity-75 border-r-white border-b-white border-l-gray-300 border-t-gray-300"),w(n,"class","my-2 bg-base-200 rounded-lg py-2 border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300")},m(S,F){Q(S,n,F),M(n,r),M(r,o),M(o,s),M(r,h),M(r,l),M(n,c),M(n,p);for(let O=0;O<z.length;O+=1)z[O].m(p,null);M(n,d),M(n,b),M(b,y),e[7](b),M(n,g),E&&E.m(n,null),P=!0,k||(v=pt(l,"click",e[6]),k=!0)},p(S,[F]){if((!P||F&4)&&Ue(s,S[2]),F&1){C=S[0];let O;for(O=0;O<C.length;O+=1){const Z=Pc(S,C,O);z[O]?z[O].p(Z,F):(z[O]=Mc(Z),z[O].c(),z[O].m(p,null))}for(;O<z.length;O+=1)z[O].d(1);z.length=C.length}(!P||F&2)&&Ue(y,S[1]),S[4]?E?(E.p(S,F),F&16&&yt(E,1)):(E=Lc(S),E.c(),yt(E,1),E.m(n,null)):E&&(sn(),Ct(E,1,1,()=>{E=null}),ln())},i(S){P||(yt(E),P=!0)},o(S){Ct(E),P=!1},d(S){S&&K(n),dn(z,S),e[7](null),E&&E.d(),k=!1,v()}}}function Gv(e,n,r){let{colors:o}=n,{colorsText:s}=n,{title:h}=n,l,c=!1;const p=()=>{navigator.clipboard.writeText(l.innerText),r(4,c=!0),setTimeout(()=>{r(4,c=!1)},1500)},d=()=>p();function b(y){xn[y?"unshift":"push"](()=>{l=y,r(3,l)})}return e.$$set=y=>{"colors"in y&&r(0,o=y.colors),"colorsText"in y&&r(1,s=y.colorsText),"title"in y&&r(2,h=y.title)},[o,s,h,l,c,p,d,b]}class Zo extends hn{constructor(n){super(),un(this,n,Gv,Hv,Je,{colors:0,colorsText:1,title:2})}}function Wv(e){let n;return{c(){n=xt(`Palettes are exported with all applied modificators, so e.g. disable lightness\r
                correction or CVD simulation if unwanted.`)},m(r,o){Q(r,n,o)},d(r){r&&K(n)}}}function qv(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E,S,F,O,Z,rt,Y,Nt,Mt,ut,X,j,lt,st,dt,ct,U,et,W,mt,$t,Et,At,It,Lt,Gt,fe,de,re,zt,qt,ye,ht,Tt,Dt,jt,oe,Me;return b=new rr({props:{title:"Exported colors",$$slots:{default:[Wv]},$$scope:{ctx:e}}}),$t=new Zo({props:{title:"Point palette",colors:e[5],colorsText:e[6]}}),At=new Zo({props:{title:"Area palette",colors:e[3],colorsText:e[4]}}),qt=new Zo({props:{title:"Seed colors",colors:e[0],colorsText:e[9]}}),ht=new Zo({props:{title:"Point input colors",colors:e[1],colorsText:e[8]}}),Dt=new Zo({props:{title:"Area input colors",colors:e[2],colorsText:e[7]}}),{c(){n=A("div"),r=A("h2"),r.textContent="Export",o=q(),s=A("p"),s.textContent="Copy palettes as JavaScript arrays.",h=q(),l=A("div"),c=A("div"),p=A("h3"),p.textContent="Exported colors",d=q(),Pe(b.$$.fragment),y=q(),g=A("div"),P=A("label"),P.textContent="Formatting options",k=q(),v=A("div"),C=A("div"),z=A("h3"),z.textContent="String format",E=q(),S=A("div"),F=A("input"),O=q(),Z=A("input"),rt=q(),Y=A("input"),Nt=q(),Mt=A("div"),ut=A("h3"),ut.textContent="Color notation",X=q(),j=A("div"),lt=A("input"),st=q(),dt=A("input"),ct=q(),U=A("input"),et=q(),W=A("input"),mt=q(),Pe($t.$$.fragment),Et=q(),Pe(At.$$.fragment),It=q(),Lt=A("div"),Gt=A("input"),fe=q(),de=A("h3"),de.textContent="Other colors",re=q(),zt=A("div"),Pe(qt.$$.fragment),ye=q(),Pe(ht.$$.fragment),Tt=q(),Pe(Dt.$$.fragment),w(r,"class","text-lg font-semibold"),w(s,"class","pb-4 pt-2"),w(p,"class","font-semibold pt-2"),w(c,"class","flex flex-row"),w(P,"tabindex","0"),w(P,"class","btn btn-sm btn-primary btn-outline"),w(z,"class","font-semibold"),w(F,"type","radio"),w(F,"name","format"),w(F,"data-title","'"),F.value="single",w(F,"class","btn btn-primary btn-outline btn-sm"),w(Z,"type","radio"),w(Z,"name","format"),w(Z,"data-title",'"'),Z.value="double",w(Z,"class","btn btn-primary btn-outline btn-sm"),w(Y,"type","radio"),w(Y,"name","format"),w(Y,"data-title","no quote marks"),Y.value="noquote",w(Y,"class","btn btn-primary btn-outline btn-sm"),w(S,"class","btn-group pl-2 pb-4 pt-2"),w(ut,"class","font-semibold"),w(lt,"type","radio"),w(lt,"name","notation"),w(lt,"data-title","Hex"),lt.value="hex",w(lt,"class","btn btn-primary btn-outline btn-sm"),w(dt,"type","radio"),w(dt,"name","notation"),w(dt,"data-title","RGB"),dt.value="rgb",w(dt,"class","btn btn-primary btn-outline btn-sm"),w(U,"type","radio"),w(U,"name","notation"),w(U,"data-title","Lab"),U.value="lab",w(U,"class","btn btn-primary btn-outline btn-sm"),w(W,"type","radio"),w(W,"name","notation"),w(W,"data-title","LCH"),W.value="lch",w(W,"class","btn btn-primary btn-outline btn-sm"),w(j,"class","btn-group pl-2 pt-2"),w(v,"tabindex","0"),w(v,"class","dropdown-content menu p-4 mt-2 bg-base-100 rounded-lg w-fit min-w-[18rem] border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300"),w(g,"class","dropdown dropdown-end"),w(l,"class","flex flex-row flex-wrap items-baseline justify-between"),w(Gt,"type","checkbox"),w(de,"class","collapse-title font-semibold pt-4 bg-base-200"),w(zt,"class","collapse-content"),w(Lt,"tabindex","0"),w(Lt,"class","collapse collapse-arrow border-base-200 bg-base-100 rounded-lg border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300"),w(n,"class","")},m(Ot,Ft){Q(Ot,n,Ft),M(n,r),M(n,o),M(n,s),M(n,h),M(n,l),M(l,c),M(c,p),M(c,d),ve(b,c,null),M(l,y),M(l,g),M(g,P),M(g,k),M(g,v),M(v,C),M(C,z),M(C,E),M(C,S),M(S,F),M(S,O),M(S,Z),M(S,rt),M(S,Y),M(v,Nt),M(v,Mt),M(Mt,ut),M(Mt,X),M(Mt,j),M(j,lt),M(j,st),M(j,dt),M(j,ct),M(j,U),M(j,et),M(j,W),M(n,mt),ve($t,n,null),M(n,Et),ve(At,n,null),M(n,It),M(n,Lt),M(Lt,Gt),M(Lt,fe),M(Lt,de),M(Lt,re),M(Lt,zt),ve(qt,zt,null),M(zt,ye),ve(ht,zt,null),M(zt,Tt),ve(Dt,zt,null),jt=!0,oe||(Me=[pt(F,"click",e[10]),pt(Z,"click",e[10]),pt(Y,"click",e[10]),pt(lt,"click",e[10]),pt(dt,"click",e[10]),pt(U,"click",e[10]),pt(W,"click",e[10])],oe=!0)},p(Ot,[Ft]){const ae={};Ft&262144&&(ae.$$scope={dirty:Ft,ctx:Ot}),b.$set(ae);const Se={};Ft&32&&(Se.colors=Ot[5]),Ft&64&&(Se.colorsText=Ot[6]),$t.$set(Se);const Ee={};Ft&8&&(Ee.colors=Ot[3]),Ft&16&&(Ee.colorsText=Ot[4]),At.$set(Ee);const Fe={};Ft&1&&(Fe.colors=Ot[0]),Ft&512&&(Fe.colorsText=Ot[9]),qt.$set(Fe);const Ne={};Ft&2&&(Ne.colors=Ot[1]),Ft&256&&(Ne.colorsText=Ot[8]),ht.$set(Ne);const Ye={};Ft&4&&(Ye.colors=Ot[2]),Ft&128&&(Ye.colorsText=Ot[7]),Dt.$set(Ye)},i(Ot){jt||(yt(b.$$.fragment,Ot),yt($t.$$.fragment,Ot),yt(At.$$.fragment,Ot),yt(qt.$$.fragment,Ot),yt(ht.$$.fragment,Ot),yt(Dt.$$.fragment,Ot),jt=!0)},o(Ot){Ct(b.$$.fragment,Ot),Ct($t.$$.fragment,Ot),Ct(At.$$.fragment,Ot),Ct(qt.$$.fragment,Ot),Ct(ht.$$.fragment,Ot),Ct(Dt.$$.fragment,Ot),jt=!1},d(Ot){Ot&&K(n),be(b),be($t),be(At),be(qt),be(ht),be(Dt),oe=!1,Re(Me)}}}function Uv(e,n,r){let o,s,h,l,c,p,d,b,y,g,P,k;kt(e,Eu,O=>r(3,o=O)),kt(e,Dh,O=>r(4,s=O)),kt(e,Su,O=>r(5,h=O)),kt(e,Zh,O=>r(6,l=O)),kt(e,Rh,O=>r(7,c=O)),kt(e,Bh,O=>r(8,p=O)),kt(e,Nh,O=>r(9,d=O)),kt(e,Lu,O=>r(11,b=O)),kt(e,Mu,O=>r(12,y=O)),kt(e,Xt,O=>r(13,g=O)),kt(e,Oh,O=>r(14,P=O)),kt(e,Ah,O=>r(15,k=O));let v=["#000000"],C=["#000000"],z=["#000000"];Ss(()=>{let O=document.getElementsByTagName("input");for(let Z=0;Z<O.length;Z++)(O[Z].value==k||O[Z].value==P)&&(O[Z].checked=!0)});const E=O=>O.map(Z=>Z.color),S=O=>{let Z=O,rt="";switch(P){case"rgb":Z=Z.map(Y=>ke(Y).css());break;case"lab":Z=Z.map(Y=>ke(Y).lab());break;case"lch":Z=Z.map(Y=>ke(Y).lch());break}return k=="single"?Z=Z.map(Y=>"'"+Y+"'"):k=="double"&&(Z=Z.map(Y=>'"'+Y+'"')),rt="["+Z.join(", ")+"]",rt},F=()=>{let O=document.getElementsByTagName("input");for(let Z=0;Z<O.length;Z++)if(O[Z].type=="radio"&&O[Z].checked)switch(O[Z].name){case"format":Ci(Ah,k=O[Z].value,k);break;case"notation":Ci(Oh,P=O[Z].value,P);break}r(0,v=E(g)),r(1,C=E(y)),r(2,z=E(b)),Ci(Nh,d=S(v),d),Ci(Bh,p=S(C),p),Ci(Rh,c=S(z),c),Ci(Zh,l=S(h),l),Ci(Dh,s=S(o),s)};return F(),[v,C,z,o,s,h,l,c,p,d,F]}class Vv extends hn{constructor(n){super(),un(this,n,Uv,qv,Je,{})}}function Tc(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v;const C=e[3].default,z=Ac(C,e,e[2],null),E=z||Yv();return{c(){n=A("div"),r=A("div"),o=q(),s=A("div"),h=A("button"),h.textContent="\u2715",l=q(),c=A("div"),p=A("h2"),d=xt(e[1]),b=q(),E&&E.c(),w(r,"class","fixed left-0 top-0 w-screen h-screen bg-black bg-opacity-25 cursor-pointer"),w(h,"class","btn btn-secondary btn-sm btn-circle rounded-lg absolute right-2 top-2"),w(p,"class","card-title"),w(c,"class","card-body h-full"),w(s,"class","card w-[90%] h-[90%] 2xl:w-[75%] 2xl:h-[75%] bg-base-100 rounded-lg border-4 border-opacity-75 border-l-white border-t-white border-b-gray-300 border-r-gray-300 "),w(n,"class","z-[1010] fixed left-0 top-0 w-screen h-screen flex items-center justify-center")},m(S,F){Q(S,n,F),M(n,r),M(n,o),M(n,s),M(s,h),M(s,l),M(s,c),M(c,p),M(p,d),M(c,b),E&&E.m(c,null),P=!0,k||(v=[pt(r,"click",e[5]),pt(h,"click",e[6])],k=!0)},p(S,F){(!P||F&2)&&Ue(d,S[1]),z&&z.p&&(!P||F&4)&&Bc(z,C,S,S[2],P?Nc(C,S[2],F,null):Rc(S[2]),null)},i(S){P||(yt(E,S),Ke(()=>{y||(y=kn(s,$h,{},!0)),y.run(1)}),Ke(()=>{g||(g=kn(n,Yn,{duration:300},!0)),g.run(1)}),P=!0)},o(S){Ct(E,S),y||(y=kn(s,$h,{},!1)),y.run(0),g||(g=kn(n,Yn,{duration:300},!1)),g.run(0),P=!1},d(S){S&&K(n),E&&E.d(S),S&&y&&y.end(),S&&g&&g.end(),k=!1,Re(v)}}}function Yv(e){let n;return{c(){n=A("p"),n.textContent="Modal content"},m(r,o){Q(r,n,o)},p:Bt,d(r){r&&K(n)}}}function Xv(e){let n,r,o,s,h,l,c,p=e[0]&&Tc(e);return{c(){n=A("button"),r=xt(e[1]),o=q(),p&&p.c(),s=Yr(),w(n,"class","btn btn-ghost")},m(d,b){Q(d,n,b),M(n,r),Q(d,o,b),p&&p.m(d,b),Q(d,s,b),h=!0,l||(c=pt(n,"click",e[4]),l=!0)},p(d,[b]){(!h||b&2)&&Ue(r,d[1]),d[0]?p?(p.p(d,b),b&1&&yt(p,1)):(p=Tc(d),p.c(),yt(p,1),p.m(s.parentNode,s)):p&&(sn(),Ct(p,1,1,()=>{p=null}),ln())},i(d){h||(yt(p),h=!0)},o(d){Ct(p),h=!1},d(d){d&&K(n),d&&K(o),p&&p.d(d),d&&K(s),l=!1,c()}}}function jv(e,n,r){let{$$slots:o={},$$scope:s}=n,{show:h=!1}=n,{title:l="Modal"}=n;const c=()=>r(0,h=!0),p=()=>r(0,h=!1),d=()=>r(0,h=!1);return e.$$set=b=>{"show"in b&&r(0,h=b.show),"title"in b&&r(1,l=b.title),"$$scope"in b&&r(2,s=b.$$scope)},[h,l,s,o,c,p,d]}class td extends hn{constructor(n){super(),un(this,n,jv,Xv,Je,{show:0,title:1})}}function Cc(e,n,r){const o=e.slice();return o[8]=n[r],o}function Kv(e){let n,r,o;return{c(){n=A("h3"),n.textContent="Export panel",r=q(),o=A("div"),o.innerHTML=`<p class="pt-4">On the export panel, you can copy the colors of your palettes (as well as seed and input colors) as JavaScript arrays.</p> 
                        <p class="pt-4">Palettes can be formatted as hexcodes (supported by any major software dealing with colors and used in web programming), RGB components (as used in CSS) or as CIE Lab and Lch components for more specific applications.</p>`,w(n,"class","font-semibold text-lg"),w(o,"class","ml-4")},m(s,h){Q(s,n,h),Q(s,r,h),Q(s,o,h)},p:Bt,i:Bt,o:Bt,d(s){s&&K(n),s&&K(r),s&&K(o)}}}function Jv(e){let n,r,o;return{c(){n=A("h3"),n.textContent="Test panel",r=q(),o=A("div"),o.innerHTML=`<p class="pt-4">On the test panel, you can apply a color vision deficiency (CVD)
                            simulation and check the lightness graphs for your palettes.</p> 
                        <p class="pt-4">If CVDs are not considered in palette creation, they can lead to
                            obstructed understanding of data for some viewers. The most common one
                            is deuteranomaly, followed by deuteranopia, protanomaly, and protanopia.
                            So testing a palette against deuteranomaly is recommended as a bare
                            minimum. For more comprehensive testing, at least testing against
                            deuteranopia and protanopia is recommended.</p> 
                        <ul class="list-[square] pl-4 marker:text-secondary"><li>Deuteranomaly: reduced distinction of reddish and greenish contents
                                of colors</li> 
                            <li>Deuteranopia: no distinction of reddish and greenish contents of
                                colors</li> 
                            <li>Protanomaly: similar to deuteranomaly, reddish colors also more dim</li> 
                            <li>Protanopia: similar to deuteranopia, reddish colors also more dim</li></ul> 
                        <p class="pt-4">Charting lightness steps within a color palette (in a perceptually uniform color space) can be a great help in testing a color palette.</p> 
                        <ul class="list-[square] pl-4 marker:text-secondary"><li>For sequential data, aim for a straight line with equal steps from
                                dark to light or vice versa.</li> 
                            <li>For diverging data, aim for a V or U shaped lightness graph from
                                dark to light to dark or vice versa.</li> 
                            <li>For qualitative data, aim for the same lightness all over
                                the palette.</li></ul>`,w(n,"class","font-semibold text-lg"),w(o,"class","ml-4")},m(s,h){Q(s,n,h),Q(s,r,h),Q(s,o,h)},p:Bt,i:Bt,o:Bt,d(s){s&&K(n),s&&K(r),s&&K(o)}}}function Qv(e){let n,r,o;return{c(){n=A("h3"),n.textContent="Layers panel",r=q(),o=A("div"),o.innerHTML=`<p class="pt-4">On the layers panel, you can adjust the zoom level of the map and the
                            example data to be displayed, as well as change the data type per layer
                            to fit your use case. Then, you drag and drop seed colors into the drop
                            zone highlighted in green to derive your palettes.</p> 
                        <p class="pt-4">There are also a lot of more detailed options to choose from. It is
                            recommended to just try them out, as all changes in MapColPal are
                            instantly applied and visualized, so you can easily learn their usage by
                            just toggling options on and off.</p> 
                        <p class="pt-4">The main idea of palette derivation in MapColPal is to adjust color
                            parameters (in oklch, these are lightness, chroma and hue) purposefully
                            following the concept of visual variables depending on the type of data
                            to be displayed. Depending on the chosen data type (sequential,
                            diverging or qualitative), MapColPal changes the lightness optimization
                            (more on this on the next page about testing palettes):</p> 
                        <ul class="list-[square] pl-4 marker:text-secondary"><li>For sequential palettes, lightness is adjusted to range from dark to
                                light or vice versa in equally sized steps. When only one seed color
                                is placed in the drop zone, lightness steps of this color are
                                generated automatically.</li> 
                            <li>For diverging palettes, lightness is adjusted to range from dark to
                                light to dark or vice versa in equally sized steps. If only one
                                color is placed in the drop zone, the opposing color is chosen to be
                                complementary to it and the middle is a neutral grey, for two
                                colors, the middle color is automatically set to a neutral grey as
                                well.</li> 
                            <li>For qualitative palettes, lightness is adjusted to be the same for
                                every color. Here, hue is the defining difference between colors,
                                therefore it is recommended to generate enough seed colors to have
                                one for each palette class to use the full range of available hues
                                to make them as noticeably different as possible.</li></ul>`,w(n,"class","font-semibold text-lg"),w(o,"class","ml-4")},m(s,h){Q(s,n,h),Q(s,r,h),Q(s,o,h)},p:Bt,i:Bt,o:Bt,d(s){s&&K(n),s&&K(r),s&&K(o)}}}function tb(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z=e[2],E=[];for(let S=0;S<z.length;S+=1)E[S]=Sc(Cc(e,z,S));return{c(){n=A("h3"),n.textContent="Start panel",r=q(),o=A("div"),s=A("p"),s.textContent=`On the start panel, you create seed colors, which are the basis for the\r
                            palette derivation in the next step and allow to derive multiple related\r
                            color palettes based on the same shared set of colors.`,h=q(),l=A("p"),l.textContent=`You can choose either to generate or load seed colors (Hint: When you\r
                            copy-paste a MapColPal URL with seed colors in it, they will be loaded\r
                            automatically!), when you choose to generate them, you have the\r
                            following options:`,c=q(),p=A("ul"),p.innerHTML=`<li>Generating them harmoniously spread out: With this option, MapColPal
                                will generate a random color and then generate the rest of them
                                according to a hue template (complementary, triadic, and so on;
                                based on the number of colors to generate)</li> 
                            <li>Generate them in the same fashion, but then mapped to a certain
                                range of hues only.</li> 
                            <li>Fitted to a basemap, this also works following the same principle,
                                but a start color is derived from the currently visible map tiles of
                                the chosen basemap. Then the seed colors are chosen relative to this
                                start color.</li> 
                            <li>Random generation</li>`,d=q(),b=A("p"),b.textContent=`If you want to use the hue filter, the hues are distributed from 0 to\r
                            360 degrees in the following way:`,y=q(),g=A("div");for(let S=0;S<E.length;S+=1)E[S].c();P=q(),k=A("p"),k.textContent=`Wherever in MapColPal seed colors are displayed, you can click on them\r
                            to adjust them and see the changes applied in realtime!`,v=q(),C=A("p"),C.innerHTML='MapColPal uses the oklch color space (which is a polar conversion of <a href="https://bottosson.github.io/posts/oklab/" target="_blank" class="link hover:text-secondary-focus">oklab</a>). More color spaces will be added as options in the future.',w(n,"class","font-semibold text-lg"),w(s,"class","pt-4"),w(l,"class","pt-4"),w(p,"class","list-[square] pl-4 marker:text-secondary"),w(b,"class","pt-4"),w(g,"class","h-10 flex flex-row flex-wrap pt-2 pr-4"),w(k,"class","pt-4"),w(C,"class","pt-4"),w(o,"class","ml-4")},m(S,F){Q(S,n,F),Q(S,r,F),Q(S,o,F),M(o,s),M(o,h),M(o,l),M(o,c),M(o,p),M(o,d),M(o,b),M(o,y),M(o,g);for(let O=0;O<E.length;O+=1)E[O].m(g,null);M(o,P),M(o,k),M(o,v),M(o,C)},p(S,F){if(F&4){z=S[2];let O;for(O=0;O<z.length;O+=1){const Z=Cc(S,z,O);E[O]?E[O].p(Z,F):(E[O]=Sc(Z),E[O].c(),E[O].m(g,null))}for(;O<E.length;O+=1)E[O].d(1);E.length=z.length}},i:Bt,o:Bt,d(S){S&&K(n),S&&K(r),S&&K(o),dn(E,S)}}}function eb(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k;return g=new rr({props:{title:"Info icon",$$slots:{default:[nb]},$$scope:{ctx:e}}}),{c(){n=A("h3"),n.textContent="Welcome to MapColPal!",r=q(),o=A("div"),s=A("p"),s.textContent=`MapColPal, is a tool to ease working with color palettes for thematic\r
                            maps.`,h=q(),l=A("p"),l.innerHTML=`This app is color coded in the following way: Important user interface
                            elements are marked <span class="text-primary">blue</span> and minor
                            elements are <span class="text-accent">yellow</span>. The most important
                            actions are highlighted in <span class="text-secondary">pink</span>.`,c=q(),p=A("p"),p.innerHTML=`Tip: You can also navigate the side panels pressing <kbd class="kbd">\u25C0\uFE0E</kbd>
                            and
                            <kbd class="kbd">\u25B6\uFE0E</kbd> on your keyboard.`,d=q(),b=A("p"),y=xt(`The next sections of this tutorial lead you through each of the screens\r
                            of the app and there are also info icons `),Pe(g.$$.fragment),P=xt(" placed throughout the website with more concise information!"),w(n,"class","font-semibold text-lg"),w(s,"class","pt-4"),w(l,"class","pt-4"),w(p,"class","pt-4"),w(b,"class","pt-4"),w(o,"class","ml-4")},m(v,C){Q(v,n,C),Q(v,r,C),Q(v,o,C),M(o,s),M(o,h),M(o,l),M(o,c),M(o,p),M(o,d),M(o,b),M(b,y),ve(g,b,null),M(b,P),k=!0},p(v,C){const z={};C&2048&&(z.$$scope={dirty:C,ctx:v}),g.$set(z)},i(v){k||(yt(g.$$.fragment,v),k=!0)},o(v){Ct(g.$$.fragment,v),k=!1},d(v){v&&K(n),v&&K(r),v&&K(o),be(g)}}}function Sc(e){let n,r=e[8].hue+"",o,s;return{c(){n=A("p"),o=xt(r),s=q(),w(n,"class","flex-grow text-base-100 text-center"),ui(n,"background-color",e[8].color)},m(h,l){Q(h,n,l),M(n,o),M(n,s)},p:Bt,d(h){h&&K(n)}}}function nb(e){let n;return{c(){n=xt("You will find these all over the app!")},m(r,o){Q(r,n,o)},d(r){r&&K(n)}}}function ib(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E,S,F,O,Z,rt,Y;const Nt=[eb,tb,Qv,Jv,Kv],Mt=[];function ut(X,j){return X[0]==0?0:X[0]==1?1:X[0]==2?2:X[0]==3?3:X[0]==4?4:-1}return~(v=ut(e))&&(C=Mt[v]=Nt[v](e)),{c(){n=A("div"),r=A("ul"),o=A("li"),o.innerHTML='<p class="text-start">Introduction</p>',s=q(),h=A("li"),h.innerHTML='<p class="text-start">1. Generate seed colors</p>',l=q(),c=A("li"),c.innerHTML='<p class="text-start">2. Adjust layers</p>',p=q(),d=A("li"),d.innerHTML='<p class="text-start">3. Test palettes</p>',b=q(),y=A("li"),y.innerHTML='<p class="text-start">4. Export them!</p>',g=q(),P=A("div"),k=A("div"),C&&C.c(),z=q(),E=A("div"),S=A("button"),S.textContent="Back",F=q(),O=A("button"),O.textContent="Next",w(o,"data-content","\u2B50"),w(o,"class","step step-info"),Pt(o,"font-semibold",e[0]==0),Pt(o,"text-lg",e[0]==0),w(h,"data-content","\u{1F331}"),w(h,"class","step before:transition after:transition"),Pt(h,"step-info",e[0]>0),Pt(h,"font-semibold",e[0]==1),Pt(h,"text-lg",e[0]==1),w(c,"data-content","\u{1F9C5}"),w(c,"class","step before:transition after:transition"),Pt(c,"step-info",e[0]>1),Pt(c,"font-semibold",e[0]==2),Pt(c,"text-lg",e[0]==2),w(d,"data-content","\u{1F3AF}"),w(d,"class","step before:transition after:transition"),Pt(d,"step-info",e[0]>2),Pt(d,"font-semibold",e[0]==3),Pt(d,"text-lg",e[0]==3),w(y,"data-content","\u{1F4E6}"),w(y,"class","step before:transition after:transition"),Pt(y,"step-info",e[0]>3),Pt(y,"font-semibold",e[0]==4),Pt(y,"text-lg",e[0]==4),w(r,"class","steps h-32 lg:h-auto lg:steps-vertical lg:w-64 p-4 flex-shrink-0"),w(k,"class","h-10 flex-shrink flex-grow overflow-auto p-2 rounded-lg border-4 border-opacity-75 border-r-white border-b-white border-l-gray-300 border-t-gray-300"),w(P,"class","flex flex-col flex-1"),w(n,"class","flex lg:flex-row flex-col h-full"),w(S,"class","btn btn-primary"),Pt(S,"invisible",e[0]==0),w(O,"class","btn btn-primary"),Pt(O,"invisible",e[0]==4),w(E,"class","card-actions justify-end")},m(X,j){Q(X,n,j),M(n,r),M(r,o),M(r,s),M(r,h),M(r,l),M(r,c),M(r,p),M(r,d),M(r,b),M(r,y),M(n,g),M(n,P),M(P,k),~v&&Mt[v].m(k,null),Q(X,z,j),Q(X,E,j),M(E,S),M(E,F),M(E,O),Z=!0,rt||(Y=[pt(S,"click",e[3]),pt(O,"click",e[4])],rt=!0)},p(X,j){j&1&&Pt(o,"font-semibold",X[0]==0),j&1&&Pt(o,"text-lg",X[0]==0),j&1&&Pt(h,"step-info",X[0]>0),j&1&&Pt(h,"font-semibold",X[0]==1),j&1&&Pt(h,"text-lg",X[0]==1),j&1&&Pt(c,"step-info",X[0]>1),j&1&&Pt(c,"font-semibold",X[0]==2),j&1&&Pt(c,"text-lg",X[0]==2),j&1&&Pt(d,"step-info",X[0]>2),j&1&&Pt(d,"font-semibold",X[0]==3),j&1&&Pt(d,"text-lg",X[0]==3),j&1&&Pt(y,"step-info",X[0]>3),j&1&&Pt(y,"font-semibold",X[0]==4),j&1&&Pt(y,"text-lg",X[0]==4);let lt=v;v=ut(X),v===lt?~v&&Mt[v].p(X,j):(C&&(sn(),Ct(Mt[lt],1,1,()=>{Mt[lt]=null}),ln()),~v?(C=Mt[v],C?C.p(X,j):(C=Mt[v]=Nt[v](X),C.c()),yt(C,1),C.m(k,null)):C=null),j&1&&Pt(S,"invisible",X[0]==0),j&1&&Pt(O,"invisible",X[0]==4)},i(X){Z||(yt(C),Z=!0)},o(X){Ct(C),Z=!1},d(X){X&&K(n),~v&&Mt[v].d(),X&&K(z),X&&K(E),rt=!1,Re(Y)}}}function rb(e){let n,r,o;function s(l){e[5](l)}let h={title:"Tutorial",$$slots:{default:[ib]},$$scope:{ctx:e}};return e[1]!==void 0&&(h.show=e[1]),n=new td({props:h}),xn.push(()=>Ji(n,"show",s)),{c(){Pe(n.$$.fragment)},m(l,c){ve(n,l,c),o=!0},p(l,[c]){const p={};c&2049&&(p.$$scope={dirty:c,ctx:l}),!r&&c&2&&(r=!0,p.show=l[1],Qa(()=>r=!1)),n.$set(p)},i(l){o||(yt(n.$$.fragment,l),o=!0)},o(l){Ct(n.$$.fragment,l),o=!1},d(l){be(n,l)}}}let Ec=9;function ob(e,n,r){let o;kt(e,au,y=>r(1,o=y));let s=0,h=[],l=360/Ec,c=0;for(let y=0;y<Ec+1;y++)h.push({hue:c,color:ke.oklch(.7,.2,c).hex()}),c+=l;const p=()=>r(0,s--,s),d=()=>r(0,s++,s);function b(y){o=y,au.set(o)}return[s,o,h,p,d,b]}class ab extends hn{constructor(n){super(),un(this,n,ob,rb,Je,{})}}function sb(e){let n,r,o;return{c(){n=A("div"),n.innerHTML=`<p>MapColPal was originally created as part of a thesis within the <a href="https://cartographymaster.eu/" target="_blank" class="link hover:text-secondary-focus">Cartography M.Sc.</a>
            programme by me, Valerian Lange, and is currently maintained as a personal project. Feel
            free to reach out if you want to get involved! Via
            <a href="https://www.linkedin.com/in/valerianlange/" target="_blank" class="link hover:text-secondary-focus">LinkedIn</a>,
            <a href="https://github.com/justvalerian" target="_blank" class="link hover:text-secondary-focus">github</a>
            or via
            <a href="mailto:mapcolpal@justvalerian.com" target="_blank" class="link hover:text-secondary-focus">e-mail</a>.</p> 
        <p class="pt-4">You can find the source code
            <a href="https://github.com/justvalerian/mapcolpal" class="link hover:text-secondary-focus" target="_blank">here</a>. Links to the thesis and the abstract will be added in October 2022.</p> 
        <h3 class="font-semibold pt-4">Technical aspects</h3> 
        <p>Made with Svelte, vite, TypeScript, postCSS, tailwindCSS and daisyUI via <a href="https://github.com/svelte-add/svelte-add" target="_blank" class="link hover:text-secondary-focus">svelte-add</a>.<br/>The user interface uses flat shading inspired by and loosely designed after the
            classic Tanaka contours.<br/>Using the following npm packages: d3, chroma-js, leaflet,
            leaflet-providers, merge-images, and color-blind.</p> 
        <h3 class="font-semibold pt-4">Sources</h3> 
        <p>The data used is open data from the following sources:</p> 
        <ul class="list-[square] pl-4 marker:text-secondary"><li>Small scale: European Union country polygons and capital city points from <a href="https://www.naturalearthdata.com/" target="_blank" class="link hover:text-secondary-focus">Natural Earth</a> (public domain)</li> 
            <li>Large scale: <a href="https://www.data.gv.at/katalog/dataset/2ee6b8bf-6292-413c-bb8b-bd22dbb2ad4b" target="_blank" class="link hover:text-secondary-focus">Vienna districts</a>
                as polygons and
                <a href="https://www.data.gv.at/katalog/dataset/898afe8c-0297-45d6-b4b5-0cb9e632094b" target="_blank" class="link hover:text-secondary-focus">Vienna public swimming pools</a>
                as points (both licensed under
                <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" class="link hover:text-secondary-focus">CC BY 4.0</a>), data source: Stadt Wien \u2013
                <a href="https://data.wien.gv.at" target="_blank" class="link hover:text-secondary-focus">data.wien.gv.at</a>.</li></ul> 
        <h3 class="font-semibold pt-4">License</h3> 
        <p>MapColPal \xA9 Valerian Lange under the MIT license. See <a href="https://github.com/justvalerian/mapcolpal" class="link hover:text-secondary-focus" target="_blank">code repository</a> for details.</p>`,r=q(),o=A("div"),o.innerHTML='<p class="flex-none">Code with \u{1F49C} by <a href="https://justvalerian.com/" class="hover:text-secondary-focus" target="_blank">justvalerian</a>.</p>',w(n,"class","overflow-auto"),w(o,"class","grow flex flex-row justify-end items-end")},m(s,h){Q(s,n,h),Q(s,r,h),Q(s,o,h)},p:Bt,d(s){s&&K(n),s&&K(r),s&&K(o)}}}function lb(e){let n,r;return n=new td({props:{title:"About",$$slots:{default:[sb]},$$scope:{ctx:e}}}),{c(){Pe(n.$$.fragment)},m(o,s){ve(n,o,s),r=!0},p(o,[s]){const h={};s&1&&(h.$$scope={dirty:s,ctx:o}),n.$set(h)},i(o){r||(yt(n.$$.fragment,o),r=!0)},o(o){Ct(n.$$.fragment,o),r=!1},d(o){be(n,o)}}}class ub extends hn{constructor(n){super(),un(this,n,null,lb,Je,{})}}const{window:hb}=Sp;function cb(e){let n,r,o;var s=e[3].component;function h(l){return{}}return s&&(n=new s(h())),{c(){n&&Pe(n.$$.fragment),r=Yr()},m(l,c){n&&ve(n,l,c),Q(l,r,c),o=!0},p(l,c){if(s!==(s=l[3].component)){if(n){sn();const p=n;Ct(p.$$.fragment,1,0,()=>{be(p,1)}),ln()}s?(n=new s(h()),Pe(n.$$.fragment),yt(n.$$.fragment,1),ve(n,r.parentNode,r)):n=null}},i(l){o||(n&&yt(n.$$.fragment,l),o=!0)},o(l){n&&Ct(n.$$.fragment,l),o=!1},d(l){l&&K(r),n&&be(n,l)}}}function fb(e){let n,r,o,s,h,l;function c(g){e[9](g)}function p(g){e[10](g)}function d(g){e[11](g)}var b=e[3].component;function y(g){let P={};return g[0]!==void 0&&(P.loadSeedColors=g[0]),g[1]!==void 0&&(P.numberOfSeedColors=g[1]),g[2]!==void 0&&(P.textInput=g[2]),{props:P}}return b&&(n=new b(y(e)),xn.push(()=>Ji(n,"loadSeedColors",c)),xn.push(()=>Ji(n,"numberOfSeedColors",p)),xn.push(()=>Ji(n,"textInput",d))),{c(){n&&Pe(n.$$.fragment),h=Yr()},m(g,P){n&&ve(n,g,P),Q(g,h,P),l=!0},p(g,P){const k={};if(!r&&P&1&&(r=!0,k.loadSeedColors=g[0],Qa(()=>r=!1)),!o&&P&2&&(o=!0,k.numberOfSeedColors=g[1],Qa(()=>o=!1)),!s&&P&4&&(s=!0,k.textInput=g[2],Qa(()=>s=!1)),b!==(b=g[3].component)){if(n){sn();const v=n;Ct(v.$$.fragment,1,0,()=>{be(v,1)}),ln()}b?(n=new b(y(g)),xn.push(()=>Ji(n,"loadSeedColors",c)),xn.push(()=>Ji(n,"numberOfSeedColors",p)),xn.push(()=>Ji(n,"textInput",d)),Pe(n.$$.fragment),yt(n.$$.fragment,1),ve(n,h.parentNode,h)):n=null}else b&&n.$set(k)},i(g){l||(n&&yt(n.$$.fragment,g),l=!0)},o(g){n&&Ct(n.$$.fragment,g),l=!1},d(g){g&&K(h),n&&be(n,g)}}}function db(e){let n,r,o,s,h,l,c,p,d,b,y,g,P,k,v,C,z,E,S,F,O,Z,rt,Y,Nt,Mt,ut,X,j,lt,st;const dt=[fb,cb],ct=[];function U(et,W){return et[3].id==et[4][0].id?0:1}return z=U(e),E=ct[z]=dt[z](e),Y=new ab({}),Mt=new ub({}),{c(){n=A("div"),r=A("div"),o=A("h1"),o.textContent="MapColPal",s=q(),h=A("h2"),h.textContent="your pal for map color palettes",l=q(),c=A("ul"),p=A("li"),p.textContent="Start",d=q(),b=A("li"),b.textContent="Layers",y=q(),g=A("li"),g.textContent="Test",P=q(),k=A("li"),k.textContent="Export",v=q(),C=A("div"),E.c(),S=q(),F=A("div"),O=A("button"),O.textContent="Back",Z=q(),rt=A("div"),Pe(Y.$$.fragment),Nt=q(),Pe(Mt.$$.fragment),ut=q(),X=A("button"),X.textContent="Next",w(o,"class","text-2xl font-bold text-primary"),w(p,"class","step step-success"),w(b,"class","step before:transition after:transition"),Pt(b,"step-success",e[3].id>0),w(g,"class","step before:transition after:transition"),Pt(g,"step-success",e[3].id>1),w(k,"class","step before:transition after:transition"),Pt(k,"step-success",e[3].id>2),w(c,"class","steps w-full pt-4"),w(r,"class","p-4"),w(C,"class","overflow-hidden hover:overflow-y-auto px-4"),w(O,"class","btn btn-primary"),Pt(O,"invisible",e[3].name=="start"),w(rt,"class","btn-group"),w(X,"class","btn btn-primary"),Pt(X,"invisible",e[3].name=="export"),w(F,"class","w-full p-4 flex-grow flex items-end flex-row justify-between"),w(n,"class","h-screen lg:w-1/2 2xl:w-1/3 flex flex-col")},m(et,W){Q(et,n,W),M(n,r),M(r,o),M(r,s),M(r,h),M(r,l),M(r,c),M(c,p),M(c,d),M(c,b),M(c,y),M(c,g),M(c,P),M(c,k),M(n,v),M(n,C),ct[z].m(C,null),M(n,S),M(n,F),M(F,O),M(F,Z),M(F,rt),ve(Y,rt,null),M(rt,Nt),ve(Mt,rt,null),M(F,ut),M(F,X),j=!0,lt||(st=[pt(hb,"keydown",e[7]),pt(O,"click",e[6]),pt(X,"click",e[5])],lt=!0)},p(et,[W]){W&8&&Pt(b,"step-success",et[3].id>0),W&8&&Pt(g,"step-success",et[3].id>1),W&8&&Pt(k,"step-success",et[3].id>2);let mt=z;z=U(et),z===mt?ct[z].p(et,W):(sn(),Ct(ct[mt],1,1,()=>{ct[mt]=null}),ln(),E=ct[z],E?E.p(et,W):(E=ct[z]=dt[z](et),E.c()),yt(E,1),E.m(C,null)),W&8&&Pt(O,"invisible",et[3].name=="start"),W&8&&Pt(X,"invisible",et[3].name=="export")},i(et){j||(yt(E),yt(Y.$$.fragment,et),yt(Mt.$$.fragment,et),j=!0)},o(et){Ct(E),Ct(Y.$$.fragment,et),Ct(Mt.$$.fragment,et),j=!1},d(et){et&&K(n),ct[z].d(),be(Y),be(Mt),lt=!1,Re(st)}}}let pb=/([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/g;function mb(e,n,r){let o;kt(e,Xt,S=>r(8,o=S));let s=!1,h=6,l="",c=[{id:0,name:"start",component:Mv},{id:1,name:"generate",component:Ov},{id:2,name:"test",component:$v},{id:3,name:"export",component:Vv}],p=c[0];const d=()=>{p.id<c.length-1&&r(3,p=c[p.id+1])},b=()=>{p.id>0&&r(3,p=c[p.id-1])},y=S=>{if(S.key==="ArrowLeft"){b();return}else if(S.key==="ArrowRight"){d();return}},g=()=>{let F=new URLSearchParams(document.location.search).get("seed");if(F!==null){let O=F.split("-");for(const Z in O)O[Z]="#"+O[Z];return O.join(", ")}else return""},P=S=>{const F=new URL(window.location.href);let O=S.map(Z=>Z.color.slice(1));F.searchParams.set("seed",O.join("-")),window.history.pushState(null,"",F.toString())};pb.test(window.location.search)&&(s=!0,l=g()),Ss(()=>{Xt.initialize(s,h,l)});let k;const v=S=>{clearTimeout(k),k=setTimeout(()=>{P(S)},250)};function C(S){s=S,r(0,s)}function z(S){h=S,r(1,h)}function E(S){l=S,r(2,l)}return e.$$.update=()=>{e.$$.dirty&256&&v(o)},[s,h,l,p,c,d,b,y,o,C,z,E]}class _b extends hn{constructor(n){super(),un(this,n,mb,db,Je,{})}}function gb(e){let n,r,o,s,h;return r=new _b({}),s=new dv({}),{c(){n=A("main"),Pe(r.$$.fragment),o=q(),Pe(s.$$.fragment),w(n,"class","flex flex-col lg:flex-row")},m(l,c){Q(l,n,c),ve(r,n,null),M(n,o),ve(s,n,null),h=!0},p:Bt,i(l){h||(yt(r.$$.fragment,l),yt(s.$$.fragment,l),h=!0)},o(l){Ct(r.$$.fragment,l),Ct(s.$$.fragment,l),h=!1},d(l){l&&K(n),be(r),be(s)}}}class vb extends hn{constructor(n){super(),un(this,n,null,gb,Je,{})}}new vb({target:document.getElementById("app")});
